<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stephen Quiz Week 6</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f7fa;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .quiz-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .question h3 {
            margin-top: 0;
            color: #3498db;
        }
        .options {
            margin-left: 20px;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-right: 10px;
        }
        .true-false label {
            display: inline-block;
            margin-right: 20px;
        }
        .scenario {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        .scenario img {
            max-width: 100%;
            display: block;
            margin: 15px auto;
            border: 1px solid #ddd;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .timer-container {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s;
        }
        .timer {
            font-size: 22px;
            font-weight: bold;
            color: #2c3e50;
            margin: 0 10px;
        }
        .timer.warning {
            color: #f39c12;
        }
        .timer.danger {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        #results {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 5px;
            text-align: center;
        }
        #score {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        .feedback {
            margin-top: 10px;
            font-style: italic;
            color: #7f8c8d;
        }
        .cate-diagram {
            width: 100%;
            max-width: 500px;
            margin: 15px auto;
            display: block;
        }
    </style>
</head>
<body>
    <h1>Causal ML & Meta-Learners Quiz - Stephen Quiz Week 6</h1>
    
    <div class="timer-container" id="timer-container">
        <span>Time Remaining:</span>
        <div class="timer" id="timer">25:00</div>
    </div>
    
    <div class="quiz-container">
        <form id="quiz-form">
            <div class="student-info">
                <h2>Student Information</h2>
                <p>
                    <label for="student-name">Full Name:</label>
                    <input type="text" id="student-name" name="student-name" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px;">
                </p>
                <p>
                    <label for="student-id">Student ID:</label>
                    <input type="text" id="student-id" name="student-id" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px;">
                </p>
            </div>

            <!-- Multiple Choice Questions (14) -->
            <div class="question">
                <h3>Question 1: Data Interpretation</h3>
                <div class="scenario">
                    <p>Below is a chart showing the pre-treatment GDP trends for California and several potential control states:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Pre-Treatment GDP Growth (%)</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="100" y="270" text-anchor="middle">2015</text>
                        <text x="175" y="270" text-anchor="middle">2016</text>
                        <text x="250" y="270" text-anchor="middle">2017</text>
                        <text x="325" y="270" text-anchor="middle">2018</text>
                        <text x="400" y="270" text-anchor="middle">2019</text>
                        <text x="250" y="290" text-anchor="middle" font-weight="bold">Year</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0</text>
                        <text x="40" y="210" text-anchor="end">1</text>
                        <text x="40" y="170" text-anchor="end">2</text>
                        <text x="40" y="130" text-anchor="end">3</text>
                        <text x="40" y="90" text-anchor="end">4</text>
                        <text x="40" y="50" text-anchor="end">5</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">GDP Growth (%)</text>
                        
                        <!-- California line -->
                        <polyline points="100,210 175,180 250,130 325,170 400,110" fill="none" stroke="#ff7f50" stroke-width="3" />
                        <!-- Nevada line -->
                        <polyline points="100,190 175,190 250,150 325,120 400,170" fill="none" stroke="#4682b4" stroke-width="2" />
                        <!-- Oregon line -->
                        <polyline points="100,220 175,200 250,160 325,180 400,140" fill="none" stroke="#32cd32" stroke-width="2" />
                        <!-- Washington line -->
                        <polyline points="100,170 175,150 250,110 325,150 400,90" fill="none" stroke="#9370db" stroke-width="2" />
                        <!-- Arizona line -->
                        <polyline points="100,230 175,220 250,200 325,210 400,230" fill="none" stroke="#ffbb33" stroke-width="2" />
                        
                        <!-- Data points for California -->
                        <circle cx="100" cy="210" r="5" fill="#ff7f50" />
                        <circle cx="175" cy="180" r="5" fill="#ff7f50" />
                        <circle cx="250" cy="130" r="5" fill="#ff7f50" />
                        <circle cx="325" cy="170" r="5" fill="#ff7f50" />
                        <circle cx="400" cy="110" r="5" fill="#ff7f50" />
                        
                        <!-- Legend -->
                        <rect x="360" y="50" width="15" height="15" fill="#ff7f50" />
                        <text x="380" y="63" text-anchor="start" font-size="12">California</text>
                        
                        <rect x="360" y="70" width="15" height="15" fill="#4682b4" />
                        <text x="380" y="83" text-anchor="start" font-size="12">Nevada</text>
                        
                        <rect x="360" y="90" width="15" height="15" fill="#32cd32" />
                        <text x="380" y="103" text-anchor="start" font-size="12">Oregon</text>
                        
                        <rect x="360" y="110" width="15" height="15" fill="#9370db" />
                        <text x="380" y="123" text-anchor="start" font-size="12">Washington</text>
                        
                        <rect x="360" y="130" width="15" height="15" fill="#ffbb33" />
                        <text x="380" y="143" text-anchor="start" font-size="12">Arizona</text>
                    </svg>
                </div>
                <p>Based on this pre-treatment data, which state would make the best single control unit for a Synthetic Control Method analysis of California?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> Nevada</label>
                    <label><input type="radio" name="q1" value="b"> Oregon</label>
                    <label><input type="radio" name="q1" value="c"> Washington</label>
                    <label><input type="radio" name="q1" value="d"> Arizona</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 2: Multiple Choice</h3>
                <p>Which treatment effect explains why a tutoring program works better for STEM students than humanities students?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> Average Treatment Effect (ATE)</label>
                    <label><input type="radio" name="q2" value="b"> Heterogeneous Treatment Effect (HTE)</label>
                    <label><input type="radio" name="q2" value="c"> Local Average Treatment Effect (LATE)</label>
                    <label><input type="radio" name="q2" value="d"> Treatment Effect on the Treated (TT)</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 3: Multiple Choice</h3>
                <p>In the context of SHAP values, what does a negative SHAP value for a feature indicate?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> The feature is not important for the prediction</label>
                    <label><input type="radio" name="q3" value="b"> The feature decreases the predicted value compared to the baseline</label>
                    <label><input type="radio" name="q3" value="c"> The feature has a negative correlation with other features</label>
                    <label><input type="radio" name="q3" value="d"> The model failed to learn the relationship for this feature</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 4: Multiple Choice</h3>
                <p>Using our policy intervention dataset, if California implemented a policy (Treatment = "Yes") and saw GDP increase from 3.2 to 3.8, while Oregon had no policy (Treatment = "No") and saw GDP increase from 3.1 to 3.3, what is the naive estimate of the treatment effect?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> 0.4</label>
                    <label><input type="radio" name="q4" value="b"> 0.6</label>
                    <label><input type="radio" name="q4" value="c"> 0.5</label>
                    <label><input type="radio" name="q4" value="d"> 0.2</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 5: Multiple Choice</h3>
                <p>In a Synthetic Control Method, if Nevada contributes 30%, Oregon contributes 40%, and Washington contributes 30% to your synthetic California, what would be the synthetic prediction if these states have unemployment rates of 4.2%, 3.9%, and 4.5% respectively?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> 4.2%</label>
                    <label><input type="radio" name="q5" value="b"> 4.18%</label>
                    <label><input type="radio" name="q5" value="c"> 4.0%</label>
                    <label><input type="radio" name="q5" value="d"> 3.9%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 6: Data Analysis</h3>
                <div class="scenario">
                    <p>The following table shows treatment effects for a job training program across different demographic groups:</p>
                    <table style="width:100%; border-collapse:collapse; margin:15px 0; text-align:center;">
                        <thead style="background-color:#f4f4f4;">
                            <tr>
                                <th style="padding:10px; border:1px solid #ddd;">Demographic Group</th>
                                <th style="padding:10px; border:1px solid #ddd;">Sample Size</th>
                                <th style="padding:10px; border:1px solid #ddd;">Treatment Effect (Income Increase %)</th>
                                <th style="padding:10px; border:1px solid #ddd;">Standard Error</th>
                                <th style="padding:10px; border:1px solid #ddd;">p-value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Women under 30</td>
                                <td style="padding:10px; border:1px solid #ddd;">245</td>
                                <td style="padding:10px; border:1px solid #ddd;">14.2%</td>
                                <td style="padding:10px; border:1px solid #ddd;">2.1%</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.001</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Women over 30</td>
                                <td style="padding:10px; border:1px solid #ddd;">278</td>
                                <td style="padding:10px; border:1px solid #ddd;">9.5%</td>
                                <td style="padding:10px; border:1px solid #ddd;">1.8%</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.008</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Men under 30</td>
                                <td style="padding:10px; border:1px solid #ddd;">231</td>
                                <td style="padding:10px; border:1px solid #ddd;">6.8%</td>
                                <td style="padding:10px; border:1px solid #ddd;">2.4%</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.015</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Men over 30</td>
                                <td style="padding:10px; border:1px solid #ddd;">252</td>
                                <td style="padding:10px; border:1px solid #ddd;">3.2%</td>
                                <td style="padding:10px; border:1px solid #ddd;">1.9%</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.089</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;"><strong>Overall Average</strong></td>
                                <td style="padding:10px; border:1px solid #ddd;"><strong>1006</strong></td>
                                <td style="padding:10px; border:1px solid #ddd;"><strong>8.4%</strong></td>
                                <td style="padding:10px; border:1px solid #ddd;"><strong>1.1%</strong></td>
                                <td style="padding:10px; border:1px solid #ddd;"><strong>0.003</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>What does this data tell us about the Conditional Average Treatment Effects (CATEs) of the job training program?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> The treatment effects are homogeneous across all demographic groups</label>
                    <label><input type="radio" name="q6" value="b"> The treatment has stronger effects for women than for men, with the strongest effect for younger women</label>
                    <label><input type="radio" name="q6" value="c"> Only the overall average treatment effect is statistically significant (p < 0.05)</label>
                    <label><input type="radio" name="q6" value="d"> The program is equally effective for both genders but age is the primary factor affecting outcomes</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 7: Chart Analysis</h3>
                <div class="scenario">
                    <p>Consider this chart showing the actual outcome for a treated unit (red line) compared with two different counterfactual estimates (blue and green lines):</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Treatment Effect Analysis: Smoking Ban on Respiratory Admissions</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="125" y="270" text-anchor="middle">Pre-Treatment</text>
                        <text x="375" y="270" text-anchor="middle">Post-Treatment</text>
                        
                        <!-- Treatment line -->
                        <line x1="250" y1="50" x2="250" y1="250" y2="250" stroke="#fa8072" stroke-width="2" stroke-dasharray="5,5" />
                        <text x="250" y="40" text-anchor="middle" font-size="12" font-weight="bold">Policy Implemented</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0</text>
                        <text x="40" y="210" text-anchor="end">10</text>
                        <text x="40" y="170" text-anchor="end">20</text>
                        <text x="40" y="130" text-anchor="end">30</text>
                        <text x="40" y="90" text-anchor="end">40</text>
                        <text x="40" y="50" text-anchor="end">50</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Hospital Admissions</text>
                        
                        <!-- Actual line (red) -->
                        <polyline points="50,170 100,180 150,190 200,170 250,175 300,140 350,120 400,110 450,100" fill="none" stroke="#e74c3c" stroke-width="3" />
                        
                        <!-- Synthetic Control line (blue) -->
                        <polyline points="50,170 100,180 150,190 200,170 250,175 300,185 350,180 400,190 450,185" fill="none" stroke="#3498db" stroke-width="2" />
                        
                        <!-- Difference-in-Difference line (green) -->
                        <polyline points="50,170 100,180 150,190 200,170 250,175 300,170 350,165 400,175 450,170" fill="none" stroke="#2ecc71" stroke-width="2" />
                        
                        <!-- Legend -->
                        <rect x="60" y="60" width="15" height="15" fill="#e74c3c" />
                        <text x="80" y="73" text-anchor="start" font-size="12">Actual Outcome</text>
                        
                        <rect x="60" y="80" width="15" height="15" fill="#3498db" />
                        <text x="80" y="93" text-anchor="start" font-size="12">Synthetic Control Counterfactual</text>
                        
                        <rect x="60" y="100" width="15" height="15" fill="#2ecc71" />
                        <text x="80" y="113" text-anchor="start" font-size="12">Difference-in-Differences Counterfactual</text>
                    </svg>
                </div>
                <p>Based on the data shown in this chart, which of the following statements is most accurate?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> The treatment effect estimate would be similar regardless of which counterfactual method is used</label>
                    <label><input type="radio" name="q7" value="b"> The treatment had no effect according to the difference-in-differences method</label>
                    <label><input type="radio" name="q7" value="c"> The synthetic control method suggests a larger treatment effect than the difference-in-differences method</label>
                    <label><input type="radio" name="q7" value="d"> The actual outcome shows that the treatment increased hospital admissions</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 8: Multiple Choice</h3>
                <p>If a policy intervention lowered unemployment from 5.1% to 4.8% in treated regions, but would have naturally decreased to 5.0% without intervention (according to synthetic control), what is the actual treatment effect?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> -0.3%</label>
                    <label><input type="radio" name="q8" value="b"> -0.2%</label>
                    <label><input type="radio" name="q8" value="c"> -0.1%</label>
                    <label><input type="radio" name="q8" value="d"> -0.5%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 9: Multiple Choice</h3>
                <p>In the context of LATE (Local Average Treatment Effect), what do we mean by "compliers"?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> People who always take the treatment regardless of encouragement</label>
                    <label><input type="radio" name="q9" value="b"> People who take the treatment only when encouraged to do so</label>
                    <label><input type="radio" name="q9" value="c"> People who never take the treatment regardless of encouragement</label>
                    <label><input type="radio" name="q9" value="d"> People who comply with all study protocols</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 10: Chart Comparison</h3>
                <div class="scenario">
                    <p>The charts below compare the Synthetic Control Method (SCM) and Difference-in-Differences (DiD) approaches for estimating the effect of a minimum wage increase on employment levels:</p>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <div style="width: 48%;">
                            <svg class="cate-diagram" viewBox="0 0 500 300">
                                <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                                <!-- Title -->
                                <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Synthetic Control Method</text>
                                
                                <!-- Axes -->
                                <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                                <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                                
                                <!-- X-axis labels -->
                                <text x="150" y="270" text-anchor="middle">Pre-Treatment</text>
                                <text x="350" y="270" text-anchor="middle">Post-Treatment</text>
                                
                                <!-- Treatment line -->
                                <line x1="250" y1="50" x2="250" y1="250" y2="250" stroke="#fa8072" stroke-width="2" stroke-dasharray="5,5" />
                                
                                <!-- Y-axis labels -->
                                <text x="40" y="250" text-anchor="end">0%</text>
                                <text x="40" y="200" text-anchor="end">2%</text>
                                <text x="40" y="150" text-anchor="end">4%</text>
                                <text x="40" y="100" text-anchor="end">6%</text>
                                <text x="40" y="50" text-anchor="end">8%</text>
                                <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Unemployment Rate</text>
                                
                                <!-- Treated unit (real) -->
                                <polyline points="80,120 130,130 180,110 230,120 280,150 330,170 380,180 430,190" fill="none" stroke="#ff7f50" stroke-width="3" />
                                
                                <!-- Synthetic control -->
                                <polyline points="80,120 130,130 180,110 230,120 280,135 330,140 380,145 430,150" fill="none" stroke="#ffd700" stroke-width="3" stroke-dasharray="5,0" />
                                
                                <!-- Effect arrow and label -->
                                <line x1="430" y1="150" x2="430" y1="190" stroke="#333" stroke-width="1" />
                                <polygon points="430,190 425,180 435,180" fill="#333" />
                                <text x="410" y="170" text-anchor="end" font-size="12">Effect: +4%</text>
                                
                                <!-- Legend -->
                                <rect x="60" y="60" width="15" height="15" fill="#ff7f50" />
                                <text x="80" y="73" text-anchor="start" font-size="12">Treated State</text>
                                
                                <rect x="60" y="80" width="15" height="15" fill="#ffd700" />
                                <text x="80" y="93" text-anchor="start" font-size="12">Synthetic Control</text>
                            </svg>
                        </div>
                        <div style="width: 48%;">
                            <svg class="cate-diagram" viewBox="0 0 500 300">
                                <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                                <!-- Title -->
                                <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Difference-in-Differences</text>
                                
                                <!-- Axes -->
                                <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                                <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                                
                                <!-- X-axis labels -->
                                <text x="150" y="270" text-anchor="middle">Pre-Treatment</text>
                                <text x="350" y="270" text-anchor="middle">Post-Treatment</text>
                                
                                <!-- Treatment line -->
                                <line x1="250" y1="50" x2="250" y1="250" y2="250" stroke="#fa8072" stroke-width="2" stroke-dasharray="5,5" />
                                
                                <!-- Y-axis labels -->
                                <text x="40" y="250" text-anchor="end">0%</text>
                                <text x="40" y="200" text-anchor="end">2%</text>
                                <text x="40" y="150" text-anchor="end">4%</text>
                                <text x="40" y="100" text-anchor="end">6%</text>
                                <text x="40" y="50" text-anchor="end">8%</text>
                                <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Unemployment Rate</text>
                                
                                <!-- Treated unit -->
                                <polyline points="80,120 230,120 280,150 430,190" fill="none" stroke="#ff7f50" stroke-width="3" />
                                
                                <!-- Control unit -->
                                <polyline points="80,180 230,200 280,210 430,240" fill="none" stroke="#4682b4" stroke-width="3" />
                                
                                <!-- Parallel trend (counterfactual) -->
                                <polyline points="250,120 430,160" fill="none" stroke="#4682b4" stroke-width="3" stroke-dasharray="5,5" />
                                
                                <!-- Effect arrow and label -->
                                <line x1="430" y1="160" x2="430" y1="190" stroke="#333" stroke-width="1" />
                                <polygon points="430,190 425,180 435,180" fill="#333" />
                                <text x="410" y="175" text-anchor="end" font-size="12">Effect: +3%</text>
                                
                                <!-- Legend -->
                                <rect x="60" y="60" width="15" height="15" fill="#ff7f50" />
                                <text x="80" y="73" text-anchor="start" font-size="12">Treated State</text>
                                
                                <rect x="60" y="80" width="15" height="15" fill="#4682b4" />
                                <text x="80" y="93" text-anchor="start" font-size="12">Control State</text>
                                
                                <rect x="60" y="100" width="15" height="15" fill="#4682b4" />
                                <text x="80" y="113" text-anchor="start" font-size="12" stroke-dasharray="5,5">Counterfactual Trend</text>
                            </svg>
                        </div>
                    </div>
                </div>
                <p>Based on these charts, which statement is most accurate regarding the advantages of the Synthetic Control Method compared to Difference-in-Differences?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> The SCM produces smaller estimated treatment effects</label>
                    <label><input type="radio" name="q10" value="b"> The SCM uses pre-treatment data more efficiently to create a better-matched counterfactual</label>
                    <label><input type="radio" name="q10" value="c"> The SCM requires fewer data points to implement</label>
                    <label><input type="radio" name="q10" value="d"> The SCM does not rely on the parallel trends assumption</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 11: Multiple Choice</h3>
                <p>Using our dataset, if both California (treated) and Washington (untreated) had GDP growth of 0.2% before policy implementation, and after implementation California grew by 0.5% while Washington grew by 0.3%, what is the difference-in-differences estimate?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="a"> 0.2%</label>
                    <label><input type="radio" name="q11" value="b"> 0.3%</label>
                    <label><input type="radio" name="q11" value="c"> 0.1%</label>
                    <label><input type="radio" name="q11" value="d"> 0.4%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 12: SHAP Analysis</h3>
                <div class="scenario">
                    <p>The following SHAP (SHapley Additive exPlanations) plot shows the contribution of various features to house price predictions:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">SHAP Values for House Price Prediction</text>
                        
                        <!-- Base Value and Prediction -->
                        <text x="100" y="60" text-anchor="start" font-size="12">Base Value: $250,000</text>
                        <text x="300" y="60" text-anchor="start" font-size="12">Prediction: $285,000</text>
                        
                        <!-- Axis -->
                        <line x1="100" y1="100" x2="400" y1="100" y2="100" stroke="#333" stroke-width="2" />
                        
                        <!-- Base value marker -->
                        <line x1="200" y1="90" x2="200" y1="110" stroke="#333" stroke-width="2" />
                        <text x="200" y="80" text-anchor="middle" font-size="12">Base Value</text>
                        
                        <!-- Final prediction marker -->
                        <line x1="300" y1="90" x2="300" y1="110" stroke="#333" stroke-width="2" />
                        <text x="300" y="80" text-anchor="middle" font-size="12">Prediction</text>
                        
                        <!-- SHAP contributions - positive -->
                        <rect x="200" y="130" width="40" height="25" fill="#ff9999" />
                        <text x="250" y="148" text-anchor="start" font-size="14">Location (+$15,000)</text>
                        
                        <rect x="240" y="165" width="25" height="25" fill="#ff9999" />
                        <text x="275" y="183" text-anchor="start" font-size="14">Square Footage (+$10,000)</text>
                        
                        <rect x="265" y="200" width="15" height="25" fill="#ff9999" />
                        <text x="290" y="218" text-anchor="start" font-size="14">Fireplace (+$5,000)</text>
                        
                        <!-- SHAP contributions - negative -->
                        <rect x="165" y="235" width="35" height="25" fill="#99ccff" />
                        <text x="120" y="253" text-anchor="end" font-size="14">Age of House (-$12,000)</text>
                        
                        <rect x="190" y="270" width="10" height="25" fill="#99ccff" />
                        <text x="175" y="288" text-anchor="end" font-size="14">No Pool (-$3,000)</text>
                        
                        <!-- Connection lines -->
                        <line x1="200" y1="100" x2="200" y1="130" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="240" y1="142.5" x2="240" y1="165" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="265" y1="177.5" x2="265" y1="200" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="280" y1="212.5" x2="280" y1="235" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="165" y1="247.5" x2="165" y1="270" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="190" y1="282.5" x2="300" y1="282.5" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        <line x1="300" y1="282.5" x2="300" y1="100" stroke="#333" stroke-width="1" stroke-dasharray="5,2" />
                        
                        <!-- Legend -->
                        <rect x="400" y="150" width="15" height="15" fill="#ff9999" />
                        <text x="420" y="163" text-anchor="start" font-size="12">Increases prediction</text>
                        
                        <rect x="400" y="180" width="15" height="15" fill="#99ccff" />
                        <text x="420" y="193" text-anchor="start" font-size="12">Decreases prediction</text>
                    </svg>
                </div>
                <p>Based on the SHAP values displayed in this visualization, which feature contributes the most to increasing the house price prediction above the base value?</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="a"> Square Footage</label>
                    <label><input type="radio" name="q12" value="b"> Location</label>
                    <label><input type="radio" name="q12" value="c"> Fireplace</label>
                    <label><input type="radio" name="q12" value="d"> Absence of a Pool</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 13: External Validity Analysis</h3>
                <div class="scenario">
                    <p>Below is data from four different studies of the same educational intervention conducted in different settings:</p>
                    <table style="width:100%; border-collapse:collapse; margin:15px 0; text-align:center;">
                        <thead style="background-color:#f4f4f4;">
                            <tr>
                                <th style="padding:10px; border:1px solid #ddd;">Study</th>
                                <th style="padding:10px; border:1px solid #ddd;">Location</th>
                                <th style="padding:10px; border:1px solid #ddd;">Population</th>
                                <th style="padding:10px; border:1px solid #ddd;">Sample Size</th>
                                <th style="padding:10px; border:1px solid #ddd;">Effect Size<br>(Std. Deviations)</th>
                                <th style="padding:10px; border:1px solid #ddd;">95% Confidence<br>Interval</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Study A</td>
                                <td style="padding:10px; border:1px solid #ddd;">Urban USA</td>
                                <td style="padding:10px; border:1px solid #ddd;">Low-income</td>
                                <td style="padding:10px; border:1px solid #ddd;">1,250</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.42</td>
                                <td style="padding:10px; border:1px solid #ddd;">[0.36, 0.48]</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Study B</td>
                                <td style="padding:10px; border:1px solid #ddd;">Rural USA</td>
                                <td style="padding:10px; border:1px solid #ddd;">Mixed income</td>
                                <td style="padding:10px; border:1px solid #ddd;">850</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.29</td>
                                <td style="padding:10px; border:1px solid #ddd;">[0.22, 0.36]</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Study C</td>
                                <td style="padding:10px; border:1px solid #ddd;">Urban Kenya</td>
                                <td style="padding:10px; border:1px solid #ddd;">Low-income</td>
                                <td style="padding:10px; border:1px solid #ddd;">1,100</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.68</td>
                                <td style="padding:10px; border:1px solid #ddd;">[0.61, 0.75]</td>
                            </tr>
                            <tr>
                                <td style="padding:10px; border:1px solid #ddd;">Study D</td>
                                <td style="padding:10px; border:1px solid #ddd;">Urban India</td>
                                <td style="padding:10px; border:1px solid #ddd;">Low-income</td>
                                <td style="padding:10px; border:1px solid #ddd;">950</td>
                                <td style="padding:10px; border:1px solid #ddd;">0.71</td>
                                <td style="padding:10px; border:1px solid #ddd;">[0.63, 0.79]</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>Based on this data, which conclusion about the external validity of this educational intervention is best supported?</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="a"> The intervention works consistently across all contexts with similar effect sizes</label>
                    <label><input type="radio" name="q13" value="b"> The intervention appears more effective in developing countries than in the United States</label>
                    <label><input type="radio" name="q13" value="c"> The intervention works best in urban settings regardless of country</label>
                    <label><input type="radio" name="q13" value="d"> The intervention has no statistically significant effect in rural settings</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 14: Synthetic Control Assumptions</h3>
                <div class="scenario">
                    <p>Below is a graph showing pre-treatment fit for a Synthetic Control Method analysis of a tax policy implemented in State A:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Pre-Treatment Fit: State A vs. Synthetic State A</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="100" y="270" text-anchor="middle">2016</text>
                        <text x="175" y="270" text-anchor="middle">2017</text>
                        <text x="250" y="270" text-anchor="middle">2018</text>
                        <text x="325" y="270" text-anchor="middle">2019</text>
                        <text x="400" y="270" text-anchor="middle">2020</text>
                        <text x="250" y="290" text-anchor="middle" font-weight="bold">Year</text>
                        
                        <!-- Treatment line -->
                        <line x1="400" y1="50" x2="400" y1="250" y2="250" stroke="#fa8072" stroke-width="2" stroke-dasharray="5,5" />
                        <text x="400" y="40" text-anchor="middle" font-size="12">Treatment</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0</text>
                        <text x="40" y="210" text-anchor="end">5</text>
                        <text x="40" y="170" text-anchor="end">10</text>
                        <text x="40" y="130" text-anchor="end">15</text>
                        <text x="40" y="90" text-anchor="end">20</text>
                        <text x="40" y="50" text-anchor="end">25</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Tax Revenue ($ Millions)</text>
                        
                        <!-- State A line -->
                        <polyline points="100,170 175,150 250,130 325,100 400,90" fill="none" stroke="#ff7f50" stroke-width="3" />
                        
                        <!-- Synthetic State A line -->
                        <polyline points="100,120 175,110 250,135 325,150 400,140" fill="none" stroke="#ffd700" stroke-width="3" />
                        
                        <!-- Data points -->
                        <circle cx="100" cy="170" r="5" fill="#ff7f50" />
                        <circle cx="175" cy="150" r="5" fill="#ff7f50" />
                        <circle cx="250" cy="130" r="5" fill="#ff7f50" />
                        <circle cx="325" cy="100" r="5" fill="#ff7f50" />
                        <circle cx="400" cy="90" r="5" fill="#ff7f50" />
                        
                        <circle cx="100" cy="120" r="5" fill="#ffd700" />
                        <circle cx="175" cy="110" r="5" fill="#ffd700" />
                        <circle cx="250" cy="135" r="5" fill="#ffd700" />
                        <circle cx="325" cy="150" r="5" fill="#ffd700" />
                        <circle cx="400" cy="140" r="5" fill="#ffd700" />
                        
                        <!-- Legend -->
                        <rect x="60" y="60" width="15" height="15" fill="#ff7f50" />
                        <text x="80" y="73" text-anchor="start" font-size="12">State A</text>
                        
                        <rect x="60" y="80" width="15" height="15" fill="#ffd700" />
                        <text x="80" y="93" text-anchor="start" font-size="12">Synthetic State A</text>
                    </svg>
                </div>
                <p>Based on this pre-treatment fit chart, which key assumption of the Synthetic Control Method is most likely violated in this analysis?</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="a"> The donor pool must contain at least 30 control units</label>
                    <label><input type="radio" name="q14" value="b"> The outcome variable must follow a normal distribution</label>
                    <label><input type="radio" name="q14" value="c"> The synthetic control must closely match the treated unit in the pre-treatment period</label>
                    <label><input type="radio" name="q14" value="d"> Treatment must be randomly assigned among potential control units</label>
                </div>
            </div>

            <!-- True/False Questions (3) -->
            <div class="question">
                <h3>Question 15: True/False</h3>
                <p>The Synthetic Control Method (SCM) requires a perfect pre-treatment fit between the treated unit and its synthetic counterpart.</p>
                <div class="true-false">
                    <label><input type="radio" name="q15" value="true"> True</label>
                    <label><input type="radio" name="q15" value="false"> False</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 16: True/False</h3>
                <p>The Average Treatment Effect (ATE) and the Treatment Effect on the Treated (TT) are always identical.</p>
                <div class="true-false">
                    <label><input type="radio" name="q16" value="true"> True</label>
                    <label><input type="radio" name="q16" value="false"> False</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 17: True/False</h3>
                <p>SHAP values always sum up to the difference between the model's prediction and the average prediction over the entire dataset.</p>
                <div class="true-false">
                    <label><input type="radio" name="q17" value="true"> True</label>
                    <label><input type="radio" name="q17" value="false"> False</label>
                </div>
            </div>

            <!-- Scenario-based Questions with CATE diagrams (3) -->
            <div class="question">
                <h3>Question 18: Scenario Question</h3>
                <div class="scenario">
                    <p>Consider a job training program that shows the following Conditional Average Treatment Effects (CATE) across different demographic groups:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">CATE for Job Training Program</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="100" y="270" text-anchor="middle">Under 25</text>
                        <text x="200" y="270" text-anchor="middle">25-40</text>
                        <text x="300" y="270" text-anchor="middle">41-55</text>
                        <text x="400" y="270" text-anchor="middle">Over 55</text>
                        <text x="250" y="290" text-anchor="middle" font-weight="bold">Age Group</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0%</text>
                        <text x="40" y="200" text-anchor="end">5%</text>
                        <text x="40" y="150" text-anchor="end">10%</text>
                        <text x="40" y="100" text-anchor="end">15%</text>
                        <text x="40" y="50" text-anchor="end">20%</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Income Increase</text>
                        
                        <!-- Bars -->
                        <rect x="75" y="130" width="50" height="120" fill="#ff7f50" />
                        <rect x="175" y="100" width="50" height="150" fill="#ffd700" />
                        <rect x="275" y="170" width="50" height="80" fill="#fa8072" />
                        <rect x="375" y="230" width="50" height="20" fill="#f4a460" />
                        
                        <!-- Values -->
                        <text x="100" y="125" text-anchor="middle" font-weight="bold">12%</text>
                        <text x="200" y="95" text-anchor="middle" font-weight="bold">15%</text>
                        <text x="300" y="165" text-anchor="middle" font-weight="bold">8%</text>
                        <text x="400" y="225" text-anchor="middle" font-weight="bold">2%</text>
                    </svg>
                </div>
                <p>Based on this CATE diagram, which of the following decisions would be most appropriate if resources are limited?</p>
                <div class="options">
                    <label><input type="radio" name="q18" value="a"> Target the program equally across all age groups</label>
                    <label><input type="radio" name="q18" value="b"> Focus resources primarily on the 25-40 age group, followed by under 25</label>
                    <label><input type="radio" name="q18" value="c"> Focus resources primarily on the over 55 age group as they need the most help</label>
                    <label><input type="radio" name="q18" value="d"> Cancel the program as the effects are too heterogeneous</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 19: Scenario Question</h3>
                <div class="scenario">
                    <p>A government implemented a tax credit for electric vehicles and wants to assess its impact on EV adoption rates. The CATE analysis shows:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">CATE for EV Tax Credit by Income Group</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="125" y="270" text-anchor="middle">Low Income</text>
                        <text x="250" y="270" text-anchor="middle">Middle Income</text>
                        <text x="375" y="270" text-anchor="middle">High Income</text>
                        <text x="250" y="290" text-anchor="middle" font-weight="bold">Income Group</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0%</text>
                        <text x="40" y="200" text-anchor="end">2%</text>
                        <text x="40" y="150" text-anchor="end">4%</text>
                        <text x="40" y="100" text-anchor="end">6%</text>
                        <text x="40" y="50" text-anchor="end">8%</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Increase in EV Adoption</text>
                        
                        <!-- Bars -->
                        <rect x="100" y="240" width="50" height="10" fill="#ff7f50" />
                        <rect x="225" y="170" width="50" height="80" fill="#ffd700" />
                        <rect x="350" y="70" width="50" height="180" fill="#fa8072" />
                        
                        <!-- Values -->
                        <text x="125" y="235" text-anchor="middle" font-weight="bold">0.5%</text>
                        <text x="250" y="165" text-anchor="middle" font-weight="bold">4%</text>
                        <text x="375" y="65" text-anchor="middle" font-weight="bold">7%</text>
                    </svg>
                </div>
                <p>Based on these CATEs, what can we conclude about the tax credit policy?</p>
                <div class="options">
                    <label><input type="radio" name="q19" value="a"> The policy is most effective for its intended purpose of increasing EV adoption</label>
                    <label><input type="radio" name="q19" value="b"> The policy disproportionately benefits high-income groups who would likely purchase EVs anyway</label>
                    <label><input type="radio" name="q19" value="c"> The policy shows uniform benefits across all income groups</label>
                    <label><input type="radio" name="q19" value="d"> The tax credit has no effect on EV adoption</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 21: Multiple Choice</h3>
                <p>In the context of counterfactual analysis, what does the statement "What would happen to house prices if every home had a fireplace?" represent?</p>
                <div class="options">
                    <label><input type="radio" name="q21" value="a"> A descriptive analysis of current market conditions</label>
                    <label><input type="radio" name="q21" value="b"> A predictive analysis of future market trends</label>
                    <label><input type="radio" name="q21" value="c"> A causal intervention analysis examining the impact of a hypothetical policy or change</label>
                    <label><input type="radio" name="q21" value="d"> A correlation study between fireplace presence and housing prices</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 22: Scenario Question</h3>
                <div class="scenario">
                    <p>A housing market analysis produced the following counterfactual visualization. The blue histogram shows the current distribution of house prices in a neighborhood, while the orange histogram shows the counterfactual distribution if every house without a fireplace had one installed:</p>
                    <svg class="cate-diagram" viewBox="0 0 500 300">
                        <rect x="0" y="0" width="500" height="300" fill="#f8f9fa" />
                        <!-- Title -->
                        <text x="250" y="30" text-anchor="middle" font-weight="bold" font-size="16">Actual vs. Counterfactual House Price Distribution</text>
                        
                        <!-- Axes -->
                        <line x1="50" y1="250" x2="450" y1="250" y2="250" stroke="black" stroke-width="2" />
                        <line x1="50" y1="50" x2="50" y1="250" y2="250" stroke="black" stroke-width="2" />
                        
                        <!-- X-axis labels -->
                        <text x="100" y="270" text-anchor="middle">$200k</text>
                        <text x="180" y="270" text-anchor="middle">$250k</text>
                        <text x="260" y="270" text-anchor="middle">$300k</text>
                        <text x="340" y="270" text-anchor="middle">$350k</text>
                        <text x="420" y="270" text-anchor="middle">$400k</text>
                        <text x="250" y="290" text-anchor="middle" font-weight="bold">House Price</text>
                        
                        <!-- Y-axis labels -->
                        <text x="40" y="250" text-anchor="end">0</text>
                        <text x="40" y="200" text-anchor="end">10</text>
                        <text x="40" y="150" text-anchor="end">20</text>
                        <text x="40" y="100" text-anchor="end">30</text>
                        <text x="40" y="50" text-anchor="end">40</text>
                        <text x="20" y="150" text-anchor="middle" font-weight="bold" transform="rotate(270,20,150)">Frequency</text>
                        
                        <!-- Current distribution (blue) -->
                        <rect x="70" y="230" width="20" height="20" fill="#3498db" opacity="0.7" />
                        <rect x="90" y="210" width="20" height="40" fill="#3498db" opacity="0.7" />
                        <rect x="110" y="180" width="20" height="70" fill="#3498db" opacity="0.7" />
                        <rect x="130" y="150" width="20" height="100" fill="#3498db" opacity="0.7" />
                        <rect x="150" y="130" width="20" height="120" fill="#3498db" opacity="0.7" />
                        <rect x="170" y="110" width="20" height="140" fill="#3498db" opacity="0.7" />
                        <rect x="190" y="100" width="20" height="150" fill="#3498db" opacity="0.7" />
                        <rect x="210" y="90" width="20" height="160" fill="#3498db" opacity="0.7" />
                        <rect x="230" y="110" width="20" height="140" fill="#3498db" opacity="0.7" />
                        <rect x="250" y="130" width="20" height="120" fill="#3498db" opacity="0.7" />
                        <rect x="270" y="150" width="20" height="100" fill="#3498db" opacity="0.7" />
                        <rect x="290" y="170" width="20" height="80" fill="#3498db" opacity="0.7" />
                        <rect x="310" y="190" width="20" height="60" fill="#3498db" opacity="0.7" />
                        <rect x="330" y="210" width="20" height="40" fill="#3498db" opacity="0.7" />
                        <rect x="350" y="220" width="20" height="30" fill="#3498db" opacity="0.7" />
                        <rect x="370" y="230" width="20" height="20" fill="#3498db" opacity="0.7" />
                        <rect x="390" y="240" width="20" height="10" fill="#3498db" opacity="0.7" />
                        <rect x="410" y="245" width="20" height="5" fill="#3498db" opacity="0.7" />
                        
                        <!-- Counterfactual distribution (orange) -->
                        <rect x="80" y="235" width="20" height="15" fill="#f39c12" opacity="0.7" />
                        <rect x="100" y="225" width="20" height="25" fill="#f39c12" opacity="0.7" />
                        <rect x="120" y="200" width="20" height="50" fill="#f39c12" opacity="0.7" />
                        <rect x="140" y="180" width="20" height="70" fill="#f39c12" opacity="0.7" />
                        <rect x="160" y="160" width="20" height="90" fill="#f39c12" opacity="0.7" />
                        <rect x="180" y="130" width="20" height="120" fill="#f39c12" opacity="0.7" />
                        <rect x="200" y="110" width="20" height="140" fill="#f39c12" opacity="0.7" />
                        <rect x="220" y="100" width="20" height="150" fill="#f39c12" opacity="0.7" />
                        <rect x="240" y="95" width="20" height="155" fill="#f39c12" opacity="0.7" />
                        <rect x="260" y="110" width="20" height="140" fill="#f39c12" opacity="0.7" />
                        <rect x="280" y="120" width="20" height="130" fill="#f39c12" opacity="0.7" />
                        <rect x="300" y="140" width="20" height="110" fill="#f39c12" opacity="0.7" />
                        <rect x="320" y="160" width="20" height="90" fill="#f39c12" opacity="0.7" />
                        <rect x="340" y="180" width="20" height="70" fill="#f39c12" opacity="0.7" />
                        <rect x="360" y="190" width="20" height="60" fill="#f39c12" opacity="0.7" />
                        <rect x="380" y="210" width="20" height="40" fill="#f39c12" opacity="0.7" />
                        <rect x="400" y="225" width="20" height="25" fill="#f39c12" opacity="0.7" />
                        <rect x="420" y="235" width="20" height="15" fill="#f39c12" opacity="0.7" />
                        
                        <!-- Legend -->
                        <rect x="60" y="30" width="15" height="15" fill="#3498db" opacity="0.7" />
                        <text x="80" y="43" text-anchor="start" font-size="12">Current Distribution</text>
                        <rect x="60" y="50" width="15" height="15" fill="#f39c12" opacity="0.7" />
                        <text x="80" y="63" text-anchor="start" font-size="12">Counterfactual (All Houses with Fireplaces)</text>
                    </svg>
                </div>
                <p>Based on this counterfactual analysis, which of the following conclusions is most accurate?</p>
                <div class="options">
                    <label><input type="radio" name="q22" value="a"> Adding fireplaces would have no significant effect on the housing market</label>
                    <label><input type="radio" name="q22" value="b"> Adding fireplaces would primarily benefit lower-priced homes</label>
                    <label><input type="radio" name="q22" value="c"> Adding fireplaces would shift the entire distribution upward, with the median price increasing by approximately $20,000</label>
                    <label><input type="radio" name="q22" value="d"> Adding fireplaces would decrease the number of affordable homes in the market</label>
                </div>
            </div>
            
            <button type="submit" id="submit-btn">Submit Quiz</button>
        </form>
        
        <div id="results">
            <h2>Quiz Results</h2>
            <p>Your score: <span id="score">0/20</span></p>
            <div class="feedback" id="feedback"></div>
        </div>
    </div>

    <script>
        // Initialize timer variables
        let timeLeft = 25 * 60; // 15 minutes in seconds
        let timerInterval;
        
        // Function to format time as MM:SS
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }
        
        // Function to update the timer display
        function updateTimer() {
            const timerElement = document.getElementById('timer');
            const timerContainer = document.getElementById('timer-container');
            
            timeLeft--;
            
            // Update the timer text
            timerElement.textContent = formatTime(timeLeft);
            
            // Add warning colors as time gets low
            if (timeLeft <= 60) { // Last minute
                timerElement.className = 'timer danger';
                timerContainer.style.backgroundColor = '#fef2f2';
            } else if (timeLeft <= 180) { // Last 3 minutes
                timerElement.className = 'timer warning';
                timerContainer.style.backgroundColor = '#fef9e7';
            }
            
            // Auto-submit when time is up
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                document.getElementById('quiz-form').dispatchEvent(new Event('submit'));
            }
        }
        
        // Start the timer when the page loads
        window.onload = function() {
            timerInterval = setInterval(updateTimer, 1000);
        };
        
        document.getElementById('quiz-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Clear the timer interval when the quiz is submitted
            clearInterval(timerInterval);
            
            // Define correct answers
            const correctAnswers = {
                q1: 'b', q2: 'b', q3: 'b', q4: 'a', q5: 'b',
                q6: 'b', q7: 'b', q8: 'b', q9: 'b', q10: 'b',
                q11: 'a', q12: 'b', q13: 'a', q14: 'c',
                q15: 'false', q16: 'false', q17: 'true',
                q18: 'b', q19: 'b', q20: 'd', q21: 'c', q22: 'c'
            };
            
            // Calculate score
            let score = 0;
            let formData = new FormData(this);
            let formObject = {};
            
            formData.forEach(function(value, key) {
                formObject[key] = value;
                if (key in correctAnswers && value === correctAnswers[key]) {
                    score++;
                }
            });
            
            // Display results
            document.getElementById('score').textContent = score + '/20';
            
            let feedback = '';
            if (score >= 18) {
                feedback = 'Excellent! You have a strong understanding of causal inference concepts.';
            } else if (score >= 14) {
                feedback = 'Good job! You understand most of the key concepts, but might want to review a few areas.';
            } else if (score >= 10) {
                feedback = 'You have a basic understanding of the concepts, but should review the material more thoroughly.';
            } else {
                feedback = 'You should revisit the key concepts and study them more carefully.';
            }
            
            document.getElementById('feedback').textContent = feedback;
            document.getElementById('results').style.display = 'block';
            
            // Hide the timer
            document.getElementById('timer-container').style.display = 'none';
            
            // Prepare data for emailing
            const studentName = document.getElementById('student-name').value;
            const studentId = document.getElementById('student-id').value;
            
            // In a real implementation, you would send this data to a server
            // For this example, we'll just log to console
            console.log({
                student: {
                    name: studentName,
                    id: studentId
                },
                score: score,
                answers: formObject,
                timeSpent: (15 * 60) - timeLeft // Seconds spent on the quiz
            });
            
            // This is where you would normally send the data to the server to email
            // Since we can't actually send emails from client-side JS, we'll just show a message
            alert(`Thank you for submitting your quiz, ${studentName}!\nYour score: ${score}/20\nA copy of your results would be sent to kimthanh.vu@kbs.edu.au in a real implementation.`);
        });
    </script>
</body>
</html>