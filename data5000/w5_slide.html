<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 5: Causal ML & Meta-Learners - DATA5000</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:wght@400;600;700&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-red: #C41E3A;
            --dark-red: #8B0000;
            --text-dark: #1a1a1a;
            --text-medium: #444444;
            --text-light: #666666;
            --bg-white: #ffffff;
            --bg-light: #f8f9fa;
            --accent-blue: #2563eb;
            --accent-green: #059669;
            --accent-orange: #d97706;
            --border-light: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--bg-white);
            color: var(--text-dark);
            line-height: 1.6;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 40px 60px;
            background: var(--bg-white);
            position: absolute;
            top: 0;
            left: 0;
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
        }

        /* Typography */
        h1 {
            font-family: 'Source Serif 4', serif;
            font-size: 2.8em;
            font-weight: 700;
            color: var(--primary-red);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        h2 {
            font-family: 'Source Serif 4', serif;
            font-size: 2.2em;
            font-weight: 600;
            color: var(--primary-red);
            margin-bottom: 25px;
            line-height: 1.3;
        }

        h3 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.4em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 15px;
        }

        h4 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.15em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        p {
            font-size: 1.15em;
            color: var(--text-medium);
            margin-bottom: 15px;
        }

        /* Title Slide */
        .title-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .title-slide h1 {
            font-size: 3.2em;
            margin-bottom: 10px;
        }

        .title-slide .subtitle {
            font-size: 1.6em;
            color: var(--text-medium);
            margin-bottom: 30px;
        }

        .title-slide .course-info {
            font-size: 1.2em;
            color: var(--text-light);
        }

        /* Content Layouts */
        .content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 20px;
        }

        .three-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        /* Content Boxes */
        .concept-box {
            background: var(--bg-light);
            border-left: 4px solid var(--primary-red);
            padding: 20px 25px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .definition-box {
            background: linear-gradient(135deg, #fef3f3 0%, #fff 100%);
            border: 1px solid #fecaca;
            padding: 20px 25px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .example-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            padding: 20px 25px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .insight-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            padding: 20px 25px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .warning-box {
            background: #fffbeb;
            border: 1px solid #fde68a;
            padding: 20px 25px;
            margin: 15px 0;
            border-radius: 8px;
        }

        /* Data Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 1em;
        }

        .data-table th {
            background: var(--primary-red);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-light);
        }

        .data-table tr:nth-child(even) {
            background: var(--bg-light);
        }

        .data-table tr:hover {
            background: #fef3f3;
        }

        /* Visualizations */
        .chart-container {
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .bar-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .bar-label {
            width: 150px;
            font-size: 0.95em;
            text-align: right;
            color: var(--text-medium);
        }

        .bar-track {
            flex: 1;
            height: 28px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            padding-left: 10px;
            color: white;
            font-weight: 600;
            font-size: 0.9em;
        }

        .bar-positive {
            background: linear-gradient(90deg, var(--accent-green), #34d399);
        }

        .bar-negative {
            background: linear-gradient(90deg, var(--primary-red), #f87171);
        }

        .bar-neutral {
            background: linear-gradient(90deg, var(--accent-blue), #60a5fa);
        }

        /* Tree Diagram */
        .tree-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .tree-node {
            background: var(--bg-light);
            border: 2px solid var(--border-light);
            border-radius: 8px;
            padding: 12px 20px;
            text-align: center;
            margin: 5px;
            min-width: 140px;
            font-size: 0.9em;
        }

        .tree-node.root {
            background: var(--primary-red);
            color: white;
            border-color: var(--dark-red);
        }

        .tree-node.positive {
            background: #dcfce7;
            border-color: var(--accent-green);
        }

        .tree-node.negative {
            background: #fee2e2;
            border-color: var(--primary-red);
        }

        .tree-level {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
        }

        .tree-connector {
            width: 2px;
            height: 30px;
            background: var(--border-light);
            margin: 0 auto;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .flow-box {
            background: var(--bg-light);
            border: 2px solid var(--border-light);
            border-radius: 8px;
            padding: 15px 25px;
            text-align: center;
            min-width: 150px;
        }

        .flow-box.highlight {
            background: var(--primary-red);
            color: white;
            border-color: var(--dark-red);
        }

        .flow-arrow {
            font-size: 1.5em;
            color: var(--text-light);
        }

        /* Timeline */
        .timeline {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--border-light);
        }

        .timeline-item {
            text-align: center;
            position: relative;
            flex: 1;
            padding: 0 10px;
        }

        .timeline-marker {
            width: 50px;
            height: 50px;
            background: var(--bg-white);
            border: 3px solid var(--primary-red);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary-red);
            position: relative;
            z-index: 1;
        }

        .timeline-item.active .timeline-marker {
            background: var(--primary-red);
            color: white;
        }

        /* Quiz Styles */
        .quiz-container {
            background: linear-gradient(135deg, #fef3f3 0%, #fff 100%);
            border: 2px solid var(--primary-red);
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 25px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: var(--bg-white);
            border: 2px solid var(--border-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-red);
            background: #fef7f7;
        }

        .quiz-option.selected {
            border-color: var(--accent-blue);
            background: #eff6ff;
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: #f0fdf4;
        }

        .quiz-option.incorrect {
            border-color: var(--primary-red);
            background: #fef2f2;
        }

        .option-letter {
            width: 32px;
            height: 32px;
            background: var(--bg-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #f0fdf4;
            border: 1px solid var(--accent-green);
            color: #166534;
        }

        .quiz-feedback.incorrect {
            background: #fef2f2;
            border: 1px solid var(--primary-red);
            color: var(--dark-red);
        }

        .quiz-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background: var(--primary-red);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .quiz-btn:hover {
            background: var(--dark-red);
        }

        /* Comparison Diagram */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: start;
            margin: 25px 0;
        }

        .comparison-side {
            padding: 25px;
            border-radius: 12px;
        }

        .comparison-side.left {
            background: #fef2f2;
            border: 2px solid #fecaca;
        }

        .comparison-side.right {
            background: #f0fdf4;
            border: 2px solid #bbf7d0;
        }

        .comparison-divider {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }

        .vs-badge {
            background: var(--text-dark);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
        }

        /* Roadmap */
        .roadmap-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .roadmap-item {
            background: var(--bg-light);
            border: 2px solid var(--border-light);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .roadmap-item.current {
            background: var(--primary-red);
            color: white;
            border-color: var(--dark-red);
            transform: scale(1.05);
        }

        .roadmap-item.assessment {
            background: #fef3f3;
            border-color: var(--primary-red);
        }

        .roadmap-week {
            font-weight: 700;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .roadmap-topic {
            font-size: 0.85em;
            color: var(--text-medium);
        }

        .roadmap-item.current .roadmap-topic {
            color: rgba(255,255,255,0.9);
        }

        /* Histogram */
        .histogram-container {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 4px;
            height: 200px;
            padding: 20px;
            border-bottom: 2px solid var(--border-light);
            margin-bottom: 10px;
        }

        .histogram-bar {
            width: 40px;
            background: var(--accent-blue);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            position: relative;
        }

        .histogram-bar.treatment {
            background: var(--accent-green);
        }

        .histogram-bar.control {
            background: var(--accent-orange);
        }

        .histogram-labels {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }

        .histogram-legend {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        /* Navigation */
        .slide-counter {
            position: fixed;
            top: 20px;
            right: 25px;
            font-size: 1em;
            color: var(--text-light);
            background: var(--bg-white);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid var(--border-light);
            z-index: 100;
        }

        .navigation {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .nav-btn {
            padding: 12px 25px;
            background: var(--bg-white);
            border: 2px solid var(--primary-red);
            color: var(--primary-red);
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--primary-red);
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Logo */
        .kaplan-logo {
            position: fixed;
            bottom: 25px;
            right: 25px;
            font-weight: 700;
            font-size: 0.9em;
            color: var(--text-light);
            letter-spacing: 2px;
        }

        /* Lists */
        ul, ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        li {
            margin-bottom: 10px;
            font-size: 1.1em;
            color: var(--text-medium);
        }

        /* Strong text */
        strong {
            color: var(--text-dark);
            font-weight: 600;
        }

        /* Code */
        code {
            background: var(--bg-light);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            font-size: 0.95em;
        }

        /* Metric Cards */
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary-red);
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 1em;
            color: var(--text-medium);
        }

        /* Annotations */
        .annotation {
            font-size: 0.9em;
            color: var(--text-light);
            font-style: italic;
            margin-top: 10px;
        }

        /* Formula Box */
        .formula-box {
            background: var(--bg-light);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 20px 30px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.3em;
            font-family: 'Times New Roman', serif;
        }

        /* Step indicator */
        .step-indicator {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .step-number {
            width: 35px;
            height: 35px;
            background: var(--primary-red);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        /* Insight highlight */
        .insight-highlight {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: #fffbeb;
            border-radius: 8px;
            margin: 15px 0;
        }

        .insight-icon {
            font-size: 1.5em;
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide.active .animate-in {
            animation: fadeInUp 0.5s ease forwards;
        }

        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }
        .delay-4 { animation-delay: 0.4s; opacity: 0; }
    </style>
</head>
<body>
    <div class="presentation-container">
        <div class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">36</span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide title-slide active">
            <h1>Week 5: Causal ML & Meta-Learners</h1>
            <p class="subtitle">From Prediction to Prescription: What Should We Do?</p>
            <p class="course-info">DATA5000 — Artificial Intelligence Programming in Business Analytics</p>
            <p class="course-info" style="margin-top: 30px; color: var(--text-light);">Kaplan Business School</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h2>Learning Objectives</h2>
            <div class="content-wrapper">
                <p>By the end of this workshop, you will be able to:</p>
                <div class="concept-box animate-in delay-1">
                    <h4>1. Distinguish Treatment Effects</h4>
                    <p>Understand and apply ATE, HTE, CATE, and LATE in business contexts</p>
                </div>
                <div class="concept-box animate-in delay-2">
                    <h4>2. Apply Synthetic Control Methods</h4>
                    <p>Evaluate treatment effects when no natural control group exists</p>
                </div>
                <div class="concept-box animate-in delay-3">
                    <h4>3. Conduct Causal Analysis</h4>
                    <p>Move from SHAP feature importance to actionable causal factors</p>
                </div>
                <div class="concept-box animate-in delay-4">
                    <h4>4. Perform Policy Analysis</h4>
                    <p>Make data-driven business decisions considering costs and heterogeneous effects</p>
                </div>
            </div>
        </div>

        <!-- Slide 3: Roadmap -->
        <div class="slide">
            <h2>DATA5000 Roadmap</h2>
            <div class="content-wrapper">
                <div class="roadmap-grid">
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 1</div>
                        <div class="roadmap-topic">AI with Python</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 2</div>
                        <div class="roadmap-topic">AI Predictive Models</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 3</div>
                        <div class="roadmap-topic">Deep Learning</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 4</div>
                        <div class="roadmap-topic">Causal AI</div>
                    </div>
                    <div class="roadmap-item current">
                        <div class="roadmap-week">Week 5</div>
                        <div class="roadmap-topic">Causal ML & Meta-Learners</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 6</div>
                        <div class="roadmap-topic">Causal Forests</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 7</div>
                        <div class="roadmap-topic">Generative AI</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 8</div>
                        <div class="roadmap-topic">Image & Video AI</div>
                    </div>
                    <div class="roadmap-item assessment">
                        <div class="roadmap-week">Week 9</div>
                        <div class="roadmap-topic">A2: GenAI Startup (35%)</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 10</div>
                        <div class="roadmap-topic">Deep Learning Causal</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 11</div>
                        <div class="roadmap-topic">GenAI Forecasting</div>
                    </div>
                    <div class="roadmap-item">
                        <div class="roadmap-week">Week 12</div>
                        <div class="roadmap-topic">GenAI & Causal</div>
                    </div>
                </div>
                <div class="insight-box" style="margin-top: 20px;">
                    <strong>Today's Focus:</strong> Building on Week 4's treatment effects, we apply causal methods to real datasets and learn to make data-driven policy recommendations.
                </div>
            </div>
        </div>

        <!-- Slide 4: Bridge from Week 4 -->
        <div class="slide">
            <h2>From Week 4 to Week 5</h2>
            <div class="content-wrapper">
                <p>Last week, we explored SHAP values and introduced treatment effects. Today, we put these concepts into practice.</p>
                <div class="comparison-container">
                    <div class="comparison-side left">
                        <h4 style="color: var(--primary-red);">Week 4: Understanding</h4>
                        <ul>
                            <li>SHAP values explain model predictions</li>
                            <li>Introduced ATE, HTE, CATE, LATE</li>
                            <li>Boston Housing example</li>
                            <li>Identified confounders</li>
                        </ul>
                        <p style="font-weight: 600; margin-top: 15px;">Key Question: "What factors are associated with outcomes?"</p>
                    </div>
                    <div class="comparison-divider">
                        <div class="vs-badge">→</div>
                    </div>
                    <div class="comparison-side right">
                        <h4 style="color: var(--accent-green);">Week 5: Action</h4>
                        <ul>
                            <li>Apply treatment effects to real decisions</li>
                            <li>Synthetic Control Method</li>
                            <li>Ames Housing case study</li>
                            <li>Policy analysis with costs</li>
                        </ul>
                        <p style="font-weight: 600; margin-top: 15px;">Key Question: "What should we DO about it?"</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 5: The Business Problem -->
        <div class="slide">
            <h2>The Fundamental Business Problem</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>Knowing vs. Acting</h3>
                    <p>Machine learning models tell us <strong>what features matter</strong> for predictions. But business decisions require knowing <strong>what actions will change outcomes</strong>.</p>
                </div>
                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h4>SHAP Tells Us:</h4>
                        <div class="chart-container">
                            <div class="bar-chart">
                                <div class="bar-item">
                                    <span class="bar-label">Overall Quality</span>
                                    <div class="bar-track">
                                        <div class="bar-fill bar-positive" style="width: 85%;">+$24,500</div>
                                    </div>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Living Area</span>
                                    <div class="bar-track">
                                        <div class="bar-fill bar-positive" style="width: 70%;">+$18,200</div>
                                    </div>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Garage Cars</span>
                                    <div class="bar-track">
                                        <div class="bar-fill bar-positive" style="width: 45%;">+$8,400</div>
                                    </div>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Fireplace</span>
                                    <div class="bar-track">
                                        <div class="bar-fill bar-positive" style="width: 30%;">+$4,400</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="annotation">These are correlations — features associated with higher prices</p>
                    </div>
                    <div>
                        <h4>But Should We:</h4>
                        <ul style="font-size: 1.1em; line-height: 1.8;">
                            <li>Improve overall quality? <strong>(At what cost?)</strong></li>
                            <li>Expand living area? <strong>(For which houses?)</strong></li>
                            <li>Build bigger garages? <strong>(Where?)</strong></li>
                            <li>Add fireplaces? <strong>(Will it pay off?)</strong></li>
                        </ul>
                        <div class="warning-box" style="margin-top: 20px;">
                            <strong>The Gap:</strong> Correlation ≠ Actionable insight
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 6: Analytics Framework -->
        <div class="slide">
            <h2>The Four Levels of Business Analytics</h2>
            <div class="content-wrapper">
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-marker">1</div>
                        <h4>Descriptive</h4>
                        <p style="font-size: 0.95em;">What happened?</p>
                        <p style="font-size: 0.85em; color: var(--text-light);">Dashboards, Reports</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-marker">2</div>
                        <h4>Diagnostic</h4>
                        <p style="font-size: 0.95em;">Why did it happen?</p>
                        <p style="font-size: 0.85em; color: var(--text-light);">Root cause analysis</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-marker">3</div>
                        <h4>Predictive</h4>
                        <p style="font-size: 0.95em;">What will happen?</p>
                        <p style="font-size: 0.85em; color: var(--text-light);">ML models, SHAP</p>
                    </div>
                    <div class="timeline-item active">
                        <div class="timeline-marker">4</div>
                        <h4>Prescriptive</h4>
                        <p style="font-size: 0.95em;">What should we do?</p>
                        <p style="font-size: 0.85em; color: var(--text-light);">Causal ML, Policy</p>
                    </div>
                </div>
                <div class="insight-box" style="margin-top: 40px;">
                    <strong>Today's Focus:</strong> Moving from Level 3 (predictive) to Level 4 (prescriptive) analytics. We use causal machine learning to answer: "If we take action X, what will be the impact on outcome Y?"
                </div>
            </div>
        </div>

        <!-- Slide 7: Treatment Effects Overview -->
        <div class="slide">
            <h2>Types of Treatment Effects: A Business Framework</h2>
            <div class="content-wrapper">
                <p>Treatment effects help us measure the <strong>causal impact</strong> of an intervention. Each type answers a different business question.</p>
                <div class="two-column" style="margin-top: 20px;">
                    <div class="concept-box">
                        <h4 style="color: var(--primary-red);">Average Treatment Effect (ATE)</h4>
                        <p><strong>Business Question:</strong> "Does this work on average across everyone?"</p>
                        <div class="example-box" style="margin-top: 10px;">
                            <strong>Example:</strong> "Do loyalty programs increase customer spending across all customers?"
                        </div>
                        <p class="annotation">Think: Mass influence, population-wide impact</p>
                    </div>
                    <div class="concept-box">
                        <h4 style="color: var(--primary-red);">Heterogeneous Treatment Effect (HTE)</h4>
                        <p><strong>Business Question:</strong> "Does it work differently for different groups?"</p>
                        <div class="example-box" style="margin-top: 10px;">
                            <strong>Example:</strong> "Do premium customers respond differently to discounts than budget customers?"
                        </div>
                        <p class="annotation">Think: Segmentation, varying responses</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Treatment Effects Continued -->
        <div class="slide">
            <h2>Types of Treatment Effects (Continued)</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div class="concept-box">
                        <h4 style="color: var(--primary-red);">Conditional Average Treatment Effect (CATE)</h4>
                        <p><strong>Business Question:</strong> "What's the effect for THIS specific segment?"</p>
                        <div class="example-box" style="margin-top: 10px;">
                            <strong>Example:</strong> "What's the impact of free shipping for female customers aged 25-34 in urban areas?"
                        </div>
                        <p class="annotation">Think: Personalisation, targeted intervention</p>
                    </div>
                    <div class="concept-box">
                        <h4 style="color: var(--primary-red);">Local Average Treatment Effect (LATE)</h4>
                        <p><strong>Business Question:</strong> "What's the effect for those who actually respond to the intervention?"</p>
                        <div class="example-box" style="margin-top: 10px;">
                            <strong>Example:</strong> "What's the effect of a training program for employees who actually attended?"
                        </div>
                        <p class="annotation">Think: Complier effects, realistic impact</p>
                    </div>
                </div>
                <div class="definition-box" style="margin-top: 25px;">
                    <h4>Key Insight</h4>
                    <p>These aren't just academic distinctions — they determine <strong>how you design interventions</strong> and <strong>who you target</strong> for maximum business impact.</p>
                </div>
            </div>
        </div>

        <!-- Slide 9: Treatment Effects Summary Table -->
        <div class="slide">
            <h2>Treatment Effects: Quick Reference</h2>
            <div class="content-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Effect Type</th>
                            <th>Measures</th>
                            <th>Business Application</th>
                            <th>Use When</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ATE</strong></td>
                            <td>Average impact across entire population</td>
                            <td>Company-wide policy decisions</td>
                            <td>Launching new products/services for all customers</td>
                        </tr>
                        <tr>
                            <td><strong>HTE</strong></td>
                            <td>Variation in effects across subgroups</td>
                            <td>Market segmentation strategy</td>
                            <td>Understanding why results vary across customer types</td>
                        </tr>
                        <tr>
                            <td><strong>CATE</strong></td>
                            <td>Effect for specific defined segments</td>
                            <td>Personalised marketing campaigns</td>
                            <td>Tailoring offers to specific demographics</td>
                        </tr>
                        <tr>
                            <td><strong>LATE</strong></td>
                            <td>Effect for those affected by instrument</td>
                            <td>Evaluating opt-in programs</td>
                            <td>Training programs, incentive schemes</td>
                        </tr>
                    </tbody>
                </table>
                <div class="insight-box" style="margin-top: 20px;">
                    <strong>Remember:</strong> Start with ATE for overall feasibility, then explore HTE/CATE for targeting optimization.
                </div>
            </div>
        </div>

        <!-- Slide 10: Quiz 1 -->
        <div class="slide">
            <h2>Knowledge Check: Treatment Effects</h2>
            <div class="content-wrapper">
                <div class="quiz-container">
                    <p class="quiz-question">A retail company wants to know if their new loyalty program increases spending, but the effect might be different for premium vs. regular customers. Which treatment effect should they examine first?</p>
                    <div class="quiz-options" id="quiz1-options">
                        <div class="quiz-option" data-answer="a" onclick="selectOption(1, this)">
                            <span class="option-letter">A</span>
                            <span>LATE — to see who actually joined the program</span>
                        </div>
                        <div class="quiz-option" data-answer="b" onclick="selectOption(1, this)">
                            <span class="option-letter">B</span>
                            <span>ATE first to see overall impact, then HTE to examine segment differences</span>
                        </div>
                        <div class="quiz-option" data-answer="c" onclick="selectOption(1, this)">
                            <span class="option-letter">C</span>
                            <span>CATE — targeting only premium customers</span>
                        </div>
                        <div class="quiz-option" data-answer="d" onclick="selectOption(1, this)">
                            <span class="option-letter">D</span>
                            <span>Only use SHAP values since they show feature importance</span>
                        </div>
                    </div>
                    <button class="quiz-btn" onclick="checkAnswer(1, 'b')">Check Answer</button>
                    <div class="quiz-feedback" id="feedback-1">
                        <strong>Correct!</strong> Start with ATE to understand overall program effectiveness, then use HTE to uncover whether premium and regular customers respond differently. This informs whether to personalize the program.
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 11: Introducing SCM -->
        <div class="slide">
            <h2>Synthetic Control Method: The Problem</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>The Challenge of Policy Evaluation</h3>
                    <p>How do you measure the effect of a policy when you can't run a randomised experiment?</p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Business Scenarios:</h4>
                        <ul>
                            <li>New tax implemented in one state — what's the economic impact?</li>
                            <li>Marketing campaign launched in Sydney — did sales actually increase?</li>
                            <li>New workplace policy in one division — did productivity change?</li>
                            <li>Price change in one region — what happened to demand?</li>
                        </ul>
                    </div>
                    <div>
                        <h4>The Fundamental Problem:</h4>
                        <div class="warning-box">
                            <p><strong>No Control Group:</strong> We can't observe what would have happened without the intervention.</p>
                            <p style="margin-top: 10px;"><strong>The Counterfactual:</strong> We need to estimate the "parallel universe" where the policy wasn't implemented.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 12: SCM Solution -->
        <div class="slide">
            <h2>Synthetic Control Method: The Solution</h2>
            <div class="content-wrapper">
                <div class="insight-box">
                    <h4>Key Idea</h4>
                    <p>Create a "synthetic" version of the treated unit using a <strong>weighted combination of untreated units</strong> that closely matches the treated unit's pre-intervention characteristics.</p>
                </div>
                <div class="flow-diagram" style="margin-top: 30px;">
                    <div class="flow-box">
                        <strong>Treated Unit</strong><br>
                        <span style="font-size: 0.9em;">California</span>
                    </div>
                    <span class="flow-arrow">←</span>
                    <div class="flow-box highlight">
                        <strong>Synthetic Control</strong><br>
                        <span style="font-size: 0.9em;">Weighted Average</span>
                    </div>
                    <span class="flow-arrow">←</span>
                    <div class="flow-box">
                        <strong>Donor Pool</strong><br>
                        <span style="font-size: 0.9em;">Other States</span>
                    </div>
                </div>
                <div class="formula-box" style="margin-top: 30px;">
                    Synthetic California = (0.3 × Nevada) + (0.25 × Colorado) + (0.2 × Utah) + ...
                </div>
                <p style="text-align: center; margin-top: 15px;">The weights are chosen so the synthetic version matches California's pre-1988 trends as closely as possible.</p>
            </div>
        </div>

        <!-- Slide 13: SCM Case Study -->
        <div class="slide">
            <h2>Case Study: California Proposition 99</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div>
                        <h4>Background</h4>
                        <p>In 1988, California implemented <strong>Proposition 99</strong>, a comprehensive tobacco control program including:</p>
                        <ul>
                            <li>$0.25 per pack cigarette tax increase</li>
                            <li>Anti-smoking media campaigns</li>
                            <li>School-based prevention programs</li>
                            <li>Healthcare services for tobacco-related illnesses</li>
                        </ul>
                        <div class="concept-box" style="margin-top: 15px;">
                            <strong>Research Question:</strong> Did Proposition 99 actually reduce cigarette consumption in California?
                        </div>
                    </div>
                    <div>
                        <h4>The Challenge</h4>
                        <div class="warning-box">
                            <p><strong>No Perfect Control:</strong> No other state is exactly like California</p>
                            <p style="margin-top: 10px;"><strong>National Trends:</strong> Smoking was declining everywhere — how much was due to Prop 99?</p>
                        </div>
                        <h4 style="margin-top: 20px;">The Solution</h4>
                        <p>Create "Synthetic California" from a weighted average of other states that had similar smoking patterns before 1988.</p>
                        <p class="annotation">Source: Abadie, Diamond & Hainmueller (2010), JASA</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 14: SCM Results Visualization -->
        <div class="slide">
            <h2>SCM Results: Proposition 99 Impact</h2>
            <div class="content-wrapper">
                <div class="chart-container">
                    <h4 style="text-align: center; margin-bottom: 20px;">Cigarette Sales: California vs. Synthetic California</h4>
                    <svg viewBox="0 0 700 300" style="width: 100%; max-width: 700px; margin: 0 auto; display: block;">
                        <!-- Grid lines -->
                        <line x1="80" y1="250" x2="650" y2="250" stroke="#e5e7eb" stroke-width="1"/>
                        <line x1="80" y1="200" x2="650" y2="200" stroke="#e5e7eb" stroke-width="1"/>
                        <line x1="80" y1="150" x2="650" y2="150" stroke="#e5e7eb" stroke-width="1"/>
                        <line x1="80" y1="100" x2="650" y2="100" stroke="#e5e7eb" stroke-width="1"/>
                        <line x1="80" y1="50" x2="650" y2="50" stroke="#e5e7eb" stroke-width="1"/>
                        
                        <!-- Y-axis labels -->
                        <text x="70" y="255" text-anchor="end" font-size="12" fill="#666">40</text>
                        <text x="70" y="205" text-anchor="end" font-size="12" fill="#666">60</text>
                        <text x="70" y="155" text-anchor="end" font-size="12" fill="#666">80</text>
                        <text x="70" y="105" text-anchor="end" font-size="12" fill="#666">100</text>
                        <text x="70" y="55" text-anchor="end" font-size="12" fill="#666">120</text>
                        
                        <!-- X-axis labels -->
                        <text x="100" y="275" text-anchor="middle" font-size="12" fill="#666">1970</text>
                        <text x="240" y="275" text-anchor="middle" font-size="12" fill="#666">1980</text>
                        <text x="350" y="275" text-anchor="middle" font-size="12" fill="#666">1988</text>
                        <text x="480" y="275" text-anchor="middle" font-size="12" fill="#666">1995</text>
                        <text x="620" y="275" text-anchor="middle" font-size="12" fill="#666">2000</text>
                        
                        <!-- Intervention line -->
                        <line x1="350" y1="40" x2="350" y2="260" stroke="#C41E3A" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="350" y="30" text-anchor="middle" font-size="11" fill="#C41E3A" font-weight="600">Prop 99</text>
                        
                        <!-- Synthetic California (dashed) -->
                        <path d="M100,70 L170,80 L240,100 L310,120 L350,135 L420,150 L490,165 L560,180 L620,190" 
                              fill="none" stroke="#f97316" stroke-width="3" stroke-dasharray="8,4"/>
                        
                        <!-- Actual California (solid) -->
                        <path d="M100,70 L170,80 L240,100 L310,120 L350,135 L420,170 L490,200 L560,215 L620,230" 
                              fill="none" stroke="#2563eb" stroke-width="3"/>
                        
                        <!-- Gap annotation -->
                        <line x1="620" y1="190" x2="620" y2="230" stroke="#059669" stroke-width="2"/>
                        <text x="635" y="215" font-size="12" fill="#059669" font-weight="600">Gap</text>
                        
                        <!-- Legend -->
                        <line x1="450" y1="20" x2="480" y2="20" stroke="#2563eb" stroke-width="3"/>
                        <text x="485" y="24" font-size="11" fill="#444">California (Actual)</text>
                        <line x1="450" y1="38" x2="480" y2="38" stroke="#f97316" stroke-width="3" stroke-dasharray="8,4"/>
                        <text x="485" y="42" font-size="11" fill="#444">Synthetic California</text>
                    </svg>
                    <p style="text-align: center; font-size: 0.95em; color: var(--text-light); margin-top: 10px;">Per capita cigarette sales (packs per year)</p>
                </div>
                <div class="metric-cards" style="margin-top: 20px;">
                    <div class="metric-card">
                        <div class="metric-value">-26</div>
                        <div class="metric-label">Packs per capita reduction by 2000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">~20%</div>
                        <div class="metric-label">Reduction in cigarette sales</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">Causal</div>
                        <div class="metric-label">Effect attributed to Prop 99</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 15: SCM Interpretation -->
        <div class="slide">
            <h2>Interpreting SCM Results</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div>
                        <h4>What the Results Tell Us</h4>
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span><strong>Pre-intervention Period:</strong> California and Synthetic California track closely (good match)</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span><strong>Post-intervention:</strong> Gap emerges between actual and synthetic</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span><strong>Treatment Effect:</strong> The gap represents the causal impact</span>
                        </div>
                        <div class="concept-box" style="margin-top: 20px;">
                            <strong>Key Finding:</strong> By 2000, California had approximately 26 fewer packs per capita than it would have without Proposition 99.
                        </div>
                    </div>
                    <div>
                        <h4>Business Implications</h4>
                        <div class="example-box">
                            <p><strong>SCM answers:</strong> "What would have happened if we hadn't implemented the policy?"</p>
                        </div>
                        <h4 style="margin-top: 20px;">When to Use SCM</h4>
                        <ul>
                            <li>Policy implemented in one region/unit</li>
                            <li>Similar untreated units available for comparison</li>
                            <li>Sufficient pre-intervention data exists</li>
                            <li>Cannot run a randomised experiment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 16: SCM Implementation -->
        <div class="slide">
            <h2>Implementing SCM in Python</h2>
            <div class="content-wrapper">
                <p>We will reproduce the Abadie et al. (2010) analysis in Google Colab using the following steps:</p>
                <div class="two-column" style="margin-top: 20px;">
                    <div>
                        <h4>Required Data Files</h4>
                        <div class="concept-box">
                            <p><strong>1. prop99.csv</strong></p>
                            <p style="font-size: 0.95em;">Cigarette sales data for all US states from 1970-2000</p>
                        </div>
                        <div class="concept-box">
                            <p><strong>2. smoking.rda</strong></p>
                            <p style="font-size: 0.95em;">Predictor variables (income, beer consumption, demographics)</p>
                        </div>
                        <h4 style="margin-top: 20px;">Required Packages</h4>
                        <ul>
                            <li><code>pandas</code> — data manipulation</li>
                            <li><code>pyreadr</code> — read R data files</li>
                            <li><code>tslib</code> — time series synthetic control</li>
                            <li><code>matplotlib</code> — visualisation</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Implementation Steps</h4>
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span>Upload data files to Colab</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span>Load as Pandas DataFrames</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span>Define treated unit (California) and donor pool</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">4</span>
                            <span>Fit SCM to find optimal weights</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">5</span>
                            <span>Plot results and calculate treatment effect</span>
                        </div>
                        <div class="insight-box" style="margin-top: 15px;">
                            <strong>Notebook Link:</strong><br>
                            <a href="https://colab.research.google.com/github/data-5000/data5000/blob/main/week_6/week_6_notebook.ipynb" target="_blank" style="color: var(--accent-blue);">Open SCM Notebook</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 17: Quiz 2 -->
        <div class="slide">
            <h2>Knowledge Check: Synthetic Control Method</h2>
            <div class="content-wrapper">
                <div class="quiz-container">
                    <p class="quiz-question">Your company launched a new pricing strategy in Queensland but not in other Australian states. You want to evaluate its impact on sales. Why would SCM be appropriate here?</p>
                    <div class="quiz-options" id="quiz2-options">
                        <div class="quiz-option" data-answer="a" onclick="selectOption(2, this)">
                            <span class="option-letter">A</span>
                            <span>Because Queensland is perfectly comparable to other states</span>
                        </div>
                        <div class="quiz-option" data-answer="b" onclick="selectOption(2, this)">
                            <span class="option-letter">B</span>
                            <span>Because we can't run a randomised experiment after the fact, and we can construct a synthetic Queensland from weighted combinations of other states</span>
                        </div>
                        <div class="quiz-option" data-answer="c" onclick="selectOption(2, this)">
                            <span class="option-letter">C</span>
                            <span>Because SCM uses machine learning to predict future sales</span>
                        </div>
                        <div class="quiz-option" data-answer="d" onclick="selectOption(2, this)">
                            <span class="option-letter">D</span>
                            <span>Because SCM automatically removes all confounding variables</span>
                        </div>
                    </div>
                    <button class="quiz-btn" onclick="checkAnswer(2, 'b')">Check Answer</button>
                    <div class="quiz-feedback" id="feedback-2">
                        <strong>Correct!</strong> SCM is ideal when you can't run an RCT. By creating a synthetic Queensland using weighted combinations of NSW, Victoria, etc., you can estimate what Queensland's sales would have been without the pricing change.
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 18: Ames Housing Introduction -->
        <div class="slide">
            <h2>Case Study: Ames Iowa Housing</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>From Prediction to Prescription</h3>
                    <p>We now apply causal ML to a larger dataset to make <strong>actionable recommendations</strong> about property improvements.</p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Dataset Overview</h4>
                        <div class="metric-cards" style="grid-template-columns: 1fr 1fr;">
                            <div class="metric-card">
                                <div class="metric-value">2,930</div>
                                <div class="metric-label">Properties</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">68</div>
                                <div class="metric-label">Features</div>
                            </div>
                        </div>
                        <p style="margin-top: 15px;">Features include: lot size, neighbourhood, construction quality, number of rooms, basement details, garage, fireplace, pool, and more.</p>
                    </div>
                    <div>
                        <h4>Business Questions</h4>
                        <ul>
                            <li>Which features <strong>cause</strong> price increases (not just correlate)?</li>
                            <li>Should homeowners add fireplaces? For which homes?</li>
                            <li>What's the ROI of renovations considering costs?</li>
                            <li>How do effects vary across property segments?</li>
                        </ul>
                        <div class="insight-box" style="margin-top: 15px;">
                            <strong>Notebook:</strong> <a href="https://colab.research.google.com/github/data-5000/data5000/blob/main/week_2/week_2_1_notebook.ipynb" target="_blank" style="color: var(--accent-blue);">Ames Housing Causal ML</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 19: SHAP vs Causal -->
        <div class="slide">
            <h2>SHAP Features vs. Causal Factors</h2>
            <div class="content-wrapper">
                <p>Not all important features are actionable. We must distinguish between <strong>correlation</strong> and <strong>causation</strong>.</p>
                <div class="comparison-container" style="margin-top: 20px;">
                    <div class="comparison-side left">
                        <h4 style="color: var(--primary-red);">Correlation Factors (SHAP)</h4>
                        <p style="font-size: 0.95em;">Features that <em>predict</em> price but may not <em>cause</em> changes:</p>
                        <ul>
                            <li><strong>Neighbourhood</strong> — can't change location</li>
                            <li><strong>Year Built</strong> — can't change age</li>
                            <li><strong>Lot Size</strong> — typically fixed</li>
                            <li><strong>Foundation Type</strong> — very costly to change</li>
                        </ul>
                        <div class="warning-box" style="margin-top: 15px;">
                            <strong>Limitation:</strong> Acting on these won't necessarily change outcomes
                        </div>
                    </div>
                    <div class="comparison-divider">
                        <div class="vs-badge">VS</div>
                    </div>
                    <div class="comparison-side right">
                        <h4 style="color: var(--accent-green);">Causal Factors</h4>
                        <p style="font-size: 0.95em;">Features where intervention <em>causes</em> price changes:</p>
                        <ul>
                            <li><strong>Fireplace</strong> — can be added</li>
                            <li><strong>Garage Capacity</strong> — can expand</li>
                            <li><strong>Kitchen Quality</strong> — can renovate</li>
                            <li><strong>Central Air</strong> — can install</li>
                        </ul>
                        <div class="example-box" style="margin-top: 15px;">
                            <strong>Actionable:</strong> These inform renovation decisions
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 20: Causal Analysis Setup -->
        <div class="slide">
            <h2>Causal Analysis: Fireplace Treatment</h2>
            <div class="content-wrapper">
                <div class="insight-box">
                    <h4>Research Question</h4>
                    <p>What is the <strong>causal effect</strong> of having a fireplace on house prices? Should homeowners invest in adding fireplaces?</p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Treatment Definition</h4>
                        <table class="data-table">
                            <tr>
                                <th>Variable</th>
                                <th>Definition</th>
                            </tr>
                            <tr>
                                <td><strong>Treatment</strong></td>
                                <td>Has fireplace (1) vs. No fireplace (0)</td>
                            </tr>
                            <tr>
                                <td><strong>Outcome</strong></td>
                                <td>Sale Price ($)</td>
                            </tr>
                            <tr>
                                <td><strong>Confounders</strong></td>
                                <td>House age, size, quality, neighbourhood</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>Why Confounders Matter</h4>
                        <p>Houses with fireplaces may be more expensive because they're:</p>
                        <ul>
                            <li>Larger overall</li>
                            <li>In nicer neighbourhoods</li>
                            <li>Better quality construction</li>
                        </ul>
                        <div class="concept-box" style="margin-top: 15px;">
                            <strong>Causal ML controls for these</strong> to isolate the true fireplace effect.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 21: ATE Results -->
        <div class="slide">
            <h2>Average Treatment Effect of Fireplace</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>Finding: ATE = +$4,400</h3>
                    <p>On average, having a fireplace <strong>causes</strong> house prices to increase by approximately $4,400, controlling for other factors.</p>
                </div>
                <div class="chart-container" style="margin-top: 25px;">
                    <h4 style="text-align: center;">Price Difference: Fireplace vs. No Fireplace</h4>
                    <div style="display: flex; justify-content: center; align-items: flex-end; gap: 60px; height: 200px; margin-top: 30px;">
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 160px; background: linear-gradient(180deg, #f97316, #fb923c); border-radius: 8px 8px 0 0; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 10px;">
                                <span style="color: white; font-weight: 700; font-size: 1.1em;">$168,500</span>
                            </div>
                            <p style="margin-top: 10px; font-weight: 600;">No Fireplace</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 185px; background: linear-gradient(180deg, #059669, #34d399); border-radius: 8px 8px 0 0; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 10px;">
                                <span style="color: white; font-weight: 700; font-size: 1.1em;">$172,900</span>
                            </div>
                            <p style="margin-top: 10px; font-weight: 600;">With Fireplace</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 40px; background: linear-gradient(180deg, var(--primary-red), #f87171); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <span style="color: white; font-weight: 700; font-size: 1.1em;">+$4,400</span>
                            </div>
                            <p style="margin-top: 10px; font-weight: 600;">ATE</p>
                        </div>
                    </div>
                </div>
                <div class="insight-box" style="margin-top: 20px;">
                    <strong>Business Interpretation:</strong> A fireplace adds value, but is +$4,400 worth the investment? We need to consider costs and segment variations.
                </div>
            </div>
        </div>

        <!-- Slide 22: HTE Introduction -->
        <div class="slide">
            <h2>Heterogeneous Treatment Effects</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>Question: Does the fireplace effect vary across houses?</h3>
                    <p>The ATE of $4,400 is an <em>average</em>. Some houses may benefit more, others less — or even negatively.</p>
                </div>
                <p style="margin-top: 20px;">A <strong>Heterogeneity Tree</strong> reveals how treatment effects vary based on house characteristics:</p>
                <div class="tree-diagram" style="margin-top: 20px;">
                    <div class="tree-level">
                        <div class="tree-node root">
                            <strong>All Houses</strong><br>
                            ATE: +$4,400
                        </div>
                    </div>
                    <div class="tree-connector"></div>
                    <div class="tree-level">
                        <div class="tree-node positive">
                            <strong>Age ≤ 27 years</strong><br>
                            CATE: +$4,390<br>
                            <span style="font-size: 0.85em;">n = 291</span>
                        </div>
                        <div class="tree-node positive" style="background: #bbf7d0;">
                            <strong>Age > 27 years</strong><br>
                            CATE: +$6,287<br>
                            <span style="font-size: 0.85em;">n = 179</span>
                        </div>
                    </div>
                    <div class="tree-connector"></div>
                    <div class="tree-level">
                        <div class="tree-node">
                            <strong>Newer, Low Zone</strong><br>
                            CATE: +$1,360
                        </div>
                        <div class="tree-node negative">
                            <strong>Newer, High Zone</strong><br>
                            CATE: -$3,431
                        </div>
                        <div class="tree-node positive">
                            <strong>Older, Age ≤ 74</strong><br>
                            CATE: +$5,295
                        </div>
                        <div class="tree-node positive" style="background: #86efac;">
                            <strong>Older, Age > 74</strong><br>
                            CATE: +$9,846
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 23: HTE Insights -->
        <div class="slide">
            <h2>Interpreting the Heterogeneity Tree</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div>
                        <h4>Key Findings</h4>
                        <div class="concept-box">
                            <h4 style="color: var(--accent-green);">Highest Impact: Older Houses (75+ years)</h4>
                            <p>CATE = <strong>+$9,846</strong></p>
                            <p style="font-size: 0.95em;">Adding a fireplace to historic homes yields the greatest return — likely because buyers expect fireplaces in older homes.</p>
                        </div>
                        <div class="concept-box">
                            <h4 style="color: var(--primary-red);">Negative Impact: New Houses in High-Value Zones</h4>
                            <p>CATE = <strong>-$3,431</strong></p>
                            <p style="font-size: 0.95em;">Modern homes in premium areas may not benefit — buyers may prefer contemporary heating or the fireplace signals dated design.</p>
                        </div>
                    </div>
                    <div>
                        <h4>Business Recommendations</h4>
                        <div class="example-box">
                            <strong>DO add fireplaces to:</strong>
                            <ul>
                                <li>Houses over 75 years old (+$9.8k return)</li>
                                <li>Mid-age houses in moderate zones (+$5.3k)</li>
                            </ul>
                        </div>
                        <div class="warning-box">
                            <strong>DON'T add fireplaces to:</strong>
                            <ul>
                                <li>New construction in high-value zones (negative return)</li>
                                <li>Newer homes in low-density residential (marginal return)</li>
                            </ul>
                        </div>
                        <p class="annotation" style="margin-top: 15px;">This is the power of HTE — personalised recommendations, not one-size-fits-all.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 24: Quiz 3 -->
        <div class="slide">
            <h2>Knowledge Check: Heterogeneous Treatment Effects</h2>
            <div class="content-wrapper">
                <div class="quiz-container">
                    <p class="quiz-question">A real estate developer asks: "Should I add fireplaces to all the homes I'm renovating?" Based on the heterogeneity analysis, what's the best advice?</p>
                    <div class="quiz-options" id="quiz3-options">
                        <div class="quiz-option" data-answer="a" onclick="selectOption(3, this)">
                            <span class="option-letter">A</span>
                            <span>Yes, the ATE is positive so all homes will benefit</span>
                        </div>
                        <div class="quiz-option" data-answer="b" onclick="selectOption(3, this)">
                            <span class="option-letter">B</span>
                            <span>No, because some segments show negative effects — prioritize older homes and avoid new construction in premium areas</span>
                        </div>
                        <div class="quiz-option" data-answer="c" onclick="selectOption(3, this)">
                            <span class="option-letter">C</span>
                            <span>It depends on the fireplace brand and installation quality</span>
                        </div>
                        <div class="quiz-option" data-answer="d" onclick="selectOption(3, this)">
                            <span class="option-letter">D</span>
                            <span>Never add fireplaces because SHAP doesn't rank it as the top feature</span>
                        </div>
                    </div>
                    <button class="quiz-btn" onclick="checkAnswer(3, 'b')">Check Answer</button>
                    <div class="quiz-feedback" id="feedback-3">
                        <strong>Correct!</strong> The HTE analysis shows treatment effects vary significantly. While the average effect is positive, new homes in high-value areas actually lose value. Smart developers target renovations where CATE is highest.
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 25: Policy Analysis Introduction -->
        <div class="slide">
            <h2>Policy Analysis: Considering Costs</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>The ROI Question</h3>
                    <p>Knowing a fireplace adds $4,400 on average isn't enough. We must ask: <strong>Is the return greater than the cost?</strong></p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Cost Assumption</h4>
                        <div class="metric-cards" style="grid-template-columns: 1fr;">
                            <div class="metric-card">
                                <div class="metric-value">$2,500</div>
                                <div class="metric-label">Average cost to add a fireplace</div>
                            </div>
                        </div>
                        <h4 style="margin-top: 20px;">Decision Rule</h4>
                        <div class="formula-box">
                            Add fireplace if: CATE > $2,500
                        </div>
                    </div>
                    <div>
                        <h4>Expected Outcomes by Segment</h4>
                        <table class="data-table">
                            <tr>
                                <th>Segment</th>
                                <th>CATE</th>
                                <th>Net Gain</th>
                                <th>Decision</th>
                            </tr>
                            <tr>
                                <td>75+ year homes</td>
                                <td>+$9,846</td>
                                <td style="color: var(--accent-green); font-weight: 600;">+$7,346</td>
                                <td style="color: var(--accent-green);">✓ Add</td>
                            </tr>
                            <tr>
                                <td>27-74 year homes</td>
                                <td>+$5,295</td>
                                <td style="color: var(--accent-green); font-weight: 600;">+$2,795</td>
                                <td style="color: var(--accent-green);">✓ Add</td>
                            </tr>
                            <tr>
                                <td>New, low zone</td>
                                <td>+$1,360</td>
                                <td style="color: var(--primary-red); font-weight: 600;">-$1,140</td>
                                <td style="color: var(--primary-red);">✗ Don't</td>
                            </tr>
                            <tr>
                                <td>New, high zone</td>
                                <td>-$3,431</td>
                                <td style="color: var(--primary-red); font-weight: 600;">-$5,931</td>
                                <td style="color: var(--primary-red);">✗ Don't</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 26: Policy Comparison -->
        <div class="slide">
            <h2>Comparing Policy Options</h2>
            <div class="content-wrapper">
                <p>Causal ML allows us to compare different intervention strategies and quantify their impact:</p>
                <div class="three-column" style="margin-top: 25px;">
                    <div class="concept-box" style="text-align: center;">
                        <h4>Policy A: No Fireplaces</h4>
                        <div style="font-size: 2em; font-weight: 700; color: var(--text-light); margin: 15px 0;">Baseline</div>
                        <p>No intervention — maintain status quo</p>
                        <div style="margin-top: 15px; padding: 10px; background: var(--bg-light); border-radius: 6px;">
                            <strong>Net Gain: $0</strong>
                        </div>
                    </div>
                    <div class="concept-box" style="text-align: center; border-color: var(--accent-orange);">
                        <h4>Policy B: All Fireplaces</h4>
                        <div style="font-size: 2em; font-weight: 700; color: var(--accent-orange); margin: 15px 0;">+$1,900</div>
                        <p>Add fireplace to every house without a fireplace</p>
                        <div style="margin-top: 15px; padding: 10px; background: #fffbeb; border-radius: 6px;">
                            <strong>Average gain per house</strong>
                        </div>
                    </div>
                    <div class="concept-box" style="text-align: center; border-color: var(--accent-green);">
                        <h4>Policy C: Targeted</h4>
                        <div style="font-size: 2em; font-weight: 700; color: var(--accent-green); margin: 15px 0;">+$2,356</div>
                        <p>Add fireplace only where CATE > $2,500</p>
                        <div style="margin-top: 15px; padding: 10px; background: #f0fdf4; border-radius: 6px;">
                            <strong>24% better than Policy B</strong>
                        </div>
                    </div>
                </div>
                <div class="insight-box" style="margin-top: 25px;">
                    <strong>Key Insight:</strong> The targeted policy outperforms the blanket approach by $465 per house on average. Across 100 properties, that's <strong>$46,500 in additional value</strong> from smart targeting.
                </div>
            </div>
        </div>

        <!-- Slide 27: Individual Policy Recommendations -->
        <div class="slide">
            <h2>Individualised Policy Recommendations</h2>
            <div class="content-wrapper">
                <p>Causal ML can generate specific recommendations for each property. Here are the top 5 houses where adding a fireplace yields the highest return:</p>
                <table class="data-table" style="margin-top: 20px;">
                    <thead>
                        <tr>
                            <th>Property ID</th>
                            <th>Age (years)</th>
                            <th>Neighbourhood</th>
                            <th>Current Price</th>
                            <th>Expected CATE</th>
                            <th>Net Gain (after $2,500 cost)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#1247</td>
                            <td>92</td>
                            <td>Historic District</td>
                            <td>$145,000</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$12,340</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$9,840</td>
                        </tr>
                        <tr>
                            <td>#0893</td>
                            <td>85</td>
                            <td>Old Town</td>
                            <td>$158,500</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$11,200</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$8,700</td>
                        </tr>
                        <tr>
                            <td>#2156</td>
                            <td>78</td>
                            <td>Crawford</td>
                            <td>$132,000</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$10,850</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$8,350</td>
                        </tr>
                        <tr>
                            <td>#0421</td>
                            <td>81</td>
                            <td>Edwards</td>
                            <td>$127,500</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$10,100</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$7,600</td>
                        </tr>
                        <tr>
                            <td>#1832</td>
                            <td>76</td>
                            <td>Old Town</td>
                            <td>$141,200</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$9,950</td>
                            <td style="color: var(--accent-green); font-weight: 600;">+$7,450</td>
                        </tr>
                    </tbody>
                </table>
                <div class="example-box" style="margin-top: 20px;">
                    <strong>Pattern:</strong> The highest-value opportunities are consistently older homes (75+ years) in established neighbourhoods. The causal model identifies these as undervalued properties where fireplaces are expected but missing.
                </div>
            </div>
        </div>

        <!-- Slide 28: Quiz 4 -->
        <div class="slide">
            <h2>Knowledge Check: Policy Analysis</h2>
            <div class="content-wrapper">
                <div class="quiz-container">
                    <p class="quiz-question">A property investor has $25,000 to spend on fireplace installations ($2,500 each, so 10 homes). Using the individualised policy recommendations, what should they do?</p>
                    <div class="quiz-options" id="quiz4-options">
                        <div class="quiz-option" data-answer="a" onclick="selectOption(4, this)">
                            <span class="option-letter">A</span>
                            <span>Install fireplaces in 10 random homes from their portfolio</span>
                        </div>
                        <div class="quiz-option" data-answer="b" onclick="selectOption(4, this)">
                            <span class="option-letter">B</span>
                            <span>Only install in the 10 homes with the highest predicted CATE (treatment effect)</span>
                        </div>
                        <div class="quiz-option" data-answer="c" onclick="selectOption(4, this)">
                            <span class="option-letter">C</span>
                            <span>Install in the 10 most expensive homes to maximise percentage gain</span>
                        </div>
                        <div class="quiz-option" data-answer="d" onclick="selectOption(4, this)">
                            <span class="option-letter">D</span>
                            <span>Don't install any because there's risk involved</span>
                        </div>
                    </div>
                    <button class="quiz-btn" onclick="checkAnswer(4, 'b')">Check Answer</button>
                    <div class="quiz-feedback" id="feedback-4">
                        <strong>Correct!</strong> Prioritise homes by their predicted CATE. The top 10 homes might generate $80,000+ in value increases vs. $25,000 investment. This is data-driven capital allocation.
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 29: Counterfactual Analysis -->
        <div class="slide">
            <h2>Counterfactual Analysis: "What If?"</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>The Counterfactual Question</h3>
                    <p>What would happen to house prices if <strong>every home</strong> in Ames had a fireplace?</p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Price Distribution Shift</h4>
                        <div class="chart-container">
                            <div class="histogram-container" style="height: 180px;">
                                <!-- Without fireplace bars -->
                                <div class="histogram-bar control" style="height: 20%;"></div>
                                <div class="histogram-bar control" style="height: 45%;"></div>
                                <div class="histogram-bar control" style="height: 75%;"></div>
                                <div class="histogram-bar control" style="height: 100%;"></div>
                                <div class="histogram-bar control" style="height: 85%;"></div>
                                <div class="histogram-bar control" style="height: 60%;"></div>
                                <div class="histogram-bar control" style="height: 35%;"></div>
                                <div class="histogram-bar control" style="height: 15%;"></div>
                                <!-- Gap -->
                                <div style="width: 20px;"></div>
                                <!-- With fireplace bars (shifted right) -->
                                <div class="histogram-bar treatment" style="height: 15%;"></div>
                                <div class="histogram-bar treatment" style="height: 35%;"></div>
                                <div class="histogram-bar treatment" style="height: 65%;"></div>
                                <div class="histogram-bar treatment" style="height: 95%;"></div>
                                <div class="histogram-bar treatment" style="height: 90%;"></div>
                                <div class="histogram-bar treatment" style="height: 65%;"></div>
                                <div class="histogram-bar treatment" style="height: 40%;"></div>
                                <div class="histogram-bar treatment" style="height: 20%;"></div>
                            </div>
                            <div class="histogram-labels">
                                <div class="histogram-legend">
                                    <div class="legend-dot" style="background: var(--accent-orange);"></div>
                                    <span>Current (without fireplace)</span>
                                </div>
                                <div class="histogram-legend">
                                    <div class="legend-dot" style="background: var(--accent-green);"></div>
                                    <span>Counterfactual (with fireplace)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4>Key Findings</h4>
                        <div class="metric-cards" style="grid-template-columns: 1fr;">
                            <div class="metric-card">
                                <div class="metric-value">+$5,000</div>
                                <div class="metric-label">Average price increase for homes without fireplaces if we added one</div>
                            </div>
                        </div>
                        <div class="insight-box" style="margin-top: 20px;">
                            <strong>Interpretation:</strong> The counterfactual analysis shows the distribution shifts right (higher prices) when we simulate adding fireplaces to all homes currently without them.
                        </div>
                        <p class="annotation" style="margin-top: 15px;">Note: This is a population-wide estimate. Individual effects vary based on HTE.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 30: Local Treatment Effects -->
        <div class="slide">
            <h2>Cohort & Local Treatment Analysis</h2>
            <div class="content-wrapper">
                <div class="definition-box">
                    <h3>Question: Do causal effects generalise to new data?</h3>
                    <p>We trained our model on historical data. Will the same treatment effects apply to future properties?</p>
                </div>
                <div class="two-column" style="margin-top: 25px;">
                    <div>
                        <h4>Training Set Effects</h4>
                        <table class="data-table">
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                            </tr>
                            <tr>
                                <td>Global ATE</td>
                                <td>+$4,390</td>
                            </tr>
                            <tr>
                                <td>Std. Deviation</td>
                                <td>$3,640</td>
                            </tr>
                            <tr>
                                <td>Sample Size</td>
                                <td>n = 2,052</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>Test Set Effects (New Properties)</h4>
                        <table class="data-table">
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                            </tr>
                            <tr>
                                <td>Global ATE</td>
                                <td>+$4,280</td>
                            </tr>
                            <tr>
                                <td>Std. Deviation</td>
                                <td>$3,520</td>
                            </tr>
                            <tr>
                                <td>Sample Size</td>
                                <td>n = 878</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="example-box" style="margin-top: 25px;">
                    <strong>Good News:</strong> The treatment effects are consistent between training and test sets (within 3%). This suggests our causal estimates are reliable and will generalise to new properties with similar characteristics.
                </div>
            </div>
        </div>

        <!-- Slide 31: Summary of Ames Analysis -->
        <div class="slide">
            <h2>Ames Housing Analysis: Executive Summary</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div>
                        <h4>Key Findings</h4>
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span><strong>ATE:</strong> Fireplaces add ~$4,400 on average</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span><strong>HTE:</strong> Effects vary from -$3.4k to +$9.8k by segment</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span><strong>Policy:</strong> Targeted approach yields 24% better ROI</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">4</span>
                            <span><strong>Counterfactual:</strong> Adding to all homes would raise avg price by $5k</span>
                        </div>
                    </div>
                    <div>
                        <h4>Business Recommendations</h4>
                        <div class="example-box">
                            <strong>Target:</strong> Homes 75+ years old (highest CATE)
                        </div>
                        <div class="warning-box">
                            <strong>Avoid:</strong> New construction in premium areas (negative CATE)
                        </div>
                        <div class="insight-box">
                            <strong>ROI Strategy:</strong> Only invest where CATE exceeds installation cost ($2,500)
                        </div>
                    </div>
                </div>
                <div class="concept-box" style="margin-top: 25px;">
                    <h4>The Prescriptive Analytics Advantage</h4>
                    <p>Traditional ML would say "fireplaces correlate with higher prices." Causal ML tells us <strong>exactly which houses to renovate</strong> and <strong>quantifies the expected return</strong> — actionable intelligence for investment decisions.</p>
                </div>
            </div>
        </div>

        <!-- Slide 32: Quiz 5 -->
        <div class="slide">
            <h2>Knowledge Check: Comprehensive Review</h2>
            <div class="content-wrapper">
                <div class="quiz-container">
                    <p class="quiz-question">You're presenting to a real estate executive. They ask: "What's the difference between your causal ML approach and the SHAP analysis you showed last month?" What's the best response?</p>
                    <div class="quiz-options" id="quiz5-options">
                        <div class="quiz-option" data-answer="a" onclick="selectOption(5, this)">
                            <span class="option-letter">A</span>
                            <span>SHAP uses trees, causal ML uses neural networks — different algorithms</span>
                        </div>
                        <div class="quiz-option" data-answer="b" onclick="selectOption(5, this)">
                            <span class="option-letter">B</span>
                            <span>SHAP shows which features predict prices; causal ML shows which interventions will actually change prices — the difference between correlation and causation</span>
                        </div>
                        <div class="quiz-option" data-answer="c" onclick="selectOption(5, this)">
                            <span class="option-letter">C</span>
                            <span>Causal ML is more accurate because it uses more data</span>
                        </div>
                        <div class="quiz-option" data-answer="d" onclick="selectOption(5, this)">
                            <span class="option-letter">D</span>
                            <span>They're the same thing with different names</span>
                        </div>
                    </div>
                    <button class="quiz-btn" onclick="checkAnswer(5, 'b')">Check Answer</button>
                    <div class="quiz-feedback" id="feedback-5">
                        <strong>Excellent!</strong> This is the core distinction. SHAP explains model predictions (what features matter for prediction accuracy). Causal ML identifies actionable interventions (what changes will improve outcomes). One informs understanding, the other informs action.
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 33: Workshop Activities -->
        <div class="slide">
            <h2>Workshop Activities</h2>
            <div class="content-wrapper">
                <p>Complete the following hands-on exercises using the provided Colab notebooks:</p>
                <div class="two-column" style="margin-top: 20px;">
                    <div class="concept-box">
                        <h4>Activity 1: Synthetic Control Method</h4>
                        <p><strong>Time:</strong> 45 minutes</p>
                        <p><strong>Objective:</strong> Reproduce the Proposition 99 analysis</p>
                        <div class="step-indicator" style="margin-top: 10px;">
                            <span class="step-number">1</span>
                            <span>Upload prop99.csv and smoking.rda</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span>Run the SCM notebook</span>
                        </div>
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span>Answer: By how much did Prop 99 decrease cigarette sales by 2000?</span>
                        </div>
                        <div class="insight-box" style="margin-top: 15px;">
                            <a href="https://colab.research.google.com/github/data-5000/data5000/blob/main/week_6/week_6_notebook.ipynb" target="_blank" style="color: var(--accent-blue);">Open SCM Notebook →</a>
                        </div>
                    </div>
                    <div class="concept-box">
                        <h4>Activity 2: Ames Housing Causal Analysis</h4>
                        <p><strong>Time:</strong> 60 minutes</p>
                        <p><strong>Objective:</strong> Complete the causal ML analysis</p>
                        <p style="margin-top: 10px;"><strong>Discussion Questions:</strong></p>
                        <ol>
                            <li>What were the top SHAP features?</li>
                            <li>Which factors were identified as causal?</li>
                            <li>What happened when controlling for fireplace?</li>
                            <li>What's the recommended policy considering $2,500 cost?</li>
                            <li>How do effects change for new populations?</li>
                        </ol>
                        <div class="insight-box" style="margin-top: 15px;">
                            <a href="https://colab.research.google.com/github/data-5000/data5000/blob/main/week_2/week_2_1_notebook.ipynb" target="_blank" style="color: var(--accent-blue);">Open Ames Notebook →</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 34: Key Takeaways -->
        <div class="slide">
            <h2>Key Takeaways</h2>
            <div class="content-wrapper">
                <div class="three-column">
                    <div class="concept-box" style="text-align: center;">
                        <h4 style="color: var(--primary-red);">Treatment Effects</h4>
                        <p style="font-size: 0.95em;">Use ATE for overall impact, HTE/CATE for targeting, LATE for compliance scenarios. Match the effect type to your business question.</p>
                    </div>
                    <div class="concept-box" style="text-align: center;">
                        <h4 style="color: var(--primary-red);">Synthetic Control</h4>
                        <p style="font-size: 0.95em;">When you can't run experiments, create synthetic counterfactuals from weighted combinations of untreated units.</p>
                    </div>
                    <div class="concept-box" style="text-align: center;">
                        <h4 style="color: var(--primary-red);">Policy Analysis</h4>
                        <p style="font-size: 0.95em;">Always consider costs. Targeted interventions based on CATE outperform blanket approaches. Quantify ROI.</p>
                    </div>
                </div>
                <div class="definition-box" style="margin-top: 30px;">
                    <h3>The Progression of Analytics</h3>
                    <div class="flow-diagram">
                        <div class="flow-box">
                            <strong>SHAP</strong><br>
                            <span style="font-size: 0.9em;">"What predicts?"</span>
                        </div>
                        <span class="flow-arrow">→</span>
                        <div class="flow-box">
                            <strong>Causal ML</strong><br>
                            <span style="font-size: 0.9em;">"What causes?"</span>
                        </div>
                        <span class="flow-arrow">→</span>
                        <div class="flow-box highlight">
                            <strong>Policy</strong><br>
                            <span style="font-size: 0.9em;">"What to do?"</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 35: Preparation for Next Week -->
        <div class="slide">
            <h2>Preparation for Next Week</h2>
            <div class="content-wrapper">
                <div class="two-column">
                    <div>
                        <h4>Before Next Class</h4>
                        <div class="concept-box">
                            <strong>Review:</strong> Today's treatment effects concepts — you'll apply them with Causal Forests
                        </div>
                        <div class="concept-box">
                            <strong>Complete:</strong> Both Colab notebooks with discussion questions answered
                        </div>
                        <div class="concept-box">
                            <strong>Prepare:</strong> Think about a business problem where you'd want to estimate heterogeneous treatment effects
                        </div>
                    </div>
                    <div>
                        <h4>Week 6 Preview: Causal Forests & Meta-Learners</h4>
                        <div class="insight-box">
                            <p>We'll explore advanced methods for estimating treatment effects:</p>
                            <ul style="margin-top: 10px;">
                                <li><strong>Causal Forests</strong> — tree-based HTE estimation</li>
                                <li><strong>Meta-Learners</strong> — S-Learner, T-Learner, X-Learner</li>
                                <li><strong>Double Machine Learning</strong> — robust causal estimates</li>
                            </ul>
                        </div>
                        <div class="warning-box" style="margin-top: 15px;">
                            <strong>Assessment Reminder:</strong> A1 Skills-Building (25%) builds on these concepts. Start early and document your AI collaboration process.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 36: Next Workshop -->
        <div class="slide title-slide">
            <h1>Next Workshop</h1>
            <p class="subtitle">Week 6: Causal Forests & Meta-Learners</p>
            <p class="course-info" style="margin-top: 40px;">Advanced techniques for heterogeneous treatment effect estimation</p>
            <div style="margin-top: 50px;">
                <p style="color: var(--text-light); font-size: 1.1em;">Questions? Reach out via the discussion forum or during office hours.</p>
            </div>
            <p class="course-info" style="margin-top: 40px; color: var(--text-light);">DATA5000 — Kaplan Business School</p>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn" id="prev-btn" onclick="previousSlide()">← Previous</button>
            <button class="nav-btn" id="next-btn" onclick="nextSlide()">Next →</button>
        </div>

        <div class="kaplan-logo">KAPLAN</div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        document.getElementById('total-slides').textContent = totalSlides;

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');

            document.getElementById('current-slide').textContent = currentSlide + 1;

            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentSlide === 0;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                showSlide(currentSlide + 1);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                showSlide(currentSlide - 1);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousSlide();
            }
        });

        // Quiz functionality
        let selectedAnswers = {};

        function selectOption(quizNum, element) {
            const options = document.querySelectorAll(`#quiz${quizNum}-options .quiz-option`);
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedAnswers[quizNum] = element.getAttribute('data-answer');
        }

        function checkAnswer(quizNum, correctAnswer) {
            const feedback = document.getElementById(`feedback-${quizNum}`);
            const options = document.querySelectorAll(`#quiz${quizNum}-options .quiz-option`);

            if (!selectedAnswers[quizNum]) {
                alert('Please select an answer first.');
                return;
            }

            options.forEach(opt => {
                opt.classList.remove('selected');
                if (opt.getAttribute('data-answer') === correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.getAttribute('data-answer') === selectedAnswers[quizNum]) {
                    opt.classList.add('incorrect');
                }
            });

            feedback.classList.add('show');
            if (selectedAnswers[quizNum] === correctAnswer) {
                feedback.classList.remove('incorrect');
                feedback.classList.add('correct');
            } else {
                feedback.classList.remove('correct');
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<strong>Not quite.</strong> The correct answer is ${correctAnswer.toUpperCase()}. ${feedback.innerHTML.split('</strong>')[1]}`;
            }
        }

        // Initialize
        showSlide(0);
    </script>
</body>
</html>