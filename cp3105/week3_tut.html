<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 3 Practical Guide - Model Deployment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            color: #333;
            padding: 40px;
        }
        
        h1 {
            color: #CC0000;
            font-size: 42px;
            margin-bottom: 25px;
            border-bottom: 4px solid #CC0000;
            padding-bottom: 12px;
        }
        
        h2 {
            color: #CC0000;
            font-size: 32px;
            margin: 30px 0 15px 0;
        }
        
        h3 {
            color: #CC0000;
            font-size: 24px;
            margin: 20px 0 10px 0;
        }
        
        .task {
            background: white;
            border: 3px solid #CC0000;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .task-header {
            background: #CC0000;
            color: white;
            padding: 15px 20px;
            margin: -25px -25px 20px -25px;
            font-size: 28px;
            font-weight: bold;
            border-radius: 5px 5px 0 0;
        }
        
        .step {
            background: #F9F9F9;
            border-left: 5px solid #CC0000;
            padding: 15px 20px;
            margin: 15px 0;
        }
        
        .step-number {
            display: inline-block;
            background: #CC0000;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-weight: bold;
            margin-right: 12px;
            font-size: 18px;
        }
        
        .step-title {
            font-weight: bold;
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        code {
            background: #F5F5F5;
            padding: 3px 8px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #CC0000;
            font-size: 16px;
        }
        
        pre {
            background: #F5F5F5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 14px;
            line-height: 1.5;
            border-left: 4px solid #CC0000;
            margin: 10px 0;
        }
        
        .warning {
            background: #FFF3CD;
            border-left: 6px solid #FFC107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .success {
            background: #E8F5E9;
            border-left: 6px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .info {
            background: #E3F2FD;
            border-left: 6px solid #1976D2;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        ul {
            margin-left: 25px;
            line-height: 1.8;
        }
        
        li {
            margin: 8px 0;
            font-size: 18px;
        }
        
        .submit {
            background: #4CAF50;
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
        }
        
        .jcu-logo {
            text-align: right;
            color: #CC0000;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th {
            background: #CC0000;
            color: white;
            padding: 12px;
            text-align: left;
            font-size: 16px;
        }
        
        td {
            padding: 10px 12px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        
        tr:nth-child(even) {
            background: #F9F9F9;
        }
        
        .option-box {
            border: 2px solid #1976D2;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #F0F7FF;
        }
    </style>
</head>
<body>
    <div class="jcu-logo">CP3501 Deep Learning | Week 3 Practical Workshop</div>
    
    <h1>Week 3 Practical: Deploy Your Deep Learning Models</h1>
    
    <div class="info">
        <strong style="font-size: 20px;">Today's Goal:</strong> Take your trained models and deploy them as web applications that anyone can use!
    </div>
    
    <div class="warning">
        <h3 style="margin-top: 0;">‚ö†Ô∏è Known Issues & Options</h3>
        <p style="font-size: 18px; margin-bottom: 10px;">There are version compatibility issues between Hugging Face and Kaggle/Colab. If you encounter errors:</p>
        
        <div class="option-box">
            <strong>Option 1 (Recommended):</strong> Follow tasks below using Hugging Face Spaces
        </div>
        
        <div class="option-box">
            <strong>Option 2:</strong> Run everything on Kaggle (see example: <code>dmitrykonovalov/fastai22-lesson2-prac3-app-250605</code>)
        </div>
        
        <div class="option-box">
            <strong>Option 3:</strong> Install Gradio locally on your laptop (ask ChatGPT: "how to install and run gradio locally on windows-11")
        </div>
        
        <p style="margin-top: 10px; font-size: 16px;"><strong>Note:</strong> Hugging Face may be blocked on JCU network. Use personal hotspot if needed.</p>
    </div>

    <!-- TASK 1 -->
    <div class="task">
        <div class="task-header">TASK 1: Your First Gradio App (Hello World)</div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">1</span>
                Create Hugging Face Account
            </div>
            <ul>
                <li>Go to <code>huggingface.co/spaces</code></li>
                <li>Sign up for free account</li>
                <li>Log in</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">2</span>
                Create New Space
            </div>
            <ul>
                <li>Click "Create new Space"</li>
                <li>Name: <code>fastai-lesson2-hello</code> (or your choice)</li>
                <li>Select: <strong>Gradio</strong> as SDK</li>
                <li>License: <strong>Apache 2.0</strong></li>
                <li>Visibility: <strong>Public</strong></li>
                <li>Click "Create Space"</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">3</span>
                Create app.py File
            </div>
            <ul>
                <li>Click "Files" tab</li>
                <li>Click "+ Add file" ‚Üí "Create a new file"</li>
                <li>Filename: <code>app.py</code></li>
                <li>Copy this code:</li>
            </ul>
            <pre>import gradio as gr

def greet(name):
    return "Hello " + name + "!!"

demo = gr.Interface(fn=greet, inputs="text", outputs="text")
demo.launch()</pre>
            <ul>
                <li>Click "Commit new file to main"</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">4</span>
                Test Your App
            </div>
            <ul>
                <li>Wait 1-2 minutes for build to complete</li>
                <li>Your app will appear in the Space</li>
                <li>Type your name in the text box</li>
                <li>Click Submit - you should see "Hello [your name]!!"</li>
            </ul>
        </div>
        
        <div class="success">
            <div class="submit">‚úì SUBMIT: URL of your Hugging Face Space (or screenshot if running locally)</div>
        </div>
    </div>

    <!-- TASK 2 -->
    <div class="task">
        <div class="task-header">TASK 2: Deploy a Cat vs Dog Classifier</div>
        
        <h3>Part A: Train and Export Model</h3>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">1</span>
                Open Training Notebook
            </div>
            <ul>
                <li>Go to Kaggle</li>
                <li>Copy this notebook: <code>dmitrykonovalov/fastai-lesson2-part2b-train-save-model-v250528</code></li>
                <li>Or use your Week 2 cat/dog classifier</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">2</span>
                Add Export Code
            </div>
            <ul>
                <li>At the end of your training code, add:</li>
            </ul>
            <pre>learn.export('model.pkl')  # Save the trained model</pre>
            <ul>
                <li>Run all cells</li>
                <li>Save the notebook</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">3</span>
                Download model.pkl
            </div>
            <ul>
                <li>Click "Output" tab in Kaggle</li>
                <li>Find <code>model.pkl</code></li>
                <li>Download it to your computer</li>
            </ul>
        </div>
        
        <h3 style="margin-top: 30px;">Part B: Deploy the Model</h3>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">4</span>
                Duplicate Example Space
            </div>
            <ul>
                <li>Go to: <code>huggingface.co/spaces/dmitryakonovalov/fastai-lesson2-part2-cats-dogs-v2</code></li>
                <li>Click "‚ãÆ" (three dots) in top-right</li>
                <li>Select "Duplicate this Space"</li>
                <li>Give it a new name: <code>your-username/cat-dog-classifier</code></li>
            </div>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">5</span>
                Upload Your Model
            </div>
            <ul>
                <li>In your duplicated Space, click "Files"</li>
                <li>Click "+ Add file" ‚Üí "Upload files"</li>
                <li>Upload your <code>model.pkl</code></li>
                <li>Commit changes</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">6</span>
                Fix app.py
            </div>
            <ul>
                <li>Click on <code>app.py</code> to edit it</li>
                <li>Find this line:</li>
            </ul>
            <pre>learn = load_learner('my_model.pkl')  # This will give error!</pre>
            <ul>
                <li>Change it to:</li>
            </ul>
            <pre>learn = load_learner('model.pkl')  # Use your uploaded model</pre>
            <ul>
                <li>Commit changes</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">7</span>
                Test Your Classifier
            </div>
            <ul>
                <li>Wait for build to complete (2-3 minutes)</li>
                <li>Upload a cat or dog image</li>
                <li>Check if predictions are reasonable</li>
                <li>Try multiple images</li>
            </ul>
        </div>
        
        <div class="success">
            <div class="submit">‚úì SUBMIT: 
                <ol style="margin-top: 10px;">
                    <li>URL of your Kaggle notebook (with model.pkl in outputs)</li>
                    <li>URL of your Hugging Face Space</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- TASK 3 -->
    <div class="task">
        <div class="task-header">TASK 3: Deploy Your Three-Bear Classifier</div>
        
        <div class="info" style="margin-bottom: 15px;">
            <strong>Remember Week 2?</strong> You trained a model to recognize grizzly, black, and teddy bears. Now deploy it!
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">1</span>
                Export Your Bear Model
            </div>
            <ul>
                <li>Open your Week 2 bear classifier notebook</li>
                <li>Add at the end: <code>learn.export('bear_model.pkl')</code></li>
                <li>Run and download <code>bear_model.pkl</code></li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">2</span>
                Duplicate Your Task 2 Space
            </div>
            <ul>
                <li>Go to your cat-dog classifier Space from Task 2</li>
                <li>Click "‚ãÆ" ‚Üí "Duplicate this Space"</li>
                <li>Name it: <code>your-username/bear-classifier</code></li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">3</span>
                Replace the Model
            </div>
            <ul>
                <li>Delete old <code>model.pkl</code></li>
                <li>Upload your <code>bear_model.pkl</code></li>
                <li>Rename it to <code>model.pkl</code></li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">4</span>
                Update app.py
            </div>
            <ul>
                <li>Edit <code>app.py</code></li>
                <li>Change title from "Cat Dog Classifier" to "Bear Classifier"</li>
                <li>Change description to mention the three bear types</li>
                <li>Example:</li>
            </ul>
            <pre>demo = gr.Interface(
    fn=classify_image,
    inputs=gr.Image(),
    outputs=gr.Label(num_top_classes=3),
    title="üêª Bear Classifier",
    description="Upload a bear image to classify: Grizzly, Black, or Teddy Bear"
)</pre>
        </div>
        
        <div class="step">
            <div class="step-title">
                <span class="step-number">5</span>
                Test with Bear Images
            </div>
            <ul>
                <li>Search Google Images for bears</li>
                <li>Test: grizzly bear, black bear, teddy bear</li>
                <li>Check if predictions match</li>
            </ul>
        </div>
        
        <div class="success">
            <div class="submit">‚úì SUBMIT: URL of your Bear Classifier Space</div>
        </div>
    </div>

    <!-- TROUBLESHOOTING -->
    <div class="warning">
        <h2 style="margin-top: 0;">Common Errors & Solutions</h2>
        
        <table>
            <tr>
                <th style="width: 40%;">Error</th>
                <th>Solution</th>
            </tr>
            <tr>
                <td><code>FileNotFoundError: model.pkl</code></td>
                <td>Make sure model.pkl is uploaded AND filename in app.py matches exactly</td>
            </tr>
            <tr>
                <td><code>ModuleNotFoundError: No module named 'fastai'</code></td>
                <td>Create requirements.txt with:<br/><code>fastai<br/>gradio</code></td>
            </tr>
            <tr>
                <td>Build keeps failing</td>
                <td>Check Logs tab for specific error. Try Option 2 (Kaggle) or Option 3 (local)</td>
            </tr>
            <tr>
                <td>Space shows blank/loading forever</td>
                <td>Check if HF is blocked on network. Try personal hotspot or home internet</td>
            </tr>
            <tr>
                <td>Version mismatch errors</td>
                <td>Pin versions in requirements.txt:<br/><code>fastai==2.7.14<br/>gradio==4.0.0</code></td>
            </tr>
        </table>
    </div>

    <!-- CHECKLIST -->
    <div class="task">
        <div class="task-header">‚úì Final Checklist</div>
        
        <h3>Before You Leave:</h3>
        <ul style="font-size: 20px;">
            <li>‚òê Task 1: Hello World app working</li>
            <li>‚òê Task 2: Cat/Dog classifier deployed</li>
            <li>‚òê Task 3: Bear classifier deployed</li>
            <li>‚òê All Spaces are set to "Public"</li>
            <li>‚òê Tested each app with multiple images</li>
            <li>‚òê Submitted all URLs to LearnJCU</li>
        </ul>
        
        <h3 style="margin-top: 25px;">Bonus Challenges (Optional):</h3>
        <ul style="font-size: 18px;">
            <li>Add example images to your classifier</li>
            <li>Customize the theme and colors</li>
            <li>Add a README.md with project description</li>
            <li>Deploy a classifier for YOUR own custom dataset</li>
            <li>Share your Space on social media!</li>
        </ul>
    </div>

    <div class="info" style="margin-top: 30px; font-size: 20px;">
        <strong>Need Help?</strong> Ask your instructor or classmates. Check the Logs tab in your Space for error details. Remember: everyone encounters errors when deploying - it's part of learning!
    </div>

</body>
</html>