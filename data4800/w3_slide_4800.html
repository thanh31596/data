<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DATA4800 Week 3: Decision Trees and Random Forests</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background-color: white;
            overflow: hidden;
            color: #2c3e50;
        }
        
        .slide-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slide {
            width: 95%;
            max-width: 1200px;
            height: 90vh;
            display: none;
            padding: 40px 60px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow-y: auto;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1 {
            font-size: 2.5em;
            color: #3498db;
            margin-bottom: 20px;
            text-align: center;
        }
        
        h2 {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 20px;
            margin-top: 10px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 15px;
            margin-top: 20px;
        }
        
        h4 {
            font-size: 1.2em;
            color: #34495e;
            margin-bottom: 10px;
        }
        
        p {
            font-size: 1.1em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 15px;
        }
        
        ul {
            list-style-position: inside;
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
            font-size: 1.1em;
            line-height: 1.5;
        }
        
        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            align-items: center;
            background: rgba(255,255,255,0.9);
            padding: 15px 30px;
            border-radius: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .slide-counter {
            font-size: 1em;
            color: #7f8c8d;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .recap-box {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }
        
        .analytics-pyramid {
            margin: 30px auto;
            max-width: 600px;
        }
        
        .pyramid-level {
            padding: 20px;
            margin: 5px 0;
            text-align: center;
            color: white;
            font-weight: bold;
            border-radius: 5px;
            transition: transform 0.3s ease;
        }
        
        .pyramid-level:hover {
            transform: translateX(10px);
        }
        
        .level-1 { background: #3498db; width: 100%; }
        .level-2 { background: #2980b9; width: 85%; margin-left: 7.5%; }
        .level-3 { background: #21618c; width: 70%; margin-left: 15%; }
        .level-4 { background: #1b4f72; width: 55%; margin-left: 22.5%; }
        
        .workflow-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .workflow-step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 150px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .workflow-step:hover {
            border-color: #3498db;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .fill-in-blank {
            display: inline-block;
            min-width: 150px;
            padding: 5px 10px;
            border: 2px solid #3498db;
            border-radius: 5px;
            background: white;
            font-family: inherit;
            font-size: 1em;
            margin: 0 5px;
        }
        
        .fill-in-blank:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }
        
        .check-answers-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .check-answers-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .tree-visual {
            margin: 30px auto;
            text-align: center;
        }
        
        .node {
            cursor: pointer;
        }
        
        .node circle {
            stroke: #3498db;
            stroke-width: 3px;
        }
        
        .node text {
            font-size: 12px;
            text-anchor: middle;
            fill: #2c3e50;
        }
        
        .link {
            fill: none;
            stroke: #95a5a6;
            stroke-width: 2px;
        }
        
        .agenda-list {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .agenda-list li {
            margin-bottom: 15px;
            padding-left: 10px;
        }
        
        .agenda-list li::before {
            content: "▶";
            color: #3498db;
            margin-right: 10px;
        }
        
        .interactive-demo {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .demo-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .demo-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            background: #2980b9;
        }
        
        .sample-data {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .forest-visualization {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .mini-tree {
            width: 150px;
            height: 150px;
            background: #f8f9fa;
            border: 2px solid #3498db;
            border-radius: 10px;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #2c3e50;
            transition: all 0.3s ease;
        }
        
        .mini-tree:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .vote-result {
            background: #27ae60;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="slide-container">
        <!-- Slide 1: Title Slide -->
        <div class="slide active">
            <h1>DATA4800</h1>
            <h2>Week 3: Decision Trees and Random Forests</h2>
            <p style="margin-top: 40px; font-size: 1.1em; color: #7f8c8d; text-align: center;">Supervised Learning: Making Decisions Through Data</p>
            <p style="font-size: 1em; color: #95a5a6; text-align: center;">Kaplan Business School</p>
        </div>
        
        <!-- Slide 2: Week 2 Recap - Supervised vs Unsupervised -->
        <div class="slide">
            <h2>Week 2 Recap: Supervised vs Unsupervised Learning</h2>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Supervised Learning</h4>
                    <ul>
                        <li><strong>Training with labels:</strong> Algorithm learns from examples with known answers</li>
                        <li><strong>Clear objective:</strong> Predict specific outcomes (classification or regression)</li>
                        <li><strong>Examples:</strong> Email spam detection, house price prediction</li>
                        <li><strong>Evaluation:</strong> Can measure accuracy against known correct answers</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Unsupervised Learning</h4>
                    <ul>
                        <li><strong>No labels:</strong> Algorithm finds patterns without guidance</li>
                        <li><strong>Discovery objective:</strong> Find hidden structures in data</li>
                        <li><strong>Examples:</strong> Customer segmentation, anomaly detection</li>
                        <li><strong>Evaluation:</strong> More subjective - based on business value</li>
                    </ul>
                </div>
            </div>
            <div class="recap-box">
                <p><strong>Key Insight:</strong> Today we focus on supervised learning - specifically Decision Trees and Random Forests, which learn from labeled examples to make predictions.</p>
            </div>
        </div>
        
        <!-- Slide 3: Week 2 Recap - ML Workflow -->
        <div class="slide">
            <h2>Week 2 Recap: Machine Learning Workflow</h2>
            <div class="workflow-container">
                <div class="workflow-step">
                    <h4>1. Collect Data</h4>
                    <p>Gather historical examples</p>
                </div>
                <div class="workflow-step">
                    <h4>2. Prepare Data</h4>
                    <p>Clean and format</p>
                </div>
                <div class="workflow-step">
                    <h4>3. Split Data</h4>
                    <p>Training (80%) vs Testing (20%)</p>
                </div>
                <div class="workflow-step">
                    <h4>4. Train Model</h4>
                    <p>Algorithm learns patterns</p>
                </div>
                <div class="workflow-step">
                    <h4>5. Test Model</h4>
                    <p>Evaluate accuracy</p>
                </div>
                <div class="workflow-step">
                    <h4>6. Deploy Model</h4>
                    <p>Use for predictions</p>
                </div>
            </div>
            <div class="recap-box">
                <p><strong>Remember:</strong> We train on historical data with known outcomes, then test on unseen data to ensure our model generalizes well.</p>
            </div>
        </div>
        
        <!-- Slide 4: Week 2 Recap - Algorithm Selection -->
        <div class="slide">
            <h2>Week 2 Recap: Choosing the Right Algorithm</h2>
            <p>Last week we learned that different algorithms suit different problems:</p>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Classification Algorithms</h4>
                    <ul>
                        <li><strong>Goal:</strong> Predict categories (Yes/No, A/B/C)</li>
                        <li><strong>Examples:</strong> Decision Trees, Random Forest, SVM</li>
                        <li><strong>Use cases:</strong> Fraud detection, customer churn, diagnosis</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Regression Algorithms</h4>
                    <ul>
                        <li><strong>Goal:</strong> Predict continuous values</li>
                        <li><strong>Examples:</strong> Linear Regression, Random Forest</li>
                        <li><strong>Use cases:</strong> Price prediction, demand forecasting</li>
                    </ul>
                </div>
            </div>
            <div class="recap-box">
                <p><strong>Today's Focus:</strong> Decision Trees and Random Forests can handle both classification and regression tasks!</p>
            </div>
        </div>
        
        <!-- Slide 5: Fill-in-the-blank Exercise -->
        <div class="slide">
            <h2>Quick Review: Test Your Knowledge</h2>
            <p>Fill in the blanks to review key concepts from Week 2:</p>
            
            <div style="margin: 30px 0; line-height: 2.5;">
                <p>1. In <input type="text" class="fill-in-blank" id="blank1" placeholder="?"> learning, we train models using labeled data.</p>
                
                <p>2. We typically split our data into <input type="text" class="fill-in-blank" id="blank2" placeholder="?">% for training and <input type="text" class="fill-in-blank" id="blank3" placeholder="?">% for testing.</p>
                
                <p>3. <input type="text" class="fill-in-blank" id="blank4" placeholder="?"> algorithms predict categories, while <input type="text" class="fill-in-blank" id="blank5" placeholder="?"> algorithms predict continuous values.</p>
                
                <p>4. The main goal of machine learning is to find <input type="text" class="fill-in-blank" id="blank6" placeholder="?"> in data that can be used for predictions.</p>
            </div>
            
            <button class="check-answers-btn" onclick="checkAnswers()">Check Answers</button>
            
            <div id="feedback" class="feedback"></div>
        </div>
        
        <!-- Slide 6: Today's Agenda -->
        <div class="slide">
            <h2>Today's Learning Journey</h2>
            <div class="agenda-list">
                <h3>Part 1: Decision Trees</h3>
                <ul style="list-style: none;">
                    <li>Understanding the concept - making decisions through questions</li>
                    <li>Key terminology: nodes, branches, leaves</li>
                    <li>Building a tree interactively with real data</li>
                    <li>Evaluating tree performance</li>
                    <li>Preventing overfitting through pruning</li>
                </ul>
                
                <h3 style="margin-top: 30px;">Part 2: Random Forests</h3>
                <ul style="list-style: none;">
                    <li>From one tree to a forest - ensemble learning</li>
                    <li>How randomness improves predictions</li>
                    <li>Voting mechanisms and confidence scores</li>
                    <li>Feature importance and interpretation</li>
                    <li>When to use Random Forests vs single trees</li>
                </ul>
            </div>
        </div>
        
        <!-- Slide 7: Decision Trees - Introduction -->
        <div class="slide">
            <h2>Decision Trees: Making Decisions Like Humans</h2>
            <p>Imagine you're deciding whether to play tennis based on weather conditions:</p>
            
            <div class="tree-visual" id="simple-tree"></div>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>How Humans Decide</h4>
                    <ul>
                        <li>Ask series of yes/no questions</li>
                        <li>Follow logical paths</li>
                        <li>Reach conclusions based on conditions</li>
                        <li>Easy to explain reasoning</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>How Decision Trees Work</h4>
                    <ul>
                        <li>Split data based on features</li>
                        <li>Create branches for each decision</li>
                        <li>Continue until reaching prediction</li>
                        <li>Transparent and interpretable</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Slide 8: Decision Trees - Key Concepts -->
        <div class="slide">
            <h2>Decision Tree Components</h2>
            <div class="tree-visual" id="tree-components"></div>
            
            <div class="workflow-container">
                <div class="workflow-step">
                    <h4>Root Node</h4>
                    <p>Starting point - asks the most important question</p>
                </div>
                <div class="workflow-step">
                    <h4>Internal Nodes</h4>
                    <p>Decision points that split data further</p>
                </div>
                <div class="workflow-step">
                    <h4>Branches</h4>
                    <p>Paths representing yes/no answers</p>
                </div>
                <div class="workflow-step">
                    <h4>Leaf Nodes</h4>
                    <p>Final predictions - no more questions</p>
                </div>
            </div>
            
            <div class="recap-box">
                <p><strong>Key Principle:</strong> Each split should maximize information gain - separating the data into purer groups.</p>
            </div>
        </div>
        
        <!-- Slide 9: Decision Trees - Mathematical Foundation -->
        <div class="slide">
            <h2>How Trees Decide: Information Gain</h2>
            <p>Decision trees use mathematical measures to find the best questions:</p>
            
            <div class="sample-data">
                <h3>Example: Customer Churn Prediction</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Contract Length</th>
                            <th>Monthly Charges</th>
                            <th>Support Calls</th>
                            <th>Churned?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1 year</td>
                            <td>$50</td>
                            <td>0</td>
                            <td style="color: green;">No</td>
                        </tr>
                        <tr>
                            <td>Month-to-month</td>
                            <td>$80</td>
                            <td>5</td>
                            <td style="color: red;">Yes</td>
                        </tr>
                        <tr>
                            <td>2 years</td>
                            <td>$45</td>
                            <td>1</td>
                            <td style="color: green;">No</td>
                        </tr>
                        <tr>
                            <td>Month-to-month</td>
                            <td>$75</td>
                            <td>4</td>
                            <td style="color: red;">Yes</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Gini Impurity</h4>
                    <p>Measures how "mixed" a group is</p>
                    <ul>
                        <li>0 = Pure (all same class)</li>
                        <li>0.5 = Maximum impurity</li>
                        <li>Lower is better</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Information Gain</h4>
                    <p>Reduction in impurity after split</p>
                    <ul>
                        <li>Higher gain = better split</li>
                        <li>Choose feature with highest gain</li>
                        <li>Continue until pure or max depth</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Slide 10: Interactive Tree Building -->
        <div class="slide">
            <h2>Build a Decision Tree: Interactive Demo</h2>
            <div class="interactive-demo">
                <p>Watch how a decision tree is built step-by-step for loan approval:</p>
                
                <div class="demo-controls">
                    <button class="demo-btn" onclick="startTreeDemo()">Start Demo</button>
                    <button class="demo-btn" onclick="nextTreeStep()">Next Step</button>
                    <button class="demo-btn" onclick="resetTreeDemo()">Reset</button>
                </div>
                
                <div id="tree-building-viz" style="min-height: 400px;"></div>
                
                <div id="step-explanation" style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px; display: none;">
                    <h4>Current Step:</h4>
                    <p id="step-text"></p>
                </div>
            </div>
        </div>
        
        <!-- Slide 11: Decision Tree Use Cases -->
        <div class="slide">
            <h2>Real-World Applications of Decision Trees</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Healthcare: Diagnosis Support</h4>
                    <ul>
                        <li>Symptom-based disease prediction</li>
                        <li>Treatment recommendation</li>
                        <li>Risk assessment for conditions</li>
                        <li><strong>Why?</strong> Doctors can verify reasoning</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Finance: Credit Scoring</h4>
                    <ul>
                        <li>Loan approval decisions</li>
                        <li>Default risk prediction</li>
                        <li>Fraud detection</li>
                        <li><strong>Why?</strong> Regulatory compliance needs</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Marketing: Customer Segmentation</h4>
                    <ul>
                        <li>Churn prediction</li>
                        <li>Campaign targeting</li>
                        <li>Product recommendations</li>
                        <li><strong>Why?</strong> Clear actionable insights</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Operations: Quality Control</h4>
                    <ul>
                        <li>Defect prediction</li>
                        <li>Maintenance scheduling</li>
                        <li>Process optimization</li>
                        <li><strong>Why?</strong> Easy to implement rules</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Slide 12: Evaluating Decision Trees -->
        <div class="slide">
            <h2>Evaluating Decision Tree Performance</h2>
            
            <div class="sample-data">
                <h3>Confusion Matrix Example</h3>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Predicted: No Churn</th>
                            <th>Predicted: Churn</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Actual: No Churn</strong></td>
                            <td style="background: #d4edda;">850 (True Negative)</td>
                            <td style="background: #f8d7da;">50 (False Positive)</td>
                        </tr>
                        <tr>
                            <td><strong>Actual: Churn</strong></td>
                            <td style="background: #f8d7da;">30 (False Negative)</td>
                            <td style="background: #d4edda;">70 (True Positive)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="workflow-container">
                <div class="workflow-step">
                    <h4>Accuracy</h4>
                    <p><strong>92%</strong></p>
                    <p>(850+70)/1000</p>
                </div>
                <div class="workflow-step">
                    <h4>Precision</h4>
                    <p><strong>58.3%</strong></p>
                    <p>70/(70+50)</p>
                </div>
                <div class="workflow-step">
                    <h4>Recall</h4>
                    <p><strong>70%</strong></p>
                    <p>70/(70+30)</p>
                </div>
                <div class="workflow-step">
                    <h4>F1 Score</h4>
                    <p><strong>63.6%</strong></p>
                    <p>Harmonic mean</p>
                </div>
            </div>
        </div>
        
        <!-- Slide 13: Optimizing Decision Trees -->
        <div class="slide">
            <h2>Optimizing Decision Trees: Preventing Overfitting</h2>
            
            <div class="tree-visual" id="overfitting-demo"></div>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Signs of Overfitting</h4>
                    <ul>
                        <li>Very deep trees (many levels)</li>
                        <li>Leaves with few samples</li>
                        <li>Perfect training accuracy</li>
                        <li>Poor test performance</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Prevention Techniques</h4>
                    <ul>
                        <li><strong>Max depth:</strong> Limit tree levels</li>
                        <li><strong>Min samples split:</strong> Require minimum data</li>
                        <li><strong>Min samples leaf:</strong> Ensure robust predictions</li>
                        <li><strong>Pruning:</strong> Remove unnecessary branches</li>
                    </ul>
                </div>
            </div>
            
            <div class="recap-box">
                <p><strong>Remember:</strong> A simpler tree that generalizes well is better than a complex tree that memorizes training data.</p>
            </div>
        </div>
        
        <!-- Slide 14: Interactive Exercise -->
        <div class="slide">
            <h2>Your Turn: Build a Decision Tree</h2>
            <div class="interactive-demo">
                <p>Given this customer data, determine the best first split for predicting subscription renewal:</p>
                
                <div class="sample-data">
                    <table id="exercise-data">
                        <thead>
                            <tr>
                                <th>Usage (hours/month)</th>
                                <th>Account Age (years)</th>
                                <th>Premium Features</th>
                                <th>Renewed?</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>&gt; 20</td>
                                <td>&gt; 2</td>
                                <td>Yes</td>
                                <td style="color: green;">Yes</td>
                            </tr>
                            <tr>
                                <td>&lt; 20</td>
                                <td>&lt; 2</td>
                                <td>No</td>
                                <td style="color: red;">No</td>
                            </tr>
                            <tr>
                                <td>&gt; 20</td>
                                <td>&lt; 2</td>
                                <td>Yes</td>
                                <td style="color: green;">Yes</td>
                            </tr>
                            <tr>
                                <td>&lt; 20</td>
                                <td>&gt; 2</td>
                                <td>No</td>
                                <td style="color: red;">No</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 20px;">
                    <p>Which feature should be the root node (first split)?</p>
                    <select id="split-choice" style="padding: 10px; font-size: 1em;">
                        <option value="">Choose a feature...</option>
                        <option value="usage">Usage Hours</option>
                        <option value="age">Account Age</option>
                        <option value="premium">Premium Features</option>
                    </select>
                    <button class="demo-btn" onclick="checkSplit()">Check Answer</button>
                </div>
                
                <div id="split-feedback" class="feedback" style="margin-top: 20px;"></div>
            </div>
        </div>
        
        <!-- Slide 15: Introduction to Random Forests -->
        <div class="slide">
            <h2>Random Forests: The Power of Many Trees</h2>
            <p>What if instead of relying on one decision tree, we asked 100 trees and took a vote?</p>
            
            <div class="forest-visualization">
                <div class="mini-tree">Tree 1<br>Vote: Yes</div>
                <div class="mini-tree">Tree 2<br>Vote: No</div>
                <div class="mini-tree">Tree 3<br>Vote: Yes</div>
                <div class="mini-tree">Tree 4<br>Vote: Yes</div>
                <div class="mini-tree">Tree 5<br>Vote: Yes</div>
            </div>
            
            <div class="vote-result">
                Final Prediction: YES (4 out of 5 trees agree)
            </div>
            
            <div class="recap-box">
                <p><strong>Key Insight:</strong> Multiple diverse trees make better predictions than any single tree - this is called ensemble learning.</p>
            </div>
        </div>
        
        <!-- Slide 16: How Random Forests Work -->
        <div class="slide">
            <h2>Building a Random Forest: Two Types of Randomness</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>1. Bootstrap Sampling</h4>
                    <p>Each tree trains on different random sample of data</p>
                    <ul>
                        <li>Sample with replacement</li>
                        <li>Same size as original dataset</li>
                        <li>~63% unique samples per tree</li>
                        <li>Creates diverse training sets</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>2. Random Feature Selection</h4>
                    <p>Each split considers random subset of features</p>
                    <ul>
                        <li>Typically √(total features)</li>
                        <li>Different features at each node</li>
                        <li>Reduces correlation between trees</li>
                        <li>Prevents dominant features</li>
                    </ul>
                </div>
            </div>
            
            <div class="workflow-container" style="margin-top: 30px;">
                <div class="workflow-step">
                    <h4>Step 1</h4>
                    <p>Create bootstrap sample</p>
                </div>
                <div class="workflow-step">
                    <h4>Step 2</h4>
                    <p>Build tree with random features</p>
                </div>
                <div class="workflow-step">
                    <h4>Step 3</h4>
                    <p>Repeat for many trees</p>
                </div>
                <div class="workflow-step">
                    <h4>Step 4</h4>
                    <p>Aggregate predictions</p>
                </div>
            </div>
        </div>
        
        <!-- Slide 17: Random Forest Advantages -->
        <div class="slide">
            <h2>Why Random Forests Excel</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Single Decision Tree</h4>
                    <ul>
                        <li>✓ Easy to interpret</li>
                        <li>✓ Fast to train</li>
                        <li>✗ Prone to overfitting</li>
                        <li>✗ High variance</li>
                        <li>✗ Sensitive to small changes</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Random Forest</h4>
                    <ul>
                        <li>✓ Excellent accuracy</li>
                        <li>✓ Handles overfitting well</li>
                        <li>✓ Robust to outliers</li>
                        <li>✓ Feature importance scores</li>
                        <li>✗ Less interpretable</li>
                    </ul>
                </div>
            </div>
            
            <div class="sample-data">
                <h3>Performance Comparison</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Single Tree</th>
                            <th>Random Forest (100 trees)</th>
                            <th>Improvement</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Training Accuracy</td>
                            <td>95%</td>
                            <td>93%</td>
                            <td>-2%</td>
                        </tr>
                        <tr>
                            <td>Test Accuracy</td>
                            <td>82%</td>
                            <td>91%</td>
                            <td style="color: green;">+9%</td>
                        </tr>
                        <tr>
                            <td>Variance</td>
                            <td>High</td>
                            <td>Low</td>
                            <td style="color: green;">Better</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Slide 18: Out-of-Bag Error -->
        <div class="slide">
            <h2>Random Forest Magic: Out-of-Bag (OOB) Error</h2>
            <p>Random Forests have a built-in validation mechanism!</p>
            
            <div class="interactive-demo">
                <h3>How OOB Works</h3>
                <div class="workflow-container">
                    <div class="workflow-step">
                        <h4>Bootstrap Sample</h4>
                        <p>~37% of data not selected</p>
                    </div>
                    <div class="workflow-step">
                        <h4>Train Tree</h4>
                        <p>Use selected 63%</p>
                    </div>
                    <div class="workflow-step">
                        <h4>Test on OOB</h4>
                        <p>Use remaining 37%</p>
                    </div>
                    <div class="workflow-step">
                        <h4>Average OOB Error</h4>
                        <p>Estimate performance</p>
                    </div>
                </div>
                
                <div class="recap-box" style="margin-top: 20px;">
                    <p><strong>Benefit:</strong> Get validation score without separate test set - each sample is OOB for ~37% of trees!</p>
                </div>
            </div>
        </div>
        
        <!-- Slide 19: Feature Importance -->
        <div class="slide">
            <h2>Understanding What Matters: Feature Importance</h2>
            <p>Random Forests tell us which features contribute most to predictions:</p>
            
            <div class="sample-data">
                <h3>Customer Churn Prediction - Feature Importance</h3>
                <div id="feature-importance-chart" style="height: 400px;"></div>
            </div>
            
            <div class="comparison-grid" style="margin-top: 20px;">
                <div class="comparison-item">
                    <h4>How It's Calculated</h4>
                    <ul>
                        <li>Track improvement from each feature</li>
                        <li>Average across all trees</li>
                        <li>Normalize to sum to 100%</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Business Value</h4>
                    <ul>
                        <li>Focus on important factors</li>
                        <li>Guide data collection efforts</li>
                        <li>Inform business strategy</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Slide 20: Random Forest Applications -->
        <div class="slide">
            <h2>Random Forest in Action: Real-World Success Stories</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>Netflix: Content Recommendation</h4>
                    <ul>
                        <li>Predicts user preferences</li>
                        <li>Handles diverse viewing patterns</li>
                        <li>Captures complex interactions</li>
                        <li><strong>Result:</strong> 80% of views from recommendations</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Banking: Fraud Detection</h4>
                    <ul>
                        <li>Identifies unusual transactions</li>
                        <li>Adapts to new fraud patterns</li>
                        <li>Low false positive rate</li>
                        <li><strong>Result:</strong> 95% fraud caught, 2% false alarms</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>Healthcare: Disease Risk</h4>
                    <ul>
                        <li>Combines multiple risk factors</li>
                        <li>Handles missing data well</li>
                        <li>Provides confidence scores</li>
                        <li><strong>Result:</strong> Early intervention saves lives</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>E-commerce: Sales Forecasting</h4>
                    <ul>
                        <li>Captures seasonality</li>
                        <li>Handles product interactions</li>
                        <li>Robust to outliers</li>
                        <li><strong>Result:</strong> 20% reduction in stockouts</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Slide 21: When to Use Each -->
        <div class="slide">
            <h2>Decision Guide: Single Tree vs Random Forest</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item" style="background: #e8f8f5;">
                    <h4>Use Decision Trees When:</h4>
                    <ul>
                        <li>Interpretability is critical</li>
                        <li>Need to explain every decision</li>
                        <li>Simple rules are sufficient</li>
                        <li>Limited computational resources</li>
                        <li>Real-time predictions needed</li>
                        <li>Regulatory compliance requires transparency</li>
                    </ul>
                </div>
                <div class="comparison-item" style="background: #fef9e7;">
                    <h4>Use Random Forests When:</h4>
                    <ul>
                        <li>Accuracy is top priority</li>
                        <li>Complex patterns in data</li>
                        <li>Many features available</li>
                        <li>Can handle longer training time</li>
                        <li>Need robust predictions</li>
                        <li>Feature importance analysis needed</li>
                    </ul>
                </div>
            </div>
            
            <div class="recap-box">
                <p><strong>Pro Tip:</strong> Start with a decision tree to understand your data, then upgrade to Random Forest for production if accuracy matters more than interpretability.</p>
            </div>
        </div>
        
        <!-- Slide 22: Summary -->
        <div class="slide">
            <h2>Key Takeaways</h2>
            
            <div class="agenda-list">
                <h3>Decision Trees</h3>
                <ul style="list-style: none;">
                    <li>✓ Make predictions through series of yes/no questions</li>
                    <li>✓ Highly interpretable - can trace any decision</li>
                    <li>✓ Work with both numerical and categorical data</li>
                    <li>✓ Prone to overfitting - need careful tuning</li>
                </ul>
                
                <h3 style="margin-top: 30px;">Random Forests</h3>
                <ul style="list-style: none;">
                    <li>✓ Combine many decision trees for better accuracy</li>
                    <li>✓ Use randomness to create diverse trees</li>
                    <li>✓ Robust to overfitting and outliers</li>
                    <li>✓ Provide feature importance scores</li>
                    <li>✓ Trade interpretability for performance</li>
                </ul>
                
                <h3 style="margin-top: 30px;">Remember</h3>
                <p style="font-style: italic;">"A forest of diverse opinions beats a single expert - in machine learning and in life!"</p>
            </div>
        </div>
        
        <!-- Slide 23: Thank You -->
        <div class="slide">
            <h1 style="color: #3498db;">Thank You!</h1>
            <h2 style="color: #7f8c8d;">Week 3: Decision Trees and Random Forests</h2>
            <div style="margin-top: 50px;">
                <p style="font-size: 1.2em; margin-bottom: 20px;">Next Week: Unsupervised Learning - Clustering and PCA</p>
                <p style="color: #95a5a6;">Get ready to discover hidden patterns without labels!</p>
            </div>
            <div style="margin-top: 40px; color: #bdc3c7;">
                <p>DATA4800 - Artificial Intelligence and Machine Learning</p>
                <p>Kaplan Business School</p>
            </div>
        </div>
    </div>
    
    <div class="navigation">
        <button class="nav-btn" id="prev-btn" onclick="previousSlide()">Previous</button>
        <span class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">23</span>
        </span>
        <button class="nav-btn" id="next-btn" onclick="nextSlide()">Next</button>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        
        document.getElementById('total-slides').textContent = totalSlides;
        
        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = n;
            if (currentSlide >= totalSlides) currentSlide = 0;
            if (currentSlide < 0) currentSlide = totalSlides - 1;
            slides[currentSlide].classList.add('active');
            document.getElementById('current-slide').textContent = currentSlide + 1;
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentSlide === 0;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;
            
            // Initialize visualizations when reaching specific slides
            if (currentSlide === 6) {
                initializeSimpleTree();
            } else if (currentSlide === 7) {
                initializeTreeComponents();
            } else if (currentSlide === 18) {
                initializeFeatureImportanceChart();
            }
        }
        
        function nextSlide() {
            showSlide(currentSlide + 1);
        }
        
        function previousSlide() {
            showSlide(currentSlide - 1);
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && currentSlide < totalSlides - 1) nextSlide();
            if (e.key === 'ArrowLeft' && currentSlide > 0) previousSlide();
        });
        
        // Fill-in-the-blank exercise
        function checkAnswers() {
            const answers = {
                blank1: 'supervised',
                blank2: '80',
                blank3: '20',
                blank4: 'classification',
                blank5: 'regression',
                blank6: 'patterns'
            };
            
            let correct = 0;
            let total = 6;
            
            for (let i = 1; i <= total; i++) {
                const input = document.getElementById(`blank${i}`);
                const userAnswer = input.value.toLowerCase().trim();
                const correctAnswer = answers[`blank${i}`];
                
                if (userAnswer === correctAnswer || 
                    (i === 4 && userAnswer === 'classification') ||
                    (i === 5 && userAnswer === 'regression')) {
                    input.style.backgroundColor = '#d4edda';
                    input.style.borderColor = '#28a745';
                    correct++;
                } else {
                    input.style.backgroundColor = '#f8d7da';
                    input.style.borderColor = '#dc3545';
                }
            }
            
            const feedback = document.getElementById('feedback');
            feedback.style.display = 'block';
            
            if (correct === total) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '🎉 Excellent! All answers are correct. You\'ve mastered the basics!';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `You got ${correct} out of ${total} correct. Review the concepts and try again!<br>
                    <small>Hint: Answers are supervised, 80, 20, classification, regression, patterns</small>`;
            }
        }
        
        // Simple tree visualization
        function initializeSimpleTree() {
            const svg = d3.select("#simple-tree")
                .html("")
                .append("svg")
                .attr("width", 600)
                .attr("height", 300);
            
            const treeData = {
                name: "Outlook?",
                children: [
                    {
                        name: "Sunny",
                        children: [
                            { name: "Humidity?", children: [
                                { name: "High → No Tennis" },
                                { name: "Normal → Play Tennis" }
                            ]}
                        ]
                    },
                    {
                        name: "Overcast",
                        children: [{ name: "Play Tennis" }]
                    },
                    {
                        name: "Rainy",
                        children: [
                            { name: "Wind?", children: [
                                { name: "Strong → No Tennis" },
                                { name: "Weak → Play Tennis" }
                            ]}
                        ]
                    }
                ]
            };
            
            const root = d3.hierarchy(treeData);
            const treeLayout = d3.tree().size([550, 200]);
            treeLayout(root);
            
            // Draw links
            svg.selectAll('.link')
                .data(root.links())
                .enter().append('path')
                .attr('class', 'link')
                .attr('d', d3.linkVertical()
                    .x(d => d.x + 25)
                    .y(d => d.y + 50));
            
            // Draw nodes
            const nodes = svg.selectAll('.node')
                .data(root.descendants())
                .enter().append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x + 25},${d.y + 50})`);
            
            nodes.append('circle')
                .attr('r', 20)
                .attr('fill', d => d.children ? '#e3f2fd' : '#e8f5e9')
                .attr('stroke', d => d.children ? '#3498db' : '#27ae60')
                .attr('stroke-width', 2);
            
            nodes.append('text')
                .attr('dy', -30)
                .style('text-anchor', 'middle')
                .text(d => d.data.name)
                .style('font-size', '14px')
                .style('fill', '#2c3e50');
        }
        
        // Tree components visualization
        function initializeTreeComponents() {
            const svg = d3.select("#tree-components")
                .html("")
                .append("svg")
                .attr("width", 700)
                .attr("height", 400);
            
            // Add labels and components
            const components = [
                { x: 350, y: 50, r: 25, label: "Root Node", color: "#e74c3c", desc: "Starting point" },
                { x: 200, y: 150, r: 20, label: "Internal Node", color: "#3498db", desc: "Decision point" },
                { x: 500, y: 150, r: 20, label: "Internal Node", color: "#3498db", desc: "Decision point" },
                { x: 100, y: 250, r: 15, label: "Leaf", color: "#27ae60", desc: "Prediction: Yes" },
                { x: 300, y: 250, r: 15, label: "Leaf", color: "#27ae60", desc: "Prediction: No" },
                { x: 450, y: 250, r: 15, label: "Leaf", color: "#27ae60", desc: "Prediction: Yes" },
                { x: 600, y: 250, r: 15, label: "Leaf", color: "#27ae60", desc: "Prediction: No" }
            ];
            
            // Draw branches
            const branches = [
                { x1: 350, y1: 75, x2: 200, y2: 130 },
                { x1: 350, y1: 75, x2: 500, y2: 130 },
                { x1: 200, y1: 170, x2: 100, y2: 235 },
                { x1: 200, y1: 170, x2: 300, y2: 235 },
                { x1: 500, y1: 170, x2: 450, y2: 235 },
                { x1: 500, y1: 170, x2: 600, y2: 235 }
            ];
            
            svg.selectAll('.branch')
                .data(branches)
                .enter().append('line')
                .attr('x1', d => d.x1)
                .attr('y1', d => d.y1)
                .attr('x2', d => d.x2)
                .attr('y2', d => d.y2)
                .attr('stroke', '#95a5a6')
                .attr('stroke-width', 2);
            
            // Draw nodes
            const nodeGroups = svg.selectAll('.component')
                .data(components)
                .enter().append('g')
                .attr('class', 'component');
            
            nodeGroups.append('circle')
                .attr('cx', d => d.x)
                .attr('cy', d => d.y)
                .attr('r', d => d.r)
                .attr('fill', d => {
                    if (d.color === '#e74c3c') return '#ffebee';  // Light red
                    if (d.color === '#3498db') return '#e3f2fd';  // Light blue
                    if (d.color === '#27ae60') return '#e8f5e9';  // Light green
                    return d.color;
                })
                .attr('stroke', d => d.color)
                .attr('stroke-width', 2);
            
            nodeGroups.append('text')
                .attr('x', d => d.x)
                .attr('y', d => d.y - d.r - 10)
                .attr('text-anchor', 'middle')
                .style('font-weight', 'bold')
                .text(d => d.label);
            
            nodeGroups.append('text')
                .attr('x', d => d.x)
                .attr('y', d => d.y + 5)
                .attr('text-anchor', 'middle')
                .style('font-size', '12px')
                .style('fill', '#2c3e50')
                .style('font-weight', 'bold')
                .text(d => d.desc);
        }
        
        // Interactive tree building demo
        let treeStep = 0;
        const treeSteps = [
            {
                nodes: [{ id: 'root', text: 'All Customers', x: 400, y: 50 }],
                explanation: "Start with all loan applications in the root node"
            },
            {
                nodes: [
                    { id: 'root', text: 'Credit Score > 650?', x: 400, y: 50 },
                    { id: 'left', text: 'Score ≤ 650', x: 200, y: 150 },
                    { id: 'right', text: 'Score > 650', x: 600, y: 150 }
                ],
                explanation: "First split: Credit score is the most important factor"
            },
            {
                nodes: [
                    { id: 'root', text: 'Credit Score > 650?', x: 400, y: 50 },
                    { id: 'left', text: 'Reject', x: 200, y: 150, final: true },
                    { id: 'right', text: 'Income > $50k?', x: 600, y: 150 },
                    { id: 'right-left', text: 'Income ≤ $50k', x: 500, y: 250 },
                    { id: 'right-right', text: 'Income > $50k', x: 700, y: 250 }
                ],
                explanation: "Left branch becomes a leaf (reject). Right branch splits on income"
            },
            {
                nodes: [
                    { id: 'root', text: 'Credit Score > 650?', x: 400, y: 50 },
                    { id: 'left', text: 'Reject', x: 200, y: 150, final: true },
                    { id: 'right', text: 'Income > $50k?', x: 600, y: 150 },
                    { id: 'right-left', text: 'Maybe', x: 500, y: 250, final: true },
                    { id: 'right-right', text: 'Approve', x: 700, y: 250, final: true }
                ],
                explanation: "Complete tree: Clear decision rules for loan approval"
            }
        ];
        
        function startTreeDemo() {
            treeStep = 0;
            updateTreeVisualization();
            document.getElementById('step-explanation').style.display = 'block';
        }
        
        function nextTreeStep() {
            if (treeStep < treeSteps.length - 1) {
                treeStep++;
                updateTreeVisualization();
            }
        }
        
        function resetTreeDemo() {
            treeStep = 0;
            updateTreeVisualization();
        }
        
        function updateTreeVisualization() {
            const step = treeSteps[treeStep];
            const svg = d3.select("#tree-building-viz")
                .html("")
                .append("svg")
                .attr("width", 800)
                .attr("height", 400);
            
            // Draw branches based on nodes
            if (treeStep > 0) {
                const branches = [];
                if (treeStep >= 1) {
                    branches.push({ x1: 400, y1: 75, x2: 200, y2: 130 });
                    branches.push({ x1: 400, y1: 75, x2: 600, y2: 130 });
                }
                if (treeStep >= 2) {
                    branches.push({ x1: 600, y1: 175, x2: 500, y2: 230 });
                    branches.push({ x1: 600, y1: 175, x2: 700, y2: 230 });
                }
                
                svg.selectAll('.branch')
                    .data(branches)
                    .enter().append('line')
                    .attr('x1', d => d.x1)
                    .attr('y1', d => d.y1)
                    .attr('x2', d => d.x2)
                    .attr('y2', d => d.y2)
                    .attr('stroke', '#95a5a6')
                    .attr('stroke-width', 2);
            }
            
            // Draw nodes
            const nodeGroups = svg.selectAll('.node')
                .data(step.nodes)
                .enter().append('g')
                .attr('class', 'node');
            
            nodeGroups.append('circle')
                .attr('cx', d => d.x)
                .attr('cy', d => d.y)
                .attr('r', 25)
                .attr('fill', d => d.final ? '#e8f5e9' : '#e3f2fd')
                .attr('stroke', d => d.final ? '#27ae60' : '#3498db')
                .attr('stroke-width', 2);
            
            nodeGroups.append('text')
                .attr('x', d => d.x)
                .attr('y', d => d.y + 5)
                .attr('text-anchor', 'middle')
                .style('font-size', '12px')
                .style('fill', '#2c3e50')
                .style('font-weight', 'bold')
                .text(d => d.text);
            
            document.getElementById('step-text').textContent = step.explanation;
        }
        
        // Check split exercise
        function checkSplit() {
            const choice = document.getElementById('split-choice').value;
            const feedback = document.getElementById('split-feedback');
            
            if (choice === 'usage') {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ Correct! Usage hours provides a perfect split - all high usage customers renewed, all low usage customers didn\'t.';
                feedback.style.display = 'block';
            } else if (choice === '') {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = 'Please select a feature to split on.';
                feedback.style.display = 'block';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '❌ Not quite. Look at the data again - which feature perfectly separates renewed vs not renewed?';
                feedback.style.display = 'block';
            }
        }
        
        // Feature importance chart
        function initializeFeatureImportanceChart() {
            const data = [
                { feature: 'Contract Type', importance: 35 },
                { feature: 'Monthly Charges', importance: 25 },
                { feature: 'Support Calls', importance: 20 },
                { feature: 'Account Age', importance: 12 },
                { feature: 'Payment Method', importance: 8 }
            ];
            
            const svg = d3.select("#feature-importance-chart")
                .html("")
                .append("svg")
                .attr("width", 700)
                .attr("height", 400);
            
            const margin = { top: 20, right: 20, bottom: 40, left: 150 };
            const width = 700 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;
            
            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            const x = d3.scaleLinear()
                .domain([0, 40])
                .range([0, width]);
            
            const y = d3.scaleBand()
                .domain(data.map(d => d.feature))
                .range([0, height])
                .padding(0.2);
            
            // Draw bars
            g.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", 0)
                .attr("y", d => y(d.feature))
                .attr("width", d => x(d.importance))
                .attr("height", y.bandwidth())
                .attr("fill", "#3498db");
            
            // Add values
            g.selectAll(".text")
                .data(data)
                .enter().append("text")
                .attr("x", d => x(d.importance) + 5)
                .attr("y", d => y(d.feature) + y.bandwidth() / 2)
                .attr("dy", ".35em")
                .style("fill", "#2c3e50")
                .text(d => d.importance + "%");
            
            // Add axes
            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).ticks(5).tickFormat(d => d + "%"));
            
            g.append("g")
                .call(d3.axisLeft(y));
            
            // Add title
            svg.append("text")
                .attr("x", 350)
                .attr("y", 15)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("font-weight", "bold")
                .style("fill", "#2c3e50")
                .text("Feature Importance in Customer Churn Model");
        }
    </script>
</body>
</html>