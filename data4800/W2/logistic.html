<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logistic Regression - Interactive Learning</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #3498db;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.24em; /* 2.8 * 0.8 */
            color: #2c3e50;
            font-weight: 300;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 0.96em; /* 1.2 * 0.8 */
            color: #7f8c8d;
        }
        
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .tab-button {
            background: #f8f9fa;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 12.8px; /* 16 * 0.8 */
            font-family: 'Helvetica', Arial, sans-serif;
            color: #495057;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
        }
        
        .tab-button:hover {
            background: #e9ecef;
            color: #2c3e50;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            min-height: 500px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 1.76em; /* 2.2 * 0.8 */
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        .section-subtitle {
            font-size: 1.28em; /* 1.6 * 0.8 */
            color: #34495e;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        
        .business-question {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .business-question h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.28em; /* 1.6 * 0.8 */
        }
        
        .dataset-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .dataset-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .dataset-table th, .dataset-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .dataset-table th {
            background: #34495e;
            color: white;
            font-weight: bold;
        }
        
        .dataset-table tr:hover {
            background: #f8f9fa;
        }
        
        .feature-column {
            background: #a8e6cf !important;
        }
        
        .target-column {
            background: #ffb3ba !important;
        }
        
        .spam-class {
            background: #fdeaea !important;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .not-spam-class {
            background: #d5f4e6 !important;
            color: #27ae60;
            font-weight: bold;
        }
        
        .visualization-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 11.2px; /* 14 * 0.8 */
            transition: all 0.3s;
            font-family: 'Helvetica', Arial, sans-serif;
        }
        
        .control-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .algorithm-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .algorithm-step {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .algorithm-step:hover {
            transform: translateY(-5px);
        }
        
        .algorithm-step h4 {
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 0.96em; /* 1.2 * 0.8 */
        }
        
        .algorithm-step p {
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .key-concepts {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .key-concepts h3 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.28em; /* 1.6 * 0.8 */
        }
        
        .concept-list {
            list-style: none;
            padding: 0;
        }
        
        .concept-list li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .concept-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #ffc107;
            font-weight: bold;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.6em; /* 2.0 * 0.8 */
            font-weight: bold;
            color: #27ae60;
            margin: 10px 0;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .legend-circle {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .back-link {
            text-align: center;
            margin: 30px 0;
        }
        
        .back-link a {
            background: #34495e;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-size: 0.88em; /* 1.1 * 0.8 */
            transition: all 0.3s;
        }
        
        .back-link a:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
        }
        
        .comparison-item h4 {
            color: #2980b9;
            margin-bottom: 15px;
            font-size: 1.04em; /* 1.3 * 0.8 */
        }
        
        .comparison-item p, .comparison-item li {
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        /* Logistic Regression Specific Styles */
        .slider-container {
            margin: 20px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #e9ecef;
            border-radius: 4px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
        }
        
        .chart-container {
            height: 450px;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 2px solid #e9ecef;
        }
        
        .chart-legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #3498db;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 0.88em; /* 1.1 * 0.8 */
        }
        
        .legend-shape {
            width: 16px;
            height: 16px;
            margin-right: 10px;
        }
        
        .equation-display {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.04em; /* 1.3 * 0.8 */
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            color: #27ae60;
        }
        
        .probability-display {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.96em; /* 1.2 * 0.8 */
            margin: 20px 0;
            color: #1976d2;
        }
        
        p {
            font-size: 0.88em; /* 1.1 * 0.8 */
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-button {
                flex: none;
                min-width: none;
            }
            
            .algorithm-steps {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Logistic Regression</h1>
            <p>Predicting Probabilities and Making Binary Decisions</p>
        </div>
        
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('business')">Business Scenario</button>
                <button class="tab-button" onclick="showTab('what-is')">What is Logistic Regression</button>
                <button class="tab-button" onclick="showTab('interactive')">Interactive Demo</button>
                <button class="tab-button" onclick="showTab('how-works')">How It Works</button>
                <button class="tab-button" onclick="showTab('evaluation')">Performance</button>
                <button class="tab-button" onclick="showTab('when-use')">When to Use</button>
            </div>
            
            <!-- Tab 1: Business Scenario -->
            <div id="business" class="tab-content active">
                <h2 class="section-title">Business Scenario: Email Spam Detection</h2>
                
                <div class="business-question">
                    <h3>Business Question</h3>
                    <p>"Can we automatically detect spam emails based on their characteristics? We need a model that not only classifies emails but also provides confidence levels (probabilities) for each decision."</p>
                </div>
                
                <h3 class="section-subtitle">Our Dataset: Email Characteristics and Classifications</h3>
                <p>We have data from emails showing their characteristics and whether they were classified as spam or not:</p>
                
                <div class="dataset-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Email ID</th>
                                <th class="feature-column">Suspicious Words Count</th>
                                <th class="feature-column">Has Links</th>
                                <th class="feature-column">ALL CAPS %</th>
                                <th class="feature-column">Exclamation Marks</th>
                                <th class="target-column">Is Spam</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Email 1</td>
                                <td class="feature-column">2</td>
                                <td class="feature-column">No</td>
                                <td class="feature-column">5%</td>
                                <td class="feature-column">1</td>
                                <td class="not-spam-class">Not Spam</td>
                            </tr>
                            <tr>
                                <td>Email 2</td>
                                <td class="feature-column">8</td>
                                <td class="feature-column">Yes</td>
                                <td class="feature-column">45%</td>
                                <td class="feature-column">7</td>
                                <td class="spam-class">Spam</td>
                            </tr>
                            <tr>
                                <td>Email 3</td>
                                <td class="feature-column">1</td>
                                <td class="feature-column">Yes</td>
                                <td class="feature-column">2%</td>
                                <td class="feature-column">0</td>
                                <td class="not-spam-class">Not Spam</td>
                            </tr>
                            <tr>
                                <td>Email 4</td>
                                <td class="feature-column">12</td>
                                <td class="feature-column">Yes</td>
                                <td class="feature-column">70%</td>
                                <td class="feature-column">15</td>
                                <td class="spam-class">Spam</td>
                            </tr>
                            <tr>
                                <td>Email 5</td>
                                <td class="feature-column">3</td>
                                <td class="feature-column">No</td>
                                <td class="feature-column">8%</td>
                                <td class="feature-column">2</td>
                                <td class="not-spam-class">Not Spam</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #a8e6cf;"></div>
                        <span>Features (Email Characteristics)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #ffb3ba;"></div>
                        <span>Target (Spam Classification)</span>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Understanding the Data</h3>
                    <ul class="concept-list">
                        <li><strong>Features:</strong> Email characteristics that might indicate spam (suspicious words, links, formatting)</li>
                        <li><strong>Target:</strong> Binary classification - Spam or Not Spam</li>
                        <li><strong>Probability:</strong> Unlike simple yes/no, we want confidence levels (e.g., 85% chance it's spam)</li>
                        <li><strong>Goal:</strong> Automatically filter emails while providing transparency about confidence levels</li>
                    </ul>
                </div>
            </div>
            
            <!-- Tab 2: What is Logistic Regression -->
            <div id="what-is" class="tab-content">
                <h2 class="section-title">What is Logistic Regression?</h2>
                
                <p>Logistic regression is a statistical method for binary classification that predicts the probability of an outcome. Instead of predicting exact values like linear regression, it predicts the likelihood that something belongs to a particular category.</p>
                
                <div class="key-concepts">
                    <h3>Think of it Like This</h3>
                    <ul class="concept-list">
                        <li><strong>Medical Diagnosis:</strong> Not just "sick" or "healthy," but "85% chance of having the condition"</li>
                        <li><strong>Email Filter:</strong> Not just "spam" or "not spam," but "92% probability it's spam"</li>
                        <li><strong>S-Curve Shape:</strong> Creates a smooth curve that goes from 0% to 100% probability</li>
                        <li><strong>Decision Boundary:</strong> Usually at 50% - above this threshold means "yes," below means "no"</li>
                    </ul>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Linear Combination</h4>
                        <p>Combines input features: z = b₀ + b₁x₁ + b₂x₂ + ...</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Sigmoid Function</h4>
                        <p>Transforms z into probability: p = 1/(1 + e^(-z))</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Probability Output</h4>
                        <p>Always between 0 and 1 (0% to 100%)</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Decision Rule</h4>
                        <p>If p > 0.5, predict "positive class"; otherwise "negative class"</p>
                    </div>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Logistic vs Linear Regression</h4>
                        <ul>
                            <li><strong>Linear:</strong> Predicts continuous values (house prices, temperature)</li>
                            <li><strong>Logistic:</strong> Predicts probabilities for categories (spam/not spam)</li>
                            <li><strong>Linear:</strong> Straight line, can go beyond 0-100%</li>
                            <li><strong>Logistic:</strong> S-curve, always stays between 0-100%</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Why Use Logistic Regression?</h4>
                        <ul>
                            <li>Provides probability estimates, not just classifications</li>
                            <li>Fast to train and make predictions</li>
                            <li>Works well with linearly separable data</li>
                            <li>Easy to interpret coefficients</li>
                            <li>No assumptions about feature distributions</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 3: Interactive Demo -->
            <div id="interactive" class="tab-content">
                <h2 class="section-title">Interactive Logistic Regression Demo</h2>
                <p>Watch how logistic regression creates an S-curve to separate spam from non-spam emails. Adjust parameters to see how the curve changes!</p>
                
                <div class="visualization-container">
                    <div class="equation-display">
                        Probability = 1 / (1 + e^(-(<span id="intercept-value">0</span> + <span id="slope-value">1</span> × Spam Score)))
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Intercept (b₀): <span id="intercept-display">0</span></span>
                            <span>Shifts curve left/right</span>
                        </div>
                        <input type="range" min="-5" max="5" value="0" step="0.5" class="slider" id="intercept-slider">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Slope (b₁): <span id="slope-display">1</span></span>
                            <span>Controls curve steepness</span>
                        </div>
                        <input type="range" min="0.1" max="3" value="1" step="0.1" class="slider" id="slope-slider">
                    </div>
                    
                    <div class="controls">
                        <button class="control-btn" id="step-btn">Show Steps</button>
                        <button class="control-btn" id="add-point-btn">Add Email</button>
                        <button class="control-btn" id="reset-btn">Reset</button>
                    </div>
                    
                    <div class="probability-display" id="prob-display" style="display: none;">
                        <h4>Probability Calculation</h4>
                        <p id="prob-text">Click on a point to see probability calculation</p>
                    </div>
                    
                    <div class="chart-container" id="chart">
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-shape" style="background-color: #e74c3c; border-radius: 50%;"></div>
                                <div>Spam Email</div>
                            </div>
                            <div class="legend-item">
                                <div class="legend-shape" style="background-color: #27ae60; border-radius: 50%;"></div>
                                <div>Not Spam Email</div>
                            </div>
                            <div class="legend-item">
                                <div class="legend-shape" style="background-color: #3498db; height: 3px; border-radius: 0;"></div>
                                <div>Logistic Curve</div>
                            </div>
                            <div class="legend-item">
                                <div class="legend-shape" style="background-color: #f39c12; height: 2px; border-radius: 0;"></div>
                                <div>50% Decision Line</div>
                            </div>
                        </div>
                        
                        <div id="click-instruction" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(52, 152, 219, 0.9); color: white; padding: 20px; border-radius: 10px; text-align: center; font-weight: bold; display: none;">
                            Click anywhere on the chart to add a new email!
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: How It Works -->
            <div id="how-works" class="tab-content">
                <h2 class="section-title">How Logistic Regression Works</h2>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>1. Linear Combination</h4>
                        <p>Combine features with weights: z = b₀ + b₁×(suspicious words) + b₂×(has links) + ...</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>2. Apply Sigmoid Function</h4>
                        <p>Transform z to probability using: p = 1/(1 + e^(-z))</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>3. Interpret Probability</h4>
                        <p>Result is between 0 and 1, representing likelihood of being in positive class</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>4. Make Decision</h4>
                        <p>If p > 0.5, classify as positive (spam); if p ≤ 0.5, classify as negative (not spam)</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>5. Learn from Data</h4>
                        <p>Adjust coefficients to maximize likelihood of observed outcomes</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>The Sigmoid Function Explained</h3>
                    <ul class="concept-list">
                        <li><strong>S-Shape:</strong> Creates a smooth curve that gradually transitions from 0 to 1</li>
                        <li><strong>Never Extreme:</strong> Output is always between 0% and 100%, never outside this range</li>
                        <li><strong>Steep Middle:</strong> Small changes near the decision boundary create large probability changes</li>
                        <li><strong>Flat Ends:</strong> Very positive or negative inputs approach 100% or 0% certainty</li>
                    </ul>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Interpreting Coefficients</h4>
                        <ul>
                            <li><strong>Positive Coefficient:</strong> Higher feature value increases probability of positive class</li>
                            <li><strong>Negative Coefficient:</strong> Higher feature value decreases probability of positive class</li>
                            <li><strong>Large Coefficient:</strong> Feature has strong influence on prediction</li>
                            <li><strong>Small Coefficient:</strong> Feature has weak influence on prediction</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Training Process</h4>
                        <ul>
                            <li><strong>Maximum Likelihood:</strong> Find coefficients that best explain observed data</li>
                            <li><strong>Iterative Process:</strong> Gradually adjust coefficients to improve fit</li>
                            <li><strong>No Closed Form:</strong> Unlike linear regression, requires iterative algorithms</li>
                            <li><strong>Convergence:</strong> Process stops when improvements become minimal</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 5: Performance Evaluation -->
            <div id="evaluation" class="tab-content">
                <h2 class="section-title">Model Performance Evaluation</h2>
                <p>Let's evaluate how well our logistic regression model performs on the email spam detection task:</p>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>Accuracy</h4>
                        <div class="metric-value">94%</div>
                        <p>Correctly classified 188 out of 200 emails</p>
                    </div>
                    <div class="metric-card">
                        <h4>Precision</h4>
                        <div class="metric-value">92%</div>
                        <p>Of emails flagged as spam, 92% were actually spam</p>
                    </div>
                    <div class="metric-card">
                        <h4>Recall</h4>
                        <div class="metric-value">89%</div>
                        <p>Caught 89% of all actual spam emails</p>
                    </div>
                    <div class="metric-card">
                        <h4>AUC-ROC</h4>
                        <div class="metric-value">0.95</div>
                        <p>Excellent discrimination between spam and not spam</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>What These Results Mean for Business</h3>
                    <ul class="concept-list">
                        <li><strong>High Accuracy (94%):</strong> Model correctly identifies most emails, reducing manual review</li>
                        <li><strong>Excellent Precision (92%):</strong> Few legitimate emails are incorrectly marked as spam</li>
                        <li><strong>Strong Recall (89%):</strong> Catches most spam emails, protecting users effectively</li>
                        <li><strong>Probability Output:</strong> Provides confidence levels for better decision making</li>
                    </ul>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Business Impact</h4>
                        <ul>
                            <li><strong>User Protection:</strong> 94% accuracy significantly reduces spam exposure</li>
                            <li><strong>False Positive Control:</strong> 92% precision minimizes blocked legitimate emails</li>
                            <li><strong>Transparency:</strong> Probability scores help users understand system confidence</li>
                            <li><strong>Threshold Adjustment:</strong> Can tune decision boundary based on business needs</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Probability Calibration</h4>
                        <ul>
                            <li><strong>Well-Calibrated:</strong> 80% probability emails are spam about 80% of the time</li>
                            <li><strong>Confidence Levels:</strong> 
                                <ul>
                                    <li>95%+ probability: Very high confidence</li>
                                    <li>70-95%: High confidence</li>
                                    <li>50-70%: Moderate confidence</li>
                                    <li><50%: Likely not spam</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 6: When to Use -->
            <div id="when-use" class="tab-content">
                <h2 class="section-title">When to Use Logistic Regression</h2>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Perfect for Logistic Regression</h4>
                        <ul>
                            <li><strong>Binary classification</strong> - yes/no, pass/fail, spam/not spam</li>
                            <li><strong>Need probabilities</strong> - want confidence levels, not just classifications</li>
                            <li><strong>Linear relationships</strong> - features have linear relationship with log-odds</li>
                            <li><strong>Fast predictions</strong> - real-time applications requiring quick decisions</li>
                            <li><strong>Interpretable results</strong> - need to explain how decisions are made</li>
                            <li><strong>Baseline model</strong> - good starting point for classification problems</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Consider Other Methods When</h4>
                        <ul>
                            <li><strong>Non-linear patterns</strong> - complex relationships between features</li>
                            <li><strong>Multiple classes</strong> - more than two categories to predict</li>
                            <li><strong>Large feature interactions</strong> - many complex feature combinations</li>
                            <li><strong>Very large datasets</strong> - might need more sophisticated methods</li>
                            <li><strong>Perfect separation</strong> - classes are perfectly separable (causes numerical issues)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Business Applications</h4>
                        <p>Marketing response prediction, medical diagnosis, credit approval, fraud detection</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Alternative Algorithms</h4>
                        <p>Random Forest for non-linear patterns, SVM for complex boundaries, Neural Networks for deep patterns</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Extensions</h4>
                        <p>Multinomial logistic for multiple classes, regularized logistic (Ridge/Lasso) for many features</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Decision Framework: Choose Logistic Regression When</h3>
                    <ul class="concept-list">
                        <li><strong>Problem Type:</strong> Binary classification with need for probability estimates</li>
                        <li><strong>Data Characteristics:</strong> Linear relationship between features and log-odds</li>
                        <li><strong>Speed Requirements:</strong> Need fast training and prediction times</li>
                        <li><strong>Interpretability:</strong> Must explain how features influence predictions</li>
                        <li><strong>Baseline Need:</strong> Want a simple, reliable starting point</li>
                        <li><strong>Probability Importance:</strong> Business decisions depend on confidence levels</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="back-link">
            <a href="#" onclick="history.back()">← Back to Main Presentation</a>
        </div>
    </div>

    <script>
        // Sample dataset - [spam_score, is_spam] where spam_score is a composite measure
        const dataset = [
            [1.2, 0],   // Low spam score, not spam
            [2.1, 0],   // Low spam score, not spam
            [1.8, 0],   // Low spam score, not spam
            [2.5, 0],   // Medium-low spam score, not spam
            [3.2, 0],   // Medium spam score, not spam
            [6.1, 1],   // High spam score, spam
            [7.2, 1],   // High spam score, spam
            [5.8, 1],   // High spam score, spam
            [6.8, 1],   // High spam score, spam
            [8.1, 1],   // Very high spam score, spam
            [3.8, 0],   // Medium spam score, not spam
            [4.2, 1],   // Medium spam score, spam (borderline case)
            [5.1, 1],   // Medium-high spam score, spam
            [2.8, 0],   // Medium-low spam score, not spam
            [7.5, 1]    // High spam score, spam
        ];
        
        // Tab functionality
        function showTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'interactive' && !document.querySelector('#chart svg')) {
                setTimeout(() => {
                    initializeVisualization();
                }, 100);
            }
        }
        
        // Logistic regression variables
        let svg, xScale, yScale, intercept = 0, slope = 1;
        let currentStep = 0;
        let addingPoint = false;
        
        function initializeVisualization() {
            const container = d3.select("#chart");
            container.selectAll("svg").remove();
            
            const margin = { top: 40, right: 120, bottom: 60, left: 60 };
            const width = 500 - margin.left - margin.right;
            const height = 450 - margin.top - margin.bottom;
            
            xScale = d3.scaleLinear()
                .domain([0, 10])
                .range([0, width]);
            
            yScale = d3.scaleLinear()
                .domain([0, 1])
                .range([height, 0]);
            
            svg = container.append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Add axes
            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(xScale).ticks(5));
            
            svg.append("g")
                .call(d3.axisLeft(yScale).ticks(5).tickFormat(d => (d * 100) + "%"));
            
            // Add labels
            svg.append("text")
                .attr("transform", `translate(${width/2}, ${height + 45})`)
                .style("text-anchor", "middle")
                .style("fill", "#3498db")
                .style("font-weight", "bold")
                .style("font-size", "12px")
                .text("Spam Score (composite of email features)");
            
            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -40)
                .attr("x", -height/2)
                .style("text-anchor", "middle")
                .style("fill", "#3498db")
                .style("font-weight", "bold")
                .style("font-size", "12px")
                .text("Probability of Being Spam");
            
            // Add title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", -15)
                .attr("text-anchor", "middle")
                .style("font-size", "14px")
                .style("fill", "#2c3e50")
                .style("font-weight", "bold")
                .text("Logistic Regression: Email Spam Detection");
            
            // Draw horizontal line at 50%
            svg.append("line")
                .attr("class", "decision-line")
                .attr("x1", 0)
                .attr("y1", yScale(0.5))
                .attr("x2", width)
                .attr("y2", yScale(0.5))
                .attr("stroke", "#f39c12")
                .attr("stroke-width", 2)
                .attr("stroke-dasharray", "5,5");
            
            // Add 50% label
            svg.append("text")
                .attr("x", width - 5)
                .attr("y", yScale(0.5) - 5)
                .attr("text-anchor", "end")
                .style("fill", "#f39c12")
                .style("font-weight", "bold")
                .style("font-size", "12px")
                .text("50% Decision Boundary");
            
            drawLogisticCurve();
            drawDataPoints();
            setupLogisticEventListeners();
        }
        
        function sigmoid(x) {
            return 1 / (1 + Math.exp(-(intercept + slope * x)));
        }
        
        function drawLogisticCurve() {
            // Remove existing curve
            svg.selectAll(".logistic-curve").remove();
            
            // Generate curve points
            const curveData = [];
            for (let x = 0; x <= 10; x += 0.1) {
                curveData.push([x, sigmoid(x)]);
            }
            
            const line = d3.line()
                .x(d => xScale(d[0]))
                .y(d => yScale(d[1]))
                .curve(d3.curveCardinal);
            
            svg.append("path")
                .datum(curveData)
                .attr("class", "logistic-curve")
                .attr("fill", "none")
                .attr("stroke", "#3498db")
                .attr("stroke-width", 3)
                .attr("d", line);
        }
        
        function drawDataPoints() {
            svg.selectAll(".data-point").remove();
            
            svg.selectAll(".data-point")
                .data(dataset)
                .enter()
                .append("circle")
                .attr("class", "data-point")
                .attr("cx", d => xScale(d[0]))
                .attr("cy", d => yScale(d[1]))
                .attr("r", 6)
                .attr("fill", d => d[1] === 1 ? "#e74c3c" : "#27ae60")
                .attr("stroke", "#fff")
                .attr("stroke-width", 2)
                .style("cursor", "pointer")
                .on("click", function(event, d) {
                    showProbabilityCalculation(d[0], d[1]);
                });
        }
        
        function showProbabilityCalculation(spamScore, actualClass) {
            const probability = sigmoid(spamScore);
            const prediction = probability > 0.5 ? 1 : 0;
            const actualLabel = actualClass === 1 ? "Spam" : "Not Spam";
            const predictedLabel = prediction === 1 ? "Spam" : "Not Spam";
            const correct = prediction === actualClass ? "✓ Correct" : "✗ Incorrect";
            
            document.getElementById("prob-display").style.display = "block";
            document.getElementById("prob-text").innerHTML = `
                <strong>Email with Spam Score: ${spamScore}</strong><br>
                Calculation: 1 / (1 + e^(-${intercept} + ${slope} × ${spamScore})) = <strong>${(probability * 100).toFixed(1)}%</strong><br>
                Prediction: <strong>${predictedLabel}</strong> (threshold: 50%)<br>
                Actual: <strong>${actualLabel}</strong><br>
                Result: <span style="color: ${correct.includes('✓') ? '#27ae60' : '#e74c3c'}">${correct}</span>
            `;
        }
        
        function setupLogisticEventListeners() {
            document.getElementById("intercept-slider").addEventListener("input", function() {
                intercept = parseFloat(this.value);
                document.getElementById("intercept-display").textContent = intercept;
                document.getElementById("intercept-value").textContent = intercept;
                drawLogisticCurve();
                document.getElementById("prob-display").style.display = "none";
            });
            
            document.getElementById("slope-slider").addEventListener("input", function() {
                slope = parseFloat(this.value);
                document.getElementById("slope-display").textContent = slope;
                document.getElementById("slope-value").textContent = slope;
                drawLogisticCurve();
                document.getElementById("prob-display").style.display = "none";
            });
            
            document.getElementById("step-btn").addEventListener("click", function() {
                showSteps();
            });
            
            document.getElementById("add-point-btn").addEventListener("click", function() {
                if (!addingPoint) {
                    addingPoint = true;
                    this.textContent = "Click on chart to add email";
                    this.style.background = "#e74c3c";
                    document.getElementById("click-instruction").style.display = "block";
                    
                    svg.append("rect")
                        .attr("class", "click-overlay")
                        .attr("width", xScale.range()[1])
                        .attr("height", yScale.range()[0])
                        .attr("fill", "transparent")
                        .style("cursor", "crosshair")
                        .on("click", function(event) {
                            const [mouseX, mouseY] = d3.pointer(event);
                            const spamScore = Math.max(0, Math.min(10, xScale.invert(mouseX)));
                            const probability = sigmoid(spamScore);
                            const isSpam = Math.random() < probability ? 1 : 0;
                            
                            // Add new point to dataset
                            dataset.push([spamScore, isSpam]);
                            
                            // Redraw points
                            drawDataPoints();
                            
                            // Reset button
                            document.getElementById("add-point-btn").textContent = "Add Email";
                            document.getElementById("add-point-btn").style.background = "#3498db";
                            document.getElementById("click-instruction").style.display = "none";
                            addingPoint = false;
                            
                            // Remove overlay
                            svg.select(".click-overlay").remove();
                            
                            // Show calculation for new point
                            showProbabilityCalculation(spamScore, isSpam);
                        });
                }
            });
            
            document.getElementById("reset-btn").addEventListener("click", function() {
                intercept = 0;
                slope = 1;
                document.getElementById("intercept-slider").value = intercept;
                document.getElementById("slope-slider").value = slope;
                document.getElementById("intercept-display").textContent = intercept;
                document.getElementById("slope-display").textContent = slope;
                document.getElementById("intercept-value").textContent = intercept;
                document.getElementById("slope-value").textContent = slope;
                
                // Reset dataset to original
                dataset.length = 15; // Keep only original 15 points
                
                drawLogisticCurve();
                drawDataPoints();
                document.getElementById("prob-display").style.display = "none";
                
                if (addingPoint) {
                    addingPoint = false;
                    document.getElementById("add-point-btn").textContent = "Add Email";
                    document.getElementById("add-point-btn").style.background = "#3498db";
                    document.getElementById("click-instruction").style.display = "none";
                    svg.select(".click-overlay").remove();
                }
            });
        }
        
        function showSteps() {
            alert("Step-by-step demo:\n\n1. Adjust sliders to see how intercept and slope affect the S-curve\n2. Click on data points to see probability calculations\n3. Add new emails to see how they get classified\n4. The 50% line shows the decision boundary\n\nTry different parameter values to see how the curve changes!");
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Visualization will be initialized when interactive tab is clicked
        });
    </script>
</body>
</html>