<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Vector Machine - Interactive Learning</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #3498db;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.8em;
            color: #2c3e50;
            font-weight: 300;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            color: #7f8c8d;
        }
        
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .tab-button {
            background: #f8f9fa;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Helvetica', Arial, sans-serif;
            color: #495057;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
        }
        
        .tab-button:hover {
            background: #e9ecef;
            color: #2c3e50;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            min-height: 500px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 2.2em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        .section-subtitle {
            font-size: 1.6em;
            color: #34495e;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        
        .business-question {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .business-question h3 {
            color: white;
            margin-bottom: 15px;
        }
        
        .dataset-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .dataset-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .dataset-table th, .dataset-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }
        
        .dataset-table th {
            background: #34495e;
            color: white;
            font-weight: bold;
        }
        
        .dataset-table tr:hover {
            background: #f8f9fa;
        }
        
        .feature-column {
            background: #a8e6cf !important;
        }
        
        .target-column {
            background: #ffb3ba !important;
        }
        
        .will-buy {
            background: #d5f4e6 !important;
            color: #27ae60;
            font-weight: bold;
        }
        
        .wont-buy {
            background: #fdeaea !important;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .visualization-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            font-family: 'Helvetica', Arial, sans-serif;
        }
        
        .control-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .step-info {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .step-info h4 {
            color: #27ae60;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .algorithm-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .algorithm-step {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .algorithm-step:hover {
            transform: translateY(-5px);
        }
        
        .algorithm-step h4 {
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #27ae60;
            margin: 10px 0;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-circle {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .key-concepts {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .key-concepts h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .concept-list {
            list-style: none;
            padding: 0;
        }
        
        .concept-list li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .concept-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #ffc107;
            font-weight: bold;
        }
        
        .back-link {
            text-align: center;
            margin: 30px 0;
        }
        
        .back-link a {
            background: #34495e;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-size: 1.1em;
            transition: all 0.3s;
        }
        
        .back-link a:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
        }
        
        .comparison-item h4 {
            color: #2980b9;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        @media (max-width: 768px) {
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-button {
                flex: none;
                min-width: none;
            }
            
            .algorithm-steps {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Support Vector Machine (SVM)</h1>
            <p>Finding the Optimal Boundary to Separate Data Classes</p>
        </div>
        
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('business')">Business Scenario</button>
                <button class="tab-button" onclick="showTab('why-svm')">Why Choose SVM</button>
                <button class="tab-button" onclick="showTab('visualization')">Interactive Demo</button>
                <button class="tab-button" onclick="showTab('how-works')">How It Works</button>
                <button class="tab-button" onclick="showTab('evaluation')">Performance</button>
                <button class="tab-button" onclick="showTab('concepts')">Key Concepts</button>
                <button class="tab-button" onclick="showTab('when-use')">When to Use</button>
            </div>
            
            <!-- Tab 1: Business Scenario -->
            <div id="business" class="tab-content active">
                <h2 class="section-title">Business Scenario: Customer Purchase Prediction</h2>
                
                <div class="business-question">
                    <h3>Business Question</h3>
                    <p>"Can we predict whether a customer will make a purchase based on their age and income? We need a model that creates a clear decision boundary and works well even with complex patterns in our data."</p>
                </div>
                
                <h3 class="section-subtitle">Our Dataset: Customer Information</h3>
                <p>We have data from 200 customers with their age, income, and whether they made a purchase. Let's examine a sample:</p>
                
                <div class="dataset-table">
                    <table>
                        <thead>
                            <tr>
                                <th class="feature-column">Customer ID</th>
                                <th class="feature-column">Age</th>
                                <th class="feature-column">Income ($)</th>
                                <th class="target-column">Made Purchase</th>
                            </tr>
                        </thead>
                        <tbody id="dataset-body">
                            <!-- Dataset will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #a8e6cf;"></div>
                        <span>Features (Age, Income)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #ffb3ba;"></div>
                        <span>Target (Purchase Decision)</span>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Understanding the Data</h3>
                    <ul class="concept-list">
                        <li><strong>Features:</strong> Age and Income are our input variables that we use to make predictions</li>
                        <li><strong>Target:</strong> Made Purchase (Yes/No) is what we want to predict for new customers</li>
                        <li><strong>Pattern:</strong> Notice how purchase behavior seems to relate to both age and income levels</li>
                        <li><strong>Goal:</strong> Create a model that can predict purchase likelihood for any new customer</li>
                    </ul>
                </div>
            </div>
            
            <!-- Tab 2: Why Choose SVM -->
            <div id="why-svm" class="tab-content">
                <h2 class="section-title">Why Choose Support Vector Machine?</h2>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Complex Boundaries</h4>
                        <p>SVM can create non-linear decision boundaries when data isn't easily separable by a straight line</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Robust to Outliers</h4>
                        <p>Focuses on support vectors (key data points) and is less influenced by outliers</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>High Accuracy</h4>
                        <p>Often performs very well on classification tasks, especially with medium-sized datasets</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Clear Decision Boundary</h4>
                        <p>Creates a clear separation between classes with maximum margin for better generalization</p>
                    </div>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>SVM vs Decision Trees</h4>
                        <ul>
                            <li><strong>SVM:</strong> Better for complex patterns, less interpretable</li>
                            <li><strong>Decision Trees:</strong> Highly interpretable, but can overfit</li>
                            <li><strong>Use SVM when:</strong> You need high accuracy and data has complex relationships</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>SVM vs Logistic Regression</h4>
                        <ul>
                            <li><strong>SVM:</strong> Can handle non-linear patterns, robust to outliers</li>
                            <li><strong>Logistic Regression:</strong> Faster, provides probabilities, simpler</li>
                            <li><strong>Use SVM when:</strong> Data isn't linearly separable or has complex patterns</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 3: Interactive Visualization -->
            <div id="visualization" class="tab-content">
                <h2 class="section-title">Interactive SVM Visualization</h2>
                <p>Watch how SVM finds the optimal boundary to separate customers who will buy from those who won't:</p>
                
                <div class="visualization-container">
                    <div id="svm-chart"></div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #27ae60;"></div>
                            <span>Will Buy</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #e74c3c;"></div>
                            <span>Won't Buy</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #f39c12; border: 3px solid #d35400;"></div>
                            <span>Support Vectors</span>
                        </div>
                        <div class="legend-item">
                            <div style="width: 20px; height: 3px; background: #2980b9;"></div>
                            <span>Decision Boundary</span>
                        </div>
                        <div class="legend-item">
                            <div style="width: 20px; height: 1px; background: #95a5a6; border-top: 1px dashed #95a5a6;"></div>
                            <span>Margin</span>
                        </div>
                    </div>
                    
                    <div class="controls">
                        <button class="control-btn" onclick="resetVisualization()">Reset</button>
                        <button class="control-btn" onclick="showStep1()">1. Show Data</button>
                        <button class="control-btn" onclick="showStep2()">2. Find Boundary</button>
                        <button class="control-btn" onclick="showStep3()">3. Support Vectors</button>
                        <button class="control-btn" onclick="showStep4()">4. Show Margin</button>
                        <button class="control-btn" onclick="classifyNewPoint()">5. New Prediction</button>
                    </div>
                    
                    <div id="step-info" class="step-info" style="display: none;">
                        <h4 id="step-title">Step Information</h4>
                        <p id="step-description">Step description will appear here</p>
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: How SVM Works -->
            <div id="how-works" class="tab-content">
                <h2 class="section-title">How SVM Algorithm Works</h2>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>1. Plot Data Points</h4>
                        <p>Place all customers on a graph using their age and income as coordinates</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>2. Find Separating Line</h4>
                        <p>Look for a line that separates buyers from non-buyers with the widest possible margin</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>3. Identify Support Vectors</h4>
                        <p>Find the data points closest to the boundary - these are the "support vectors" that define the line</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>4. Maximize Margin</h4>
                        <p>Choose the line that creates the largest "margin" (empty space) between the classes</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>5. Make Predictions</h4>
                        <p>For new customers, see which side of the boundary they fall on to predict their behavior</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>The Mathematics Behind SVM (Simplified)</h3>
                    <ul class="concept-list">
                        <li><strong>Objective:</strong> Find the hyperplane that maximizes the distance between classes</li>
                        <li><strong>Support Vectors:</strong> Only the closest points matter for determining the boundary</li>
                        <li><strong>Margin:</strong> The "street width" between classes - wider is better for generalization</li>
                        <li><strong>Kernel Trick:</strong> Transform data to higher dimensions to handle complex patterns</li>
                    </ul>
                </div>
            </div>
            
            <!-- Tab 5: Performance Evaluation -->
            <div id="evaluation" class="tab-content">
                <h2 class="section-title">Model Performance Evaluation</h2>
                <p>Let's evaluate how well our SVM model performs on the customer data:</p>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>Accuracy</h4>
                        <div class="metric-value">87%</div>
                        <p>Correctly classified 174 out of 200 customers</p>
                    </div>
                    <div class="metric-card">
                        <h4>Precision</h4>
                        <div class="metric-value">85%</div>
                        <p>Of predicted buyers, 85% actually bought</p>
                    </div>
                    <div class="metric-card">
                        <h4>Recall</h4>
                        <div class="metric-value">82%</div>
                        <p>Caught 82% of actual buyers</p>
                    </div>
                    <div class="metric-card">
                        <h4>F1-Score</h4>
                        <div class="metric-value">83.5%</div>
                        <p>Balanced measure of precision and recall</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>What These Results Mean for Business</h3>
                    <ul class="concept-list">
                        <li><strong>High Accuracy (87%):</strong> The model makes correct predictions for most customers</li>
                        <li><strong>Good Precision (85%):</strong> When we predict someone will buy, we're right 85% of the time</li>
                        <li><strong>Strong Recall (82%):</strong> We successfully identify 82% of potential buyers</li>
                        <li><strong>Balanced Performance:</strong> The model works well for both identifying buyers and non-buyers</li>
                        <li><strong>Business Value:</strong> Can focus marketing efforts on high-probability customers</li>
                    </ul>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Cost of Errors</h4>
                        <ul>
                            <li><strong>False Positive:</strong> Predict purchase but customer doesn't buy (wasted marketing cost)</li>
                            <li><strong>False Negative:</strong> Miss a potential buyer (lost revenue opportunity)</li>
                            <li><strong>Business Impact:</strong> 87% accuracy means significant cost savings</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>ROI Calculation</h4>
                        <ul>
                            <li><strong>Marketing Cost:</strong> $10 per targeted customer</li>
                            <li><strong>Average Purchase:</strong> $200 profit</li>
                            <li><strong>With SVM:</strong> Target 100 customers → 85 buy → $17,000 profit - $1,000 cost = $16,000 net</li>
                            <li><strong>Without SVM:</strong> Random targeting → 50 buy → $10,000 profit - $1,000 cost = $9,000 net</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 6: Key Concepts -->
            <div id="concepts" class="tab-content">
                <h2 class="section-title">Key Concepts of Support Vector Machine</h2>
                
                <div class="key-concepts">
                    <h3>Understanding SVM Terms</h3>
                    <ul class="concept-list">
                        <li><strong>Support Vectors:</strong> The data points closest to the decision boundary that actually determine where the boundary is placed</li>
                        <li><strong>Decision Boundary:</strong> The line (or curve) that separates different classes in the data</li>
                        <li><strong>Margin:</strong> The distance between the decision boundary and the nearest data points from each class</li>
                        <li><strong>Maximum Margin:</strong> SVM finds the boundary that creates the largest possible margin, leading to better generalization</li>
                        <li><strong>Hyperplane:</strong> In higher dimensions (more than 2 features), the decision boundary becomes a hyperplane</li>
                        <li><strong>Kernel Trick:</strong> A method to handle non-linear patterns by transforming data into higher dimensions</li>
                    </ul>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Linear SVM</h4>
                        <p>Works when data can be separated by a straight line. Simple and fast.</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Polynomial Kernel</h4>
                        <p>Handles curved boundaries by considering polynomial relationships between features.</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>RBF Kernel</h4>
                        <p>Most popular kernel. Can handle very complex, non-linear patterns in data.</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Soft Margin</h4>
                        <p>Allows some misclassification to handle noisy data and avoid overfitting.</p>
                    </div>
                </div>
            </div>
            
            <!-- Tab 7: When to Use -->
            <div id="when-use" class="tab-content">
                <h2 class="section-title">When to Use SVM</h2>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Best Use Cases</h4>
                        <ul>
                            <li><strong>Medium-sized datasets</strong> (1,000 - 100,000 records)</li>
                            <li><strong>Complex patterns</strong> that aren't linearly separable</li>
                            <li><strong>High-dimensional data</strong> (many features)</li>
                            <li><strong>Need for clear boundaries</strong> between classes</li>
                            <li><strong>Text classification</strong> and document analysis</li>
                            <li><strong>Image recognition</strong> tasks</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Avoid SVM When</h4>
                        <ul>
                            <li><strong>Very large datasets</strong> (>100,000 records) - slow training</li>
                            <li><strong>Need high interpretability</strong> - SVM decisions are hard to explain</li>
                            <li><strong>Noisy data</strong> with many outliers</li>
                            <li><strong>Need probability estimates</strong> - SVM gives classifications, not probabilities</li>
                            <li><strong>Real-time predictions</strong> required - can be slow</li>
                        </ul>
                    </div>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Business Applications</h4>
                        <p>Email spam detection, credit risk assessment, medical diagnosis, fraud detection</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Technical Applications</h4>
                        <p>Text classification, image recognition, bioinformatics, web page classification</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Alternative Algorithms</h4>
                        <p>Consider Random Forest for interpretability, Neural Networks for very large datasets</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Decision Framework: Choose SVM When</h3>
                    <ul class="concept-list">
                        <li><strong>Data Size:</strong> Between 1,000 and 100,000 records</li>
                        <li><strong>Problem Type:</strong> Classification with complex patterns</li>
                        <li><strong>Accuracy Priority:</strong> High accuracy is more important than interpretability</li>
                        <li><strong>Data Quality:</strong> Clean data with few outliers</li>
                        <li><strong>Features:</strong> High-dimensional data or text/image data</li>
                        <li><strong>Performance:</strong> Can afford longer training time for better accuracy</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="back-link">
            <a href="#" onclick="history.back()">← Back to Main Presentation</a>
        </div>
    </div>

    <script>
        // Sample dataset
        const dataset = [
            {id: 1, age: 25, income: 35000, purchase: "Yes"},
            {id: 2, age: 45, income: 75000, purchase: "No"},
            {id: 3, age: 32, income: 50000, purchase: "Yes"},
            {id: 4, age: 28, income: 40000, purchase: "Yes"},
            {id: 5, age: 52, income: 85000, purchase: "No"},
            {id: 6, age: 38, income: 65000, purchase: "Yes"},
            {id: 7, age: 24, income: 30000, purchase: "No"},
            {id: 8, age: 41, income: 70000, purchase: "Yes"},
            {id: 9, age: 29, income: 42000, purchase: "Yes"},
            {id: 10, age: 55, income: 90000, purchase: "No"},
            {id: 11, age: 31, income: 48000, purchase: "Yes"},
            {id: 12, age: 26, income: 38000, purchase: "No"},
            {id: 13, age: 43, income: 72000, purchase: "Yes"},
            {id: 14, age: 35, income: 55000, purchase: "Yes"},
            {id: 15, age: 48, income: 78000, purchase: "No"}
        ];
        
        // Generate additional synthetic data points for visualization
        const generateSyntheticData = () => {
            const syntheticData = [];
            for (let i = 0; i < 50; i++) {
                const age = Math.random() * 40 + 20;
                const income = Math.random() * 80000 + 20000;
                
                let purchase = "No";
                if (income > 45000 && age >= 25 && age <= 45) {
                    purchase = Math.random() > 0.3 ? "Yes" : "No";
                } else if (income > 60000) {
                    purchase = Math.random() > 0.5 ? "Yes" : "No";
                } else {
                    purchase = Math.random() > 0.7 ? "Yes" : "No";
                }
                
                syntheticData.push({
                    id: i + 16,
                    age: Math.round(age),
                    income: Math.round(income),
                    purchase: purchase
                });
            }
            return syntheticData;
        };
        
        const allData = [...dataset, ...generateSyntheticData()];
        
        // Tab functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Initialize visualization if visualization tab is selected
            if (tabName === 'visualization' && !document.querySelector('#svm-chart svg')) {
                setTimeout(() => {
                    initializeVisualization();
                }, 100);
            }
        }
        
        // Populate dataset table
        function populateDatasetTable() {
            const tbody = document.getElementById('dataset-body');
            dataset.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="feature-column">${row.id}</td>
                    <td class="feature-column">${row.age}</td>
                    <td class="feature-column">$${row.income.toLocaleString()}</td>
                    <td class="${row.purchase === 'Yes' ? 'will-buy' : 'wont-buy'}">${row.purchase}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // D3.js Visualization
        let svg, xScale, yScale, currentStep = 0;
        
        function initializeVisualization() {
            const container = d3.select("#svm-chart");
            container.selectAll("*").remove();
            
            const margin = {top: 20, right: 20, bottom: 50, left: 60};
            const width = 700 - margin.left - margin.right;
            const height = 500 - margin.top - margin.bottom;
            
            svg = container.append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            xScale = d3.scaleLinear()
                .domain([18, 65])
                .range([0, width]);
                
            yScale = d3.scaleLinear()
                .domain([15000, 110000])
                .range([height, 0]);
            
            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(xScale))
                .append("text")
                .attr("x", width / 2)
                .attr("y", 40)
                .attr("fill", "black")
                .style("text-anchor", "middle")
                .text("Age (years)");
            
            svg.append("g")
                .call(d3.axisLeft(yScale))
                .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -40)
                .attr("x", -height / 2)
                .attr("fill", "black")
                .style("text-anchor", "middle")
                .text("Income ($)");
        }
        
        function showStepInfo(title, description) {
            document.getElementById('step-title').textContent = title;
            document.getElementById('step-description').textContent = description;
            document.getElementById('step-info').style.display = 'block';
        }
        
        function hideStepInfo() {
            document.getElementById('step-info').style.display = 'none';
        }
        
        function resetVisualization() {
            currentStep = 0;
            if (svg) {
                initializeVisualization();
            }
            hideStepInfo();
        }
        
        function showStep1() {
            if (currentStep < 1) {
                currentStep = 1;
                
                svg.selectAll(".data-point")
                    .data(allData)
                    .enter()
                    .append("circle")
                    .attr("class", "data-point")
                    .attr("cx", d => xScale(d.age))
                    .attr("cy", d => yScale(d.income))
                    .attr("r", 0)
                    .attr("fill", d => d.purchase === "Yes" ? "#27ae60" : "#e74c3c")
                    .attr("opacity", 0.7)
                    .transition()
                    .duration(1000)
                    .attr("r", 6);
                
                showStepInfo("Step 1: Data Points", 
                    "We plot each customer on the graph using their age (x-axis) and income (y-axis). Green dots represent customers who made purchases, red dots represent those who didn't.");
            }
        }
        
        function showStep2() {
            showStep1();
            if (currentStep < 2) {
                currentStep = 2;
                
                const boundaryData = [
                    {x: 20, y: 85000},
                    {x: 60, y: 25000}
                ];
                
                const line = d3.line()
                    .x(d => xScale(d.x))
                    .y(d => yScale(d.y));
                
                svg.append("path")
                    .datum(boundaryData)
                    .attr("class", "decision-boundary")
                    .attr("fill", "none")
                    .attr("stroke", "#2980b9")
                    .attr("stroke-width", 3)
                    .attr("d", line)
                    .style("opacity", 0)
                    .transition()
                    .duration(1500)
                    .style("opacity", 1);
                
                showStepInfo("Step 2: Decision Boundary", 
                    "SVM finds the optimal line that best separates the two classes. This line maximizes the distance (margin) between the closest points of each class.");
            }
        }
        
        function showStep3() {
            showStep2();
            if (currentStep < 3) {
                currentStep = 3;
                
                const supportVectors = [
                    {age: 35, income: 55000, purchase: "Yes"},
                    {age: 32, income: 50000, purchase: "Yes"},
                    {age: 45, income: 75000, purchase: "No"},
                    {age: 38, income: 65000, purchase: "Yes"},
                    {age: 42, income: 68000, purchase: "No"}
                ];
                
                svg.selectAll(".support-vector")
                    .data(supportVectors)
                    .enter()
                    .append("circle")
                    .attr("class", "support-vector")
                    .attr("cx", d => xScale(d.age))
                    .attr("cy", d => yScale(d.income))
                    .attr("r", 8)
                    .attr("fill", "#f39c12")
                    .attr("stroke", "#d35400")
                    .attr("stroke-width", 3)
                    .style("opacity", 0)
                    .transition()
                    .duration(1000)
                    .style("opacity", 0.9);
                
                showStepInfo("Step 3: Support Vectors", 
                    "Support vectors (highlighted in orange) are the data points closest to the decision boundary. These points are crucial because they determine the position and orientation of the boundary.");
            }
        }
        
        function showStep4() {
            showStep3();
            if (currentStep < 4) {
                currentStep = 4;
                
                const upperMargin = [
                    {x: 20, y: 95000},
                    {x: 60, y: 35000}
                ];
                
                const lowerMargin = [
                    {x: 20, y: 75000},
                    {x: 60, y: 15000}
                ];
                
                const line = d3.line()
                    .x(d => xScale(d.x))
                    .y(d => yScale(d.y));
                
                svg.append("path")
                    .datum(upperMargin)
                    .attr("class", "margin-line")
                    .attr("fill", "none")
                    .attr("stroke", "#95a5a6")
                    .attr("stroke-width", 2)
                    .attr("stroke-dasharray", "5,5")
                    .attr("d", line)
                    .style("opacity", 0)
                    .transition()
                    .duration(1000)
                    .style("opacity", 0.7);
                
                svg.append("path")
                    .datum(lowerMargin)
                    .attr("class", "margin-line")
                    .attr("fill", "none")
                    .attr("stroke", "#95a5a6")
                    .attr("stroke-width", 2)
                    .attr("stroke-dasharray", "5,5")
                    .attr("d", line)
                    .style("opacity", 0)
                    .transition()
                    .duration(1000)
                    .style("opacity", 0.7);
                
                showStepInfo("Step 4: Margin", 
                    "The margin is the distance between the decision boundary and the nearest data points from each class. SVM maximizes this margin to create the most robust boundary possible.");
            }
        }
        
        function classifyNewPoint() {
            showStep4();
            if (currentStep < 5) {
                currentStep = 5;
                
                const newCustomer = {age: 30, income: 52000};
                
                svg.append("circle")
                    .attr("class", "new-point")
                    .attr("cx", xScale(newCustomer.age))
                    .attr("cy", yScale(newCustomer.income))
                    .attr("r", 0)
                    .attr("fill", "#9b59b6")
                    .attr("stroke", "#8e44ad")
                    .attr("stroke-width", 3)
                    .transition()
                    .duration(1000)
                    .attr("r", 10);
                
                setTimeout(() => {
                    svg.append("text")
                        .attr("x", xScale(newCustomer.age) + 15)
                        .attr("y", yScale(newCustomer.income) - 10)
                        .attr("fill", "#8e44ad")
                        .attr("font-weight", "bold")
                        .text("New Customer")
                        .style("opacity", 0)
                        .transition()
                        .duration(500)
                        .style("opacity", 1);
                    
                    svg.append("text")
                        .attr("x", xScale(newCustomer.age) + 15)
                        .attr("y", yScale(newCustomer.income) + 10)
                        .attr("fill", "#27ae60")
                        .attr("font-weight", "bold")
                        .text("Prediction: Will Buy")
                        .style("opacity", 0)
                        .transition()
                        .duration(500)
                        .style("opacity", 1);
                }, 1000);
                
                showStepInfo("Step 5: New Prediction", 
                    "For a new customer (30 years old, $52,000 income), we see which side of the boundary they fall on. Since they're on the green side, our SVM predicts they will make a purchase.");
            }
        }
        
        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            populateDatasetTable();
        });
    </script>
</body>
</html>