<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DATA4800 Week 2: Introduction to Machine Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background: white;
            color: #333;
            overflow: hidden;
        }

        .slide-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .slide {
            display: none;
            width: 100%;
            max-width: 1200px;
            height: 100%;
            max-height: 800px;
            background: white;
            padding: 60px;
            position: relative;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
        }

        h1 {
            color: #CC0000;
            font-size: 48px;
            margin-bottom: 30px;
            text-align: center;
        }

        h2 {
            color: #CC0000;
            font-size: 36px;
            margin-bottom: 25px;
        }

        h3 {
            color: #CC0000;
            font-size: 28px;
            margin-bottom: 20px;
        }

        p, li {
            font-size: 20px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        ul {
            margin-left: 40px;
        }

        .navigation {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            font-family: 'Helvetica', Arial, sans-serif;
            background: #CC0000;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        button:hover {
            background: #990000;
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .slide-number {
            position: fixed;
            bottom: 20px;
            left: 20px;
            font-size: 18px;
            color: #666;
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 20px;
        }

        .visualization {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .quiz-container {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .quiz-option {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #CC0000;
            background: #fff5f5;
        }

        .quiz-option.correct {
            border-color: #00AA00;
            background: #f0fff0;
        }

        .quiz-option.incorrect {
            border-color: #CC0000;
            background: #fff0f0;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .highlight-box {
            background: #fff9e6;
            border-left: 4px solid #CC0000;
            padding: 20px;
            margin: 20px 0;
        }

        .formula {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 22px;
            text-align: center;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #CC0000;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .subtitle {
            font-size: 24px;
            color: #666;
            text-align: center;
            margin-top: 10px;
        }

        .logo {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 14px;
            color: #CC0000;
            font-weight: bold;
        }

        svg {
            font-family: 'Helvetica', Arial, sans-serif;
        }

        .interactive-note {
            color: #CC0000;
            font-style: italic;
            font-size: 18px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="logo">KAPLAN BUSINESS SCHOOL</div>
    <div class="slide-number">Slide <span id="current-slide">1</span> of 34</div>

    <div class="slide-container">
        <!-- Slide 1: Title -->
        <div class="slide active">
            <div class="content-area">
                <h1>DATA4800</h1>
                <h1 style="margin-top: -20px;">Artificial Intelligence and Machine Learning</h1>
                <h2 style="text-align: center; margin-top: 50px;">Workshop 2</h2>
                <h2 style="text-align: center; margin-top: 20px;">Introduction to Machine Learning</h2>
                <p class="subtitle" style="margin-top: 80px;">Term 2, 2025</p>
            </div>
        </div>

        <!-- Slide 2: Learning Outcomes -->
        <div class="slide">
            <div class="content-area">
                <h2>Learning Outcomes</h2>
                <div style="margin-top: 40px;">
                    <div style="display: flex; align-items: center; margin: 25px 0;">
                        <div style="width: 60px; height: 60px; background: #CC0000; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">1</div>
                        <p style="margin: 0; flex: 1;">Characterise machine learning with a focus on supervised learning approaches</p>
                    </div>
                    <div style="display: flex; align-items: center; margin: 25px 0;">
                        <div style="width: 60px; height: 60px; background: #CC0000; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">2</div>
                        <p style="margin: 0; flex: 1;">Explore and compare fundamental regression algorithms for prediction tasks</p>
                    </div>
                    <div style="display: flex; align-items: center; margin: 25px 0;">
                        <div style="width: 60px; height: 60px; background: #CC0000; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">3</div>
                        <p style="margin: 0; flex: 1;">Review classification algorithms including K-Nearest Neighbors and Decision Trees</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: Course Roadmap -->
        <div class="slide">
            <div class="content-area">
                <h2>DATA4800 Course Roadmap</h2>
                <svg width="100%" height="500" style="margin-top: 20px;"></svg>
            </div>
        </div>

        <!-- Slide 4: What is Machine Learning -->
        <div class="slide">
            <div class="content-area">
                <h2>What is Machine Learning?</h2>
                <div class="highlight-box" style="margin-top: 40px;">
                    <p style="font-size: 24px; line-height: 1.8;">Machine Learning is a subset of artificial intelligence that enables computer systems to <strong style="color: #CC0000;">learn from data</strong> and <strong style="color: #CC0000;">improve performance</strong> on specific tasks without being explicitly programmed for every scenario.</p>
                </div>
                <div style="margin-top: 40px;">
                    <h3>Key Characteristics:</h3>
                    <ul style="font-size: 22px; margin-top: 20px;">
                        <li>Learns patterns from historical data</li>
                        <li>Makes predictions on new, unseen data</li>
                        <li>Improves accuracy with more data and feedback</li>
                        <li>Automates decision-making processes</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 5: Types of Machine Learning -->
        <div class="slide">
            <div class="content-area">
                <h2>Types of Machine Learning</h2>
                <div id="ml-types-viz" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Slide 6: Quiz 1 - ML Types -->
        <div class="slide">
            <div class="content-area">
                <h2>Quiz 1: Understanding ML Types</h2>
                <div class="quiz-container">
                    <h3 style="margin-bottom: 20px;">A bank wants to predict whether a customer will default on a loan based on historical data of past customers (with known outcomes). Which type of machine learning is most appropriate?</h3>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 1)">
                        <strong>A.</strong> Unsupervised Learning
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, true, 1)">
                        <strong>B.</strong> Supervised Learning
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 1)">
                        <strong>C.</strong> Reinforcement Learning
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 1)">
                        <strong>D.</strong> Semi-supervised Learning
                    </div>
                    <div id="feedback-1" class="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Slide 7: Performance Factors -->
        <div class="slide">
            <div class="content-area">
                <h2>Factors Affecting ML Performance</h2>
                <p style="font-size: 22px; margin-top: 30px;">Consider autonomous vehicles as an example of machine learning in action:</p>
                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h3 style="font-size: 24px;">1. Data Quality & Quantity</h3>
                        <p>More sensors (cameras, LIDAR, radar) provide richer feedback. Higher quality data leads to better decision-making.</p>
                        <h3 style="font-size: 24px; margin-top: 30px;">2. Prior Knowledge</h3>
                        <p>Pre-existing knowledge about road rules, object recognition, and regional differences (e.g., kangaroos in Australia) improves safety.</p>
                    </div>
                    <div>
                        <h3 style="font-size: 24px;">3. Learning Algorithms</h3>
                        <p>The choice of algorithm, feature engineering, and model architecture significantly impact performance.</p>
                        <h3 style="font-size: 24px; margin-top: 30px;">4. Adaptability & Feedback</h3>
                        <p>Real-time learning from new situations and immediate feedback on decisions enables continuous improvement.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: ML Applications Across Industries -->
        <div class="slide">
            <div class="content-area">
                <h2>Machine Learning Applications</h2>
                <table style="margin-top: 30px;">
                    <thead>
                        <tr>
                            <th>Industry</th>
                            <th>Application Examples</th>
                            <th>ML Task Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Retail</strong></td>
                            <td>Product recommendations, demand forecasting, price optimization</td>
                            <td>Classification, Regression</td>
                        </tr>
                        <tr>
                            <td><strong>Healthcare</strong></td>
                            <td>Disease diagnosis, patient risk assessment, drug discovery</td>
                            <td>Classification, Clustering</td>
                        </tr>
                        <tr>
                            <td><strong>Finance</strong></td>
                            <td>Fraud detection, credit scoring, algorithmic trading</td>
                            <td>Classification, Regression</td>
                        </tr>
                        <tr>
                            <td><strong>Digital Marketing</strong></td>
                            <td>Customer segmentation, ad targeting, churn prediction</td>
                            <td>Clustering, Classification</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Slide 9: Supervised Learning Introduction -->
        <div class="slide">
            <div class="content-area">
                <h2>What is Supervised Learning?</h2>
                <div class="highlight-box" style="margin-top: 30px;">
                    <p style="font-size: 22px;">Supervised learning uses <strong style="color: #CC0000;">labelled training data</strong> to learn patterns and relationships between input features and output targets. The algorithm learns from examples where the correct answer is known.</p>
                </div>
                <div id="supervised-learning-viz" style="margin-top: 30px; height: 350px;"></div>
            </div>
        </div>

        <!-- Slide 10: Supervised Learning Details -->
        <div class="slide">
            <div class="content-area">
                <h2>Supervised Learning Process</h2>
                <div style="margin-top: 40px;">
                    <div style="background: #f9f9f9; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="font-size: 24px; margin-bottom: 15px;">Step 1: Collect Labelled Data</h3>
                        <p>Gather historical data where both inputs (features) and outputs (labels) are known. Example: Customer age, income, purchase history → Did they buy? (Yes/No)</p>
                    </div>
                    <div style="background: #f9f9f9; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="font-size: 24px; margin-bottom: 15px;">Step 2: Train the Model</h3>
                        <p>The algorithm learns patterns by finding relationships between features and labels in the training data.</p>
                    </div>
                    <div style="background: #f9f9f9; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="font-size: 24px; margin-bottom: 15px;">Step 3: Make Predictions</h3>
                        <p>Apply the trained model to new, unseen data to predict outcomes based on learned patterns.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 11: Classification Concept -->
        <div class="slide">
            <div class="content-area">
                <h2>Supervised Learning: Classification</h2>
                <p style="font-size: 22px; margin-top: 20px;">Classification is a supervised learning task where the goal is to predict <strong style="color: #CC0000;">categorical outcomes</strong> (discrete classes).</p>
                <div class="two-column" style="margin-top: 40px;">
                    <div>
                        <h3>Binary Classification</h3>
                        <ul style="font-size: 20px; margin-top: 15px;">
                            <li>Email: Spam vs. Not Spam</li>
                            <li>Medical: Disease vs. Healthy</li>
                            <li>Finance: Fraud vs. Legitimate</li>
                            <li>Customer: Churn vs. Retain</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Multi-class Classification</h3>
                        <ul style="font-size: 20px; margin-top: 15px;">
                            <li>Flower species (Iris, Rose, Tulip)</li>
                            <li>Customer segments (High, Medium, Low value)</li>
                            <li>Product categories</li>
                            <li>Sentiment (Positive, Neutral, Negative)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 12: Train/Test Split -->
        <div class="slide">
            <div class="content-area">
                <h2>Why Split Data into Training and Testing Sets?</h2>
                <div id="train-test-viz" style="margin-top: 30px; height: 400px;"></div>
                <div class="highlight-box" style="margin-top: 20px;">
                    <p style="font-size: 20px;"><strong>Key Principle:</strong> We split data to evaluate how well our model generalizes to new, unseen data. Training on all data and testing on the same data would give misleadingly high accuracy (overfitting).</p>
                </div>
            </div>
        </div>

        <!-- Slide 13: Quiz 2 - Train/Test Split -->
        <div class="slide">
            <div class="content-area">
                <h2>Quiz 2: Training and Testing</h2>
                <div class="quiz-container">
                    <h3 style="margin-bottom: 20px;">You train a model on 100% of your data and test it on the same data, achieving 99% accuracy. You then deploy it to production and find it performs poorly. What is the most likely explanation?</h3>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 2)">
                        <strong>A.</strong> The model needs more training epochs
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, true, 2)">
                        <strong>B.</strong> The model has overfit to the training data
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 2)">
                        <strong>C.</strong> The 70/30 split was incorrect
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 2)">
                        <strong>D.</strong> The model requires more features
                    </div>
                    <div id="feedback-2" class="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Slide 14: Instance-Based Learning -->
        <div class="slide">
            <div class="content-area">
                <h2>Instance-Based Learning Concept</h2>
                <div class="highlight-box" style="margin-top: 30px;">
                    <p style="font-size: 22px;"><strong>Core Idea:</strong> Similar examples should have similar labels. Classify new data points based on their similarity to training examples.</p>
                </div>
                <div style="margin-top: 40px;">
                    <h3>Key Questions:</h3>
                    <ul style="font-size: 22px; margin-top: 20px;">
                        <li><strong style="color: #CC0000;">How do we measure similarity?</strong> Distance metrics (Euclidean, Manhattan, etc.)</li>
                        <li><strong style="color: #CC0000;">How many neighbors to consider?</strong> This is the parameter 'k' in K-Nearest Neighbors</li>
                        <li><strong style="color: #CC0000;">How to resolve conflicts?</strong> Majority voting among neighbors</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 15: Regression Overview -->
        <div class="slide">
            <div class="content-area">
                <h2>Understanding Regression</h2>
                <p style="font-size: 22px; margin-top: 20px;">Regression is used when we want to predict <strong style="color: #CC0000;">continuous numerical values</strong> rather than categories.</p>
                <div style="margin-top: 40px;">
                    <table>
                        <thead>
                            <tr>
                                <th>Regression Type</th>
                                <th>Use Case</th>
                                <th>Output Range</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Linear Regression</strong></td>
                                <td>Predicting house prices, sales revenue, temperature</td>
                                <td>Continuous (-∞ to +∞)</td>
                            </tr>
                            <tr>
                                <td><strong>Logistic Regression</strong></td>
                                <td>Binary outcomes: customer churn, disease diagnosis</td>
                                <td>Probability (0 to 1)</td>
                            </tr>
                            <tr>
                                <td><strong>Polynomial Regression</strong></td>
                                <td>Non-linear relationships, curved patterns</td>
                                <td>Continuous (-∞ to +∞)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Slide 16: Linear vs Logistic Regression -->
        <div class="slide">
            <div class="content-area">
                <h2>Linear vs. Logistic Regression</h2>
                <div id="regression-comparison-viz" style="margin-top: 20px; height: 450px;"></div>
            </div>
        </div>

        <!-- Slide 17: Three Popular Regression Types -->
        <div class="slide">
            <div class="content-area">
                <h2>Three Regression Approaches Compared</h2>
                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h3>Linear Regression</h3>
                        <div style="background: #fffacd; padding: 20px; border-radius: 8px; margin-top: 15px;">
                            <p><strong>Use Cases:</strong></p>
                            <ul style="font-size: 18px;">
                                <li>Econometric modeling</li>
                                <li>Marketing mix models</li>
                                <li>Customer lifetime value</li>
                            </ul>
                            <p style="margin-top: 15px;"><strong>Output:</strong> Continuous → Continuous</p>
                            <p style="margin-top: 10px; font-size: 18px;">Example: One unit increase in marketing spend increases sales by $50</p>
                        </div>
                    </div>
                    <div>
                        <h3>Logistic Regression</h3>
                        <div style="background: #d4edda; padding: 20px; border-radius: 8px; margin-top: 15px;">
                            <p><strong>Use Cases:</strong></p>
                            <ul style="font-size: 18px;">
                                <li>Customer choice models</li>
                                <li>Click-through rate prediction</li>
                                <li>Credit scoring</li>
                            </ul>
                            <p style="margin-top: 15px;"><strong>Output:</strong> Continuous → Binary (0 or 1)</p>
                            <p style="margin-top: 10px; font-size: 18px;">Example: Probability customer will purchase = 0.73</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 18: Logistic Function -->
        <div class="slide">
            <div class="content-area">
                <h2>The Logistic Function</h2>
                <p style="font-size: 22px; margin-top: 20px;">The logistic function transforms any input value into a probability between 0 and 1, creating an S-shaped curve.</p>
                <div id="logistic-curve-viz" style="margin-top: 30px; height: 400px;"></div>
                <p class="interactive-note">Use the slider below to adjust the steepness parameter and observe how the curve changes!</p>
            </div>
        </div>

        <!-- Slide 19: Parameter Effects -->
        <div class="slide">
            <div class="content-area">
                <h2>How Parameters Affect Predictions</h2>
                <div id="parameter-viz" style="margin-top: 20px; height: 450px;"></div>
                <div class="highlight-box" style="margin-top: 20px;">
                    <p style="font-size: 19px;"><strong>Intercept (b₀):</strong> Shifts the curve left or right. <strong>Slope (b₁):</strong> Controls how steep the transition is between 0 and 1.</p>
                </div>
            </div>
        </div>

        <!-- Slide 20: Quiz 3 - Regression -->
        <div class="slide">
            <div class="content-area">
                <h2>Quiz 3: Regression Types</h2>
                <div class="quiz-container">
                    <h3 style="margin-bottom: 20px;">A retail company wants to predict the exact dollar amount each customer will spend next month based on their browsing history and past purchases. Which algorithm is most appropriate?</h3>
                    <div class="quiz-option" onclick="checkAnswer(this, true, 3)">
                        <strong>A.</strong> Linear Regression
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 3)">
                        <strong>B.</strong> Logistic Regression
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 3)">
                        <strong>C.</strong> K-Nearest Neighbors Classification
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 3)">
                        <strong>D.</strong> Decision Tree Classification
                    </div>
                    <div id="feedback-3" class="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Slide 21: KNN Introduction -->
        <div class="slide">
            <div class="content-area">
                <h2>K-Nearest Neighbors (KNN) Algorithm</h2>
                <div class="highlight-box" style="margin-top: 30px;">
                    <p style="font-size: 22px;">KNN is a simple yet powerful classification algorithm that assigns labels based on the majority class among the k closest training examples.</p>
                </div>
                <div style="margin-top: 40px;">
                    <h3>Core Principles:</h3>
                    <ul style="font-size: 22px; margin-top: 20px;">
                        <li>No explicit training phase - stores all training data</li>
                        <li>Makes predictions by finding similar examples</li>
                        <li>Simple to understand and implement</li>
                        <li>Works well for many real-world problems</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 22: 1-NN Example -->
        <div class="slide">
            <div class="content-area">
                <h2>1-Nearest Neighbor (Simplest Case)</h2>
                <div id="one-nn-viz" style="margin-top: 20px; height: 450px;"></div>
                <p style="text-align: center; margin-top: 20px; font-size: 20px;">Click anywhere in the plot area to classify a new point!</p>
            </div>
        </div>

        <!-- Slide 23: K-NN Concept -->
        <div class="slide">
            <div class="content-area">
                <h2>From 1-NN to K-NN</h2>
                <p style="font-size: 22px; margin-top: 20px;">Using multiple neighbors reduces the impact of noise and outliers in the data.</p>
                <div id="knn-viz" style="margin-top: 30px; height: 400px;"></div>
                <p class="interactive-note">Adjust k using the slider to see how it affects the classification!</p>
            </div>
        </div>

        <!-- Slide 24: KNN Example Walkthrough -->
        <div class="slide">
            <div class="content-area">
                <h2>KNN Step-by-Step Example</h2>
                <p style="font-size: 20px; margin-top: 20px;"><strong>Scenario:</strong> Restaurant recommendation system predicting tip amount (Small/Large) based on food quality and service speed.</p>
                <div style="margin-top: 30px; background: #f9f9f9; padding: 25px; border-radius: 8px;">
                    <h3>Training Data:</h3>
                    <table style="margin-top: 15px; font-size: 18px;">
                        <thead>
                            <tr>
                                <th>Food Quality</th>
                                <th>Service Speed</th>
                                <th>Tip Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Great</td><td>Fast</td><td>Large</td></tr>
                            <tr><td>Great</td><td>Fast</td><td>Large</td></tr>
                            <tr><td>Mediocre</td><td>Fast</td><td>Small</td></tr>
                            <tr><td>Great</td><td>Slow</td><td>Large</td></tr>
                        </tbody>
                    </table>
                    <p style="margin-top: 20px; font-size: 20px;"><strong>New Customer:</strong> Food Quality = Great, Service Speed = Fast</p>
                    <p style="margin-top: 10px; font-size: 20px; color: #CC0000;"><strong>Prediction (k=2):</strong> Large Tip (matches 2 nearest neighbors)</p>
                </div>
            </div>
        </div>

        <!-- Slide 25: Choosing K -->
        <div class="slide">
            <div class="content-area">
                <h2>Selecting the Right Value of K</h2>
                <div id="k-selection-viz" style="margin-top: 20px; height: 400px;"></div>
                <div class="two-column" style="margin-top: 30px;">
                    <div style="background: #fff0f0; padding: 20px; border-radius: 8px;">
                        <h3 style="font-size: 22px;">K Too Small (k=1)</h3>
                        <p>Overfits to noise and outliers. High variance, low bias. Sensitive to individual data points.</p>
                    </div>
                    <div style="background: #f0f0ff; padding: 20px; border-radius: 8px;">
                        <h3 style="font-size: 22px;">K Too Large</h3>
                        <p>Underfits the data. Low variance, high bias. May include irrelevant distant points.</p>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 25px; font-size: 20px;"><strong style="color: #CC0000;">Optimal K:</strong> Usually found through cross-validation (often √n where n = number of samples)</p>
            </div>
        </div>

        <!-- Slide 26: KNN Advantages and Disadvantages -->
        <div class="slide">
            <div class="content-area">
                <h2>KNN: Strengths and Limitations</h2>
                <div class="two-column" style="margin-top: 40px;">
                    <div>
                        <h3 style="color: #00AA00;">Advantages</h3>
                        <ul style="font-size: 20px; margin-top: 20px; line-height: 1.8;">
                            <li>Simple to understand and implement</li>
                            <li>No training phase (stores data directly)</li>
                            <li>Naturally handles multi-class problems</li>
                            <li>Effective for many practical applications</li>
                            <li>Can capture complex decision boundaries</li>
                        </ul>
                    </div>
                    <div>
                        <h3 style="color: #CC0000;">Disadvantages</h3>
                        <ul style="font-size: 20px; margin-top: 20px; line-height: 1.8;">
                            <li>Slow predictions on large datasets</li>
                            <li>Sensitive to irrelevant features</li>
                            <li>Requires feature scaling/normalization</li>
                            <li>Struggles with high-dimensional data</li>
                            <li>Memory intensive (stores all training data)</li>
                        </ul>
                    </div>
                </div>
                <div class="highlight-box" style="margin-top: 30px;">
                    <p style="font-size: 20px;"><strong>Best Practice:</strong> Start with KNN as a baseline model before trying more complex algorithms.</p>
                </div>
            </div>
        </div>

        <!-- Slide 27: Quiz 4 - KNN -->
        <div class="slide">
            <div class="content-area">
                <h2>Quiz 4: K-Nearest Neighbors</h2>
                <div class="quiz-container">
                    <h3 style="margin-bottom: 20px;">You notice your KNN model performs perfectly on training data but poorly on test data. What is the most likely cause and solution?</h3>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 4)">
                        <strong>A.</strong> K is too large; decrease k
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, true, 4)">
                        <strong>B.</strong> K is too small (possibly k=1); increase k
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 4)">
                        <strong>C.</strong> Need more training data
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 4)">
                        <strong>D.</strong> Features need to be removed
                    </div>
                    <div id="feedback-4" class="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Slide 28: Decision Trees Introduction -->
        <div class="slide">
            <div class="content-area">
                <h2>Introduction to Decision Trees</h2>
                <div class="highlight-box" style="margin-top: 30px;">
                    <p style="font-size: 22px;">A decision tree is a flowchart-like structure that makes decisions by asking a series of questions about the features, splitting the data at each node until reaching a final prediction.</p>
                </div>
                <div style="margin-top: 40px;">
                    <h3>Key Components:</h3>
                    <ul style="font-size: 22px; margin-top: 20px;">
                        <li><strong style="color: #CC0000;">Root Node:</strong> The first decision point (top of tree)</li>
                        <li><strong style="color: #CC0000;">Internal Nodes:</strong> Decision points based on feature values</li>
                        <li><strong style="color: #CC0000;">Branches:</strong> Outcomes of decisions (Yes/No, High/Low)</li>
                        <li><strong style="color: #CC0000;">Leaf Nodes:</strong> Final predictions or classifications</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 29: Business Case Example -->
        <div class="slide">
            <div class="content-area">
                <h2>Decision Trees for Business Decisions</h2>
                <p style="font-size: 20px; margin-top: 20px;"><strong>Scenario:</strong> You must choose between opening a fast-food outlet or a bookshop. Each has different success rates and financial outcomes.</p>
                <div id="business-tree-viz" style="margin-top: 30px; height: 400px;"></div>
            </div>
        </div>

        <!-- Slide 30: Decision Tree Components -->
        <div class="slide">
            <div class="content-area">
                <h2>Understanding Expected Monetary Value (EMV)</h2>
                <div style="margin-top: 30px; background: #f9f9f9; padding: 25px; border-radius: 8px;">
                    <h3>Fast Food Outlet:</h3>
                    <p style="font-size: 20px; margin-top: 10px;">• 50% chance of success: +$1,000 per week</p>
                    <p style="font-size: 20px;">• 50% chance of failure: -$300 per week</p>
                    <div class="formula" style="margin-top: 15px;">
                        EMV = (0.5 × $1,000) + (0.5 × -$300) = $500 - $150 = <strong style="color: #CC0000;">$350</strong>
                    </div>
                </div>
                <div style="margin-top: 20px; background: #f9f9f9; padding: 25px; border-radius: 8px;">
                    <h3>Bookshop:</h3>
                    <p style="font-size: 20px; margin-top: 10px;">• 50% chance of success: +$900 per week</p>
                    <p style="font-size: 20px;">• 50% chance of failure: -$100 per week</p>
                    <div class="formula" style="margin-top: 15px;">
                        EMV = (0.5 × $900) + (0.5 × -$100) = $450 - $50 = <strong style="color: #00AA00;">$400</strong>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 30px; font-size: 24px; color: #CC0000;"><strong>Decision: Choose Bookshop (Higher EMV)</strong></p>
            </div>
        </div>

        <!-- Slide 31: EVM Calculation -->
        <div class="slide">
            <div class="content-area">
                <h2>Decision Trees in Machine Learning</h2>
                <p style="font-size: 22px; margin-top: 20px;">In ML, decision trees automatically learn the best questions to ask from data, creating classification or regression rules.</p>
                <div id="ml-tree-viz" style="margin-top: 30px; height: 400px;"></div>
                <div class="highlight-box" style="margin-top: 20px;">
                    <p style="font-size: 20px;"><strong>Algorithm:</strong> At each node, the tree selects the feature and split point that best separates the classes (maximizes information gain or minimizes impurity).</p>
                </div>
            </div>
        </div>

        <!-- Slide 32: Decision Tree in ML Context -->
        <div class="slide">
            <div class="content-area">
                <h2>Decision Tree Advantages</h2>
                <div style="margin-top: 40px;">
                    <div style="display: flex; align-items: flex-start; margin: 25px 0;">
                        <div style="min-width: 60px; height: 60px; background: #00AA00; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">✓</div>
                        <div>
                            <h3 style="margin: 0 0 10px 0;">Highly Interpretable</h3>
                            <p style="margin: 0;">Easy to understand and explain to non-technical stakeholders. You can visualize the exact decision path.</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; margin: 25px 0;">
                        <div style="min-width: 60px; height: 60px; background: #00AA00; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">✓</div>
                        <div>
                            <h3 style="margin: 0 0 10px 0;">Handles Mixed Data Types</h3>
                            <p style="margin: 0;">Works with both numerical and categorical features without requiring encoding.</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; margin: 25px 0;">
                        <div style="min-width: 60px; height: 60px; background: #00AA00; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">✓</div>
                        <div>
                            <h3 style="margin: 0 0 10px 0;">Requires Minimal Data Preprocessing</h3>
                            <p style="margin: 0;">No need for feature scaling or normalization. Robust to outliers.</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; margin: 25px 0;">
                        <div style="min-width: 60px; height: 60px; background: #00AA00; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; margin-right: 20px;">✓</div>
                        <div>
                            <h3 style="margin: 0 0 10px 0;">Captures Non-linear Relationships</h3>
                            <p style="margin: 0;">Can model complex interactions between features without manual feature engineering.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 33: Quiz 5 - Decision Trees -->
        <div class="slide">
            <div class="content-area">
                <h2>Quiz 5: Decision Trees</h2>
                <div class="quiz-container">
                    <h3 style="margin-bottom: 20px;">A decision tree achieves 100% accuracy on training data but only 65% on test data. Which technique would most likely improve test performance?</h3>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 5)">
                        <strong>A.</strong> Increase tree depth to capture more patterns
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, true, 5)">
                        <strong>B.</strong> Prune the tree or limit maximum depth
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 5)">
                        <strong>C.</strong> Add more features to the model
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 5)">
                        <strong>D.</strong> Use more training data without other changes
                    </div>
                    <div id="feedback-5" class="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Slide 34: Summary -->
        <div class="slide">
            <div class="content-area">
                <h2>Week 2 Summary</h2>
                <div style="margin-top: 40px;">
                    <div style="background: #ffe6e6; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="color: #CC0000;">Machine Learning Fundamentals</h3>
                        <p style="font-size: 20px; margin-top: 10px;">We learned about supervised, unsupervised, and reinforcement learning. Supervised learning uses labeled data to learn patterns and make predictions.</p>
                    </div>
                    <div style="background: #e6f3ff; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="color: #0066CC;">Regression Techniques</h3>
                        <p style="font-size: 20px; margin-top: 10px;">Linear regression predicts continuous values, while logistic regression predicts probabilities for binary outcomes. Both are foundational ML algorithms.</p>
                    </div>
                    <div style="background: #e6ffe6; padding: 25px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="color: #00AA00;">Classification Algorithms</h3>
                        <p style="font-size: 20px; margin-top: 10px;">K-Nearest Neighbors classifies based on similarity to neighbors. Decision trees create interpretable rules through sequential decisions.</p>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 40px; font-size: 24px; color: #CC0000;"><strong>Next Week:</strong> Decision Trees, Random Forests, and Ensemble Methods</p>
            </div>
        </div>

    </div>

    <div class="navigation">
        <button id="prevBtn" onclick="changeSlide(-1)">Previous</button>
        <button id="nextBtn" onclick="changeSlide(1)">Next</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script>
        let currentSlide = 0;
        let slides;
        let totalSlides;
        const quizAnswered = [false, false, false, false, false];
        let d3Loaded = false;
        let d3LoadAttempts = 0;
        const maxD3Attempts = 50; // 5 seconds max wait

        // Function to check if D3 is loaded
        function waitForD3(callback) {
            d3LoadAttempts++;
            if (typeof d3 !== 'undefined') {
                d3Loaded = true;
                console.log('D3 loaded successfully');
                callback();
            } else if (d3LoadAttempts < maxD3Attempts) {
                setTimeout(() => waitForD3(callback), 100);
            } else {
                // D3 failed to load - show error message
                console.error('D3 failed to load after 5 seconds');
                alert('Visualization library failed to load. Some interactive elements may not work. Please refresh the page or check your internet connection.');
                // Still initialize the presentation without visualizations
                callback();
            }
        }

        // Wait for DOM and D3 to load
        window.addEventListener('load', function() {
            waitForD3(function() {
                slides = document.querySelectorAll('.slide');
                totalSlides = slides.length;
                
                // Initialize navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') changeSlide(-1);
                    if (e.key === 'ArrowRight') changeSlide(1);
                });

                // Show first slide
                showSlide(0);
            });
        });

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');
            document.getElementById('current-slide').textContent = currentSlide + 1;
            
            document.getElementById('prevBtn').disabled = currentSlide === 0;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides - 1;

            initializeSlideVisualizations();
        }

        function changeSlide(direction) {
            showSlide(currentSlide + direction);
        }

        function checkAnswer(element, isCorrect, quizNumber) {
            if (quizAnswered[quizNumber - 1]) return;

            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt === element) {
                    opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            });

            const feedback = document.getElementById(`feedback-${quizNumber}`);
            feedback.classList.add('show');
            
            if (isCorrect) {
                feedback.classList.add('correct');
                const messages = [
                    "Excellent! Supervised learning is correct because we have labeled historical data (customers who defaulted vs. didn't default).",
                    "Correct! Testing on training data gives unrealistic performance. The model memorized the training data rather than learning generalizable patterns.",
                    "Well done! Linear regression is used for predicting continuous numerical values like dollar amounts. Logistic regression is for binary yes/no predictions.",
                    "Exactly right! When k=1, the model is too sensitive to individual noisy points and overfits. Increasing k smooths predictions and improves generalization.",
                    "Excellent! The tree has overfit to the training data. Pruning removes unnecessary complexity and improves generalization to new data."
                ];
                feedback.textContent = "✓ " + messages[quizNumber - 1];
            } else {
                feedback.classList.add('incorrect');
                const hints = [
                    "Hint: We have historical data with known outcomes (defaulted or not). This is the defining characteristic of supervised learning.",
                    "Hint: When a model performs perfectly on training but poorly on new data, it has memorized rather than learned. What do we call this problem?",
                    "Hint: We want to predict a specific dollar amount (continuous value), not a category. Which regression type outputs continuous numbers?",
                    "Hint: Perfect training performance but poor test performance indicates the model is too complex. How does k relate to model complexity?",
                    "Hint: 100% training accuracy with poor test accuracy means the tree is too complex. What technique reduces tree complexity?"
                ];
                feedback.textContent = "✗ Not quite. " + hints[quizNumber - 1];
            }
            
            quizAnswered[quizNumber - 1] = true;
        }

        function initializeSlideVisualizations() {
            if (!d3Loaded || typeof d3 === 'undefined') {
                console.log('D3 not loaded yet, skipping visualizations');
                return;
            }
            
            const slideIndex = currentSlide;

            // Slide 3: Course Roadmap
            if (slideIndex === 2) {
                const svg = d3.select('.slide.active svg');
                svg.selectAll('*').remove();
                
                const weeks = [
                    {week: 1, topic: "Introduction to AI", color: "#FF6B6B"},
                    {week: 2, topic: "Machine Learning Intro", color: "#CC0000"},
                    {week: 3, topic: "Decision Trees & Random Forests", color: "#4ECDC4"},
                    {week: 4, topic: "Clustering & PCA", color: "#45B7D1"},
                    {week: 5, topic: "Assessment 1", color: "#FFA07A"},
                    {week: 6, topic: "Naive Bayes & SVM", color: "#98D8C8"},
                    {week: 7, topic: "Neural Networks", color: "#6C5CE7"},
                    {week: 8, topic: "CNNs & Image Classification", color: "#A29BFE"},
                    {week: 9, topic: "NLP & Gen AI", color: "#FD79A8"},
                    {week: 10, topic: "Reinforcement Learning", color: "#FDCB6E"},
                    {week: 11, topic: "Model Interpretability", color: "#00B894"},
                    {week: 12, topic: "Quantum ML", color: "#0984E3"}
                ];

                const width = parseInt(svg.style('width'));
                const height = parseInt(svg.style('height'));
                const boxWidth = 140;
                const boxHeight = 70;
                const cols = 4;
                const rows = 3;
                const xSpacing = (width - boxWidth * cols) / (cols + 1);
                const ySpacing = (height - boxHeight * rows) / (rows + 1);

                weeks.forEach((week, i) => {
                    const col = i % cols;
                    const row = Math.floor(i / cols);
                    const x = xSpacing + col * (boxWidth + xSpacing);
                    const y = ySpacing + row * (boxHeight + ySpacing);

                    const g = svg.append('g')
                        .attr('transform', `translate(${x}, ${y})`);

                    g.append('rect')
                        .attr('width', boxWidth)
                        .attr('height', boxHeight)
                        .attr('fill', week.color)
                        .attr('rx', 5)
                        .attr('opacity', week.week === 2 ? 1 : 0.7);

                    g.append('text')
                        .attr('x', boxWidth / 2)
                        .attr('y', 25)
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .attr('font-size', '18px')
                        .attr('font-weight', 'bold')
                        .text(`Week ${week.week}`);

                    g.append('text')
                        .attr('x', boxWidth / 2)
                        .attr('y', 47)
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .attr('font-size', '13px')
                        .text(week.topic);
                });
            }

            // Slide 5: ML Types Visualization
            if (slideIndex === 4) {
                const container = d3.select('#ml-types-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '500px');

                const width = 1100;
                const height = 500;

                // Main ML box
                svg.append('rect')
                    .attr('x', 200)
                    .attr('y', 50)
                    .attr('width', 300)
                    .attr('height', 120)
                    .attr('fill', '#87CEEB')
                    .attr('rx', 10);

                svg.append('text')
                    .attr('x', 350)
                    .attr('y', 115)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '24px')
                    .attr('font-weight', 'bold')
                    .text('Machine Learning');

                // Three main types
                const types = [
                    {x: 50, y: 250, color: '#90EE90', label: 'Supervised\nLearning', sub: ['Classification', 'Regression']},
                    {x: 350, y: 250, color: '#FFB6C1', label: 'Unsupervised\nLearning', sub: ['Clustering', 'Dim. Reduction']},
                    {x: 700, y: 250, color: '#FFD700', label: 'Reinforcement\nLearning', sub: ['Agent Learning', 'Rewards']}
                ];

                // Draw connections
                [[350, 170, 150, 250], [350, 170, 450, 250], [350, 170, 800, 250]].forEach(line => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);
                });

                types.forEach(type => {
                    const g = svg.append('g');
                    
                    g.append('rect')
                        .attr('x', type.x)
                        .attr('y', type.y)
                        .attr('width', 200)
                        .attr('height', 80)
                        .attr('fill', type.color)
                        .attr('rx', 10);

                    const lines = type.label.split('\n');
                    lines.forEach((line, i) => {
                        g.append('text')
                            .attr('x', type.x + 100)
                            .attr('y', type.y + 30 + i * 20)
                            .attr('text-anchor', 'middle')
                            .attr('font-size', '18px')
                            .attr('font-weight', 'bold')
                            .text(line);
                    });

                    // Sub-types
                    type.sub.forEach((sub, i) => {
                        g.append('text')
                            .attr('x', type.x + 100)
                            .attr('y', type.y + 100 + i * 25)
                            .attr('text-anchor', 'middle')
                            .attr('font-size', '15px')
                            .attr('fill', '#333')
                            .text('• ' + sub);
                    });
                });
            }

            // Slide 9: Supervised Learning Flow
            if (slideIndex === 8) {
                const container = d3.select('#supervised-learning-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const steps = [
                    {x: 100, label: 'Historical\nData', color: '#E3F2FD'},
                    {x: 300, label: 'Training\nPhase', color: '#BBDEFB'},
                    {x: 500, label: 'Trained\nModel', color: '#90CAF9'},
                    {x: 700, label: 'New Data\nInput', color: '#64B5F6'},
                    {x: 900, label: 'Predictions', color: '#42A5F5'}
                ];

                steps.forEach((step, i) => {
                    svg.append('rect')
                        .attr('x', step.x)
                        .attr('y', 100)
                        .attr('width', 120)
                        .attr('height', 80)
                        .attr('fill', step.color)
                        .attr('rx', 8);

                    const lines = step.label.split('\n');
                    lines.forEach((line, j) => {
                        svg.append('text')
                            .attr('x', step.x + 60)
                            .attr('y', 135 + j * 20)
                            .attr('text-anchor', 'middle')
                            .attr('font-size', '16px')
                            .attr('font-weight', 'bold')
                            .text(line);
                    });

                    if (i < steps.length - 1) {
                        svg.append('path')
                            .attr('d', `M ${step.x + 120} 140 L ${steps[i+1].x} 140`)
                            .attr('stroke', '#CC0000')
                            .attr('stroke-width', 3)
                            .attr('marker-end', 'url(#arrowhead)');
                    }
                });

                svg.append('defs').append('marker')
                    .attr('id', 'arrowhead')
                    .attr('markerWidth', 10)
                    .attr('markerHeight', 10)
                    .attr('refX', 9)
                    .attr('refY', 3)
                    .attr('orient', 'auto')
                    .append('polygon')
                    .attr('points', '0 0, 10 3, 0 6')
                    .attr('fill', '#CC0000');
            }

            // Slide 12: Train/Test Split Visualization
            if (slideIndex === 11) {
                const container = d3.select('#train-test-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                // Full dataset
                svg.append('rect')
                    .attr('x', 100)
                    .attr('y', 50)
                    .attr('width', 900)
                    .attr('height', 60)
                    .attr('fill', '#E0E0E0')
                    .attr('rx', 5);

                svg.append('text')
                    .attr('x', 550)
                    .attr('y', 90)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '20px')
                    .attr('font-weight', 'bold')
                    .text('Complete Dataset (100%)');

                // Split arrow
                svg.append('path')
                    .attr('d', 'M 550 130 L 300 180')
                    .attr('stroke', '#CC0000')
                    .attr('stroke-width', 3)
                    .attr('marker-end', 'url(#arrowhead)');

                svg.append('path')
                    .attr('d', 'M 550 130 L 800 180')
                    .attr('stroke', '#CC0000')
                    .attr('stroke-width', 3)
                    .attr('marker-end', 'url(#arrowhead)');

                // Training set
                svg.append('rect')
                    .attr('x', 50)
                    .attr('y', 200)
                    .attr('width', 500)
                    .attr('height', 80)
                    .attr('fill', '#4CAF50')
                    .attr('rx', 5);

                svg.append('text')
                    .attr('x', 300)
                    .attr('y', 235)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '22px')
                    .attr('font-weight', 'bold')
                    .attr('fill', 'white')
                    .text('Training Set (70%)');

                svg.append('text')
                    .attr('x', 300)
                    .attr('y', 265)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('fill', 'white')
                    .text('Used to train the model');

                // Test set
                svg.append('rect')
                    .attr('x', 600)
                    .attr('y', 200)
                    .attr('width', 400)
                    .attr('height', 80)
                    .attr('fill', '#2196F3')
                    .attr('rx', 5);

                svg.append('text')
                    .attr('x', 800)
                    .attr('y', 235)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '22px')
                    .attr('font-weight', 'bold')
                    .attr('fill', 'white')
                    .text('Test Set (30%)');

                svg.append('text')
                    .attr('x', 800)
                    .attr('y', 265)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('fill', 'white')
                    .text('Evaluates performance');

                // Purpose text
                svg.append('text')
                    .attr('x', 550)
                    .attr('y', 330)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '18px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('Why? To measure how well the model generalizes to unseen data');
            }

            // Slide 16: Linear vs Logistic Regression
            if (slideIndex === 15) {
                const container = d3.select('#regression-comparison-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const width = 1100;
                const height = 450;

                // Linear regression plot
                const linearG = svg.append('g').attr('transform', 'translate(50, 50)');
                
                linearG.append('text')
                    .attr('x', 200)
                    .attr('y', -10)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '20px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('Linear Regression');

                // Axes
                linearG.append('line').attr('x1', 50).attr('y1', 300).attr('x2', 350).attr('y2', 300).attr('stroke', '#333').attr('stroke-width', 2);
                linearG.append('line').attr('x1', 50).attr('y1', 300).attr('x2', 50).attr('y2', 50).attr('stroke', '#333').attr('stroke-width', 2);

                // Data points
                const linearData = [
                    {x: 80, y: 250}, {x: 120, y: 230}, {x: 160, y: 200}, {x: 200, y: 180},
                    {x: 240, y: 150}, {x: 280, y: 120}, {x: 320, y: 100}
                ];

                linearData.forEach(d => {
                    linearG.append('circle')
                        .attr('cx', d.x)
                        .attr('cy', d.y)
                        .attr('r', 5)
                        .attr('fill', '#2196F3');
                });

                // Linear line
                linearG.append('line')
                    .attr('x1', 70)
                    .attr('y1', 260)
                    .attr('x2', 330)
                    .attr('y2', 90)
                    .attr('stroke', '#CC0000')
                    .attr('stroke-width', 3);

                linearG.append('text')
                    .attr('x', 200)
                    .attr('y', 340)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '14px')
                    .text('Predicts continuous values');

                // Logistic regression plot
                const logisticG = svg.append('g').attr('transform', 'translate(600, 50)');
                
                logisticG.append('text')
                    .attr('x', 200)
                    .attr('y', -10)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '20px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('Logistic Regression');

                // Axes
                logisticG.append('line').attr('x1', 50).attr('y1', 300).attr('x2', 350).attr('y2', 300).attr('stroke', '#333').attr('stroke-width', 2);
                logisticG.append('line').attr('x1', 50).attr('y1', 300).attr('x2', 50).attr('y2', 50).attr('stroke', '#333').attr('stroke-width', 2);

                // S-curve
                const scurve = d3.range(50, 350, 5).map(x => {
                    const normalized = (x - 200) / 50;
                    const y = 300 - (250 / (1 + Math.exp(-normalized)));
                    return {x, y};
                });

                const line = d3.line()
                    .x(d => d.x)
                    .y(d => d.y);

                logisticG.append('path')
                    .attr('d', line(scurve))
                    .attr('stroke', '#CC0000')
                    .attr('stroke-width', 3)
                    .attr('fill', 'none');

                // Data points at 0 and 1
                [[100, 280], [120, 285], [140, 275], [250, 80], [270, 70], [290, 75]].forEach(d => {
                    logisticG.append('circle')
                        .attr('cx', d[0])
                        .attr('cy', d[1])
                        .attr('r', 5)
                        .attr('fill', '#2196F3');
                });

                logisticG.append('text')
                    .attr('x', 200)
                    .attr('y', 340)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '14px')
                    .text('Predicts probabilities (0 to 1)');

                // Labels
                logisticG.append('text').attr('x', 30).attr('y', 75).attr('font-size', '16px').attr('font-weight', 'bold').text('1');
                logisticG.append('text').attr('x', 30).attr('y', 305).attr('font-size', '16px').attr('font-weight', 'bold').text('0');
            }

            // Slide 18: Interactive Logistic Curve
            if (slideIndex === 17) {
                const container = d3.select('#logistic-curve-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const margin = {top: 20, right: 20, bottom: 60, top: 20};
                const width = 900;
                const height = 350;

                const g = svg.append('g').attr('transform', `translate(${margin.left + 100}, ${margin.top})`);

                // Scales
                const xScale = d3.scaleLinear().domain([-6, 6]).range([0, width]);
                const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);

                // Axes
                g.append('g')
                    .attr('transform', `translate(0, ${height})`)
                    .call(d3.axisBottom(xScale))
                    .style('font-size', '14px');

                g.append('g')
                    .call(d3.axisLeft(yScale))
                    .style('font-size', '14px');

                // Labels
                svg.append('text')
                    .attr('x', width / 2 + 100)
                    .attr('y', height + 90)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Input Value (x)');

                svg.append('text')
                    .attr('transform', 'rotate(-90)')
                    .attr('x', -height / 2)
                    .attr('y', 40)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Probability');

                function drawCurve(steepness) {
                    g.selectAll('.curve').remove();

                    const data = d3.range(-6, 6.1, 0.1).map(x => ({
                        x: x,
                        y: 1 / (1 + Math.exp(-steepness * x))
                    }));

                    const line = d3.line()
                        .x(d => xScale(d.x))
                        .y(d => yScale(d.y));

                    g.append('path')
                        .datum(data)
                        .attr('class', 'curve')
                        .attr('fill', 'none')
                        .attr('stroke', '#CC0000')
                        .attr('stroke-width', 3)
                        .attr('d', line);
                }

                drawCurve(1);

                // Slider
                const sliderG = svg.append('g')
                    .attr('transform', `translate(200, ${height + 50})`);

                sliderG.append('text')
                    .attr('x', -50)
                    .attr('y', 15)
                    .attr('font-size', '14px')
                    .text('Steepness:');

                const sliderScale = d3.scaleLinear()
                    .domain([0.5, 3])
                    .range([0, 400]);

                const slider = sliderG.append('line')
                    .attr('x1', 0)
                    .attr('x2', 400)
                    .attr('y1', 10)
                    .attr('y2', 10)
                    .attr('stroke', '#ccc')
                    .attr('stroke-width', 4);

                const handle = sliderG.append('circle')
                    .attr('cx', sliderScale(1))
                    .attr('cy', 10)
                    .attr('r', 10)
                    .attr('fill', '#CC0000')
                    .style('cursor', 'pointer')
                    .call(d3.drag()
                        .on('drag', function(event) {
                            const newX = Math.max(0, Math.min(400, event.x));
                            d3.select(this).attr('cx', newX);
                            const steepness = sliderScale.invert(newX);
                            valueText.text(steepness.toFixed(2));
                            drawCurve(steepness);
                        }));

                const valueText = sliderG.append('text')
                    .attr('x', 420)
                    .attr('y', 15)
                    .attr('font-size', '14px')
                    .attr('font-weight', 'bold')
                    .text('1.00');
            }

            // Slide 19: Parameter Effects
            if (slideIndex === 18) {
                const container = d3.select('#parameter-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const curves = [
                    {label: 'b₀ = -2', color: '#FF6B6B', intercept: -2, slope: 1},
                    {label: 'b₀ = 0', color: '#CC0000', intercept: 0, slope: 1},
                    {label: 'b₀ = 2', color: '#990000', intercept: 2, slope: 1}
                ];

                const margin = {top: 40, right: 20, bottom: 60, left: 60};
                const width = 500;
                const height = 350;

                const g = svg.append('g').attr('transform', `translate(${margin.left + 50}, ${margin.top})`);

                const xScale = d3.scaleLinear().domain([-5, 5]).range([0, width]);
                const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);

                g.append('g')
                    .attr('transform', `translate(0, ${height})`)
                    .call(d3.axisBottom(xScale))
                    .style('font-size', '12px');

                g.append('g')
                    .call(d3.axisLeft(yScale))
                    .style('font-size', '12px');

                svg.append('text')
                    .attr('x', width / 2 + 100)
                    .attr('y', 30)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '18px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('Effect of Intercept (b₀)');

                curves.forEach(curve => {
                    const data = d3.range(-5, 5.1, 0.1).map(x => ({
                        x: x,
                        y: 1 / (1 + Math.exp(-(curve.slope * x + curve.intercept)))
                    }));

                    const line = d3.line()
                        .x(d => xScale(d.x))
                        .y(d => yScale(d.y));

                    g.append('path')
                        .datum(data)
                        .attr('fill', 'none')
                        .attr('stroke', curve.color)
                        .attr('stroke-width', 3)
                        .attr('d', line);
                });

                // Legend
                const legend = svg.append('g')
                    .attr('transform', `translate(${width + 150}, 100)`);

                curves.forEach((curve, i) => {
                    legend.append('line')
                        .attr('x1', 0)
                        .attr('x2', 40)
                        .attr('y1', i * 30)
                        .attr('y2', i * 30)
                        .attr('stroke', curve.color)
                        .attr('stroke-width', 3);

                    legend.append('text')
                        .attr('x', 50)
                        .attr('y', i * 30 + 5)
                        .attr('font-size', '14px')
                        .text(curve.label);
                });
            }

            // Slide 22: 1-NN Interactive
            if (slideIndex === 21) {
                const container = d3.select('#one-nn-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const width = 800;
                const height = 450;
                const margin = 50;

                // Training data
                const redPoints = [
                    {x: 200, y: 150}, {x: 250, y: 180}, {x: 180, y: 200},
                    {x: 220, y: 120}, {x: 280, y: 160}
                ];

                const bluePoints = [
                    {x: 500, y: 200}, {x: 550, y: 180}, {x: 480, y: 250},
                    {x: 520, y: 150}, {x: 580, y: 220}
                ];

                // Draw grid
                for (let i = 0; i <= 10; i++) {
                    svg.append('line')
                        .attr('x1', margin + i * (width - 2 * margin) / 10)
                        .attr('y1', margin)
                        .attr('x2', margin + i * (width - 2 * margin) / 10)
                        .attr('y2', height - margin)
                        .attr('stroke', '#e0e0e0')
                        .attr('stroke-width', 1);

                    svg.append('line')
                        .attr('x1', margin)
                        .attr('y1', margin + i * (height - 2 * margin) / 10)
                        .attr('x2', width - margin)
                        .attr('y2', margin + i * (height - 2 * margin) / 10)
                        .attr('stroke', '#e0e0e0')
                        .attr('stroke-width', 1);
                }

                // Draw points
                redPoints.forEach(p => {
                    svg.append('circle')
                        .attr('cx', p.x)
                        .attr('cy', p.y)
                        .attr('r', 10)
                        .attr('fill', '#FF4444')
                        .attr('stroke', '#CC0000')
                        .attr('stroke-width', 2);
                });

                bluePoints.forEach(p => {
                    svg.append('circle')
                        .attr('cx', p.x)
                        .attr('cy', p.y)
                        .attr('r', 10)
                        .attr('fill', '#4444FF')
                        .attr('stroke', '#0000CC')
                        .attr('stroke-width', 2);
                });

                // Legend
                const legend = svg.append('g').attr('transform', 'translate(650, 30)');
                
                legend.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 8).attr('fill', '#FF4444');
                legend.append('text').attr('x', 15).attr('y', 5).text('Class A').attr('font-size', '14px');
                
                legend.append('circle').attr('cx', 0).attr('cy', 25).attr('r', 8).attr('fill', '#4444FF');
                legend.append('text').attr('x', 15).attr('y', 30).text('Class B').attr('font-size', '14px');

                // Click handler
                let predictionCircle = null;
                let connectionLine = null;

                svg.on('click', function(event) {
                    const [mx, my] = d3.pointer(event);
                    
                    if (mx < margin || mx > width - margin || my < margin || my > height - margin) return;

                    // Find nearest neighbor
                    let minDist = Infinity;
                    let nearest = null;
                    let nearestColor = null;

                    redPoints.forEach(p => {
                        const dist = Math.sqrt((p.x - mx) ** 2 + (p.y - my) ** 2);
                        if (dist < minDist) {
                            minDist = dist;
                            nearest = p;
                            nearestColor = '#FF4444';
                        }
                    });

                    bluePoints.forEach(p => {
                        const dist = Math.sqrt((p.x - mx) ** 2 + (p.y - my) ** 2);
                        if (dist < minDist) {
                            minDist = dist;
                            nearest = p;
                            nearestColor = '#4444FF';
                        }
                    });

                    // Remove previous prediction
                    if (predictionCircle) predictionCircle.remove();
                    if (connectionLine) connectionLine.remove();

                    // Draw connection line
                    connectionLine = svg.append('line')
                        .attr('x1', mx)
                        .attr('y1', my)
                        .attr('x2', nearest.x)
                        .attr('y2', nearest.y)
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2)
                        .attr('stroke-dasharray', '5,5');

                    // Draw new prediction
                    predictionCircle = svg.append('circle')
                        .attr('cx', mx)
                        .attr('cy', my)
                        .attr('r', 12)
                        .attr('fill', nearestColor)
                        .attr('opacity', 0.7)
                        .attr('stroke', '#000')
                        .attr('stroke-width', 2);
                });

                svg.append('text')
                    .attr('x', width / 2)
                    .attr('y', 30)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '18px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('1-Nearest Neighbor: Click to Classify');
            }

            // Slide 23: K-NN Interactive
            if (slideIndex === 22) {
                const container = d3.select('#knn-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const width = 900;
                const height = 350;

                let k = 3;

                const redPoints = [
                    {x: 150, y: 100}, {x: 180, y: 130}, {x: 140, y: 150},
                    {x: 200, y: 90}, {x: 170, y: 170}, {x: 190, y: 120}
                ];

                const bluePoints = [
                    {x: 350, y: 150}, {x: 380, y: 120}, {x: 320, y: 180},
                    {x: 360, y: 100}, {x: 400, y: 160}, {x: 330, y: 140}
                ];

                const allPoints = [
                    ...redPoints.map(p => ({...p, color: 'red'})),
                    ...bluePoints.map(p => ({...p, color: 'blue'}))
                ];

                function drawVisualization() {
                    svg.selectAll('*').remove();

                    // Test point
                    const testX = 250;
                    const testY = 130;

                    // Calculate distances
                    const distances = allPoints.map(p => ({
                        ...p,
                        dist: Math.sqrt((p.x - testX) ** 2 + (p.y - testY) ** 2)
                    })).sort((a, b) => a.dist - b.dist);

                    const nearest = distances.slice(0, k);

                    // Draw all points
                    redPoints.forEach(p => {
                        svg.append('circle')
                            .attr('cx', p.x)
                            .attr('cy', p.y)
                            .attr('r', 8)
                            .attr('fill', '#FF4444')
                            .attr('stroke', '#CC0000')
                            .attr('stroke-width', 2);
                    });

                    bluePoints.forEach(p => {
                        svg.append('circle')
                            .attr('cx', p.x)
                            .attr('cy', p.y)
                            .attr('r', 8)
                            .attr('fill', '#4444FF')
                            .attr('stroke', '#0000CC')
                            .attr('stroke-width', 2);
                    });

                    // Draw connections to nearest neighbors
                    nearest.forEach(p => {
                        svg.append('line')
                            .attr('x1', testX)
                            .attr('y1', testY)
                            .attr('x2', p.x)
                            .attr('y2', p.y)
                            .attr('stroke', '#999')
                            .attr('stroke-width', 2)
                            .attr('stroke-dasharray', '5,5');

                        // Highlight nearest neighbors
                        svg.append('circle')
                            .attr('cx', p.x)
                            .attr('cy', p.y)
                            .attr('r', 12)
                            .attr('fill', 'none')
                            .attr('stroke', '#FFD700')
                            .attr('stroke-width', 3);
                    });

                    // Count votes
                    const redCount = nearest.filter(p => p.color === 'red').length;
                    const blueCount = nearest.filter(p => p.color === 'blue').length;
                    const predictedColor = redCount > blueCount ? '#FF4444' : '#4444FF';

                    // Draw test point
                    svg.append('circle')
                        .attr('cx', testX)
                        .attr('cy', testY)
                        .attr('r', 12)
                        .attr('fill', predictedColor)
                        .attr('opacity', 0.7)
                        .attr('stroke', '#000')
                        .attr('stroke-width', 3);

                    // Voting display
                    const voteG = svg.append('g').attr('transform', 'translate(500, 50)');
                    
                    voteG.append('text')
                        .attr('x', 0)
                        .attr('y', 0)
                        .attr('font-size', '18px')
                        .attr('font-weight', 'bold')
                        .text(`k = ${k} Neighbors Vote:`);

                    voteG.append('text')
                        .attr('x', 0)
                        .attr('y', 30)
                        .attr('font-size', '16px')
                        .text(`Red: ${redCount} votes`);

                    voteG.append('text')
                        .attr('x', 0)
                        .attr('y', 55)
                        .attr('font-size', '16px')
                        .text(`Blue: ${blueCount} votes`);

                    voteG.append('text')
                        .attr('x', 0)
                        .attr('y', 85)
                        .attr('font-size', '16px')
                        .attr('font-weight', 'bold')
                        .attr('fill', predictedColor)
                        .text(`Prediction: ${redCount > blueCount ? 'Class A (Red)' : 'Class B (Blue)'}`);
                }

                drawVisualization();

                // K slider
                const sliderG = svg.append('g')
                    .attr('transform', 'translate(150, 280)');

                sliderG.append('text')
                    .attr('x', -50)
                    .attr('y', 15)
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('k = ');

                const sliderScale = d3.scaleLinear()
                    .domain([1, 11])
                    .range([0, 400]);

                sliderG.append('line')
                    .attr('x1', 0)
                    .attr('x2', 400)
                    .attr('y1', 10)
                    .attr('y2', 10)
                    .attr('stroke', '#ccc')
                    .attr('stroke-width', 4);

                const handle = sliderG.append('circle')
                    .attr('cx', sliderScale(k))
                    .attr('cy', 10)
                    .attr('r', 12)
                    .attr('fill', '#CC0000')
                    .style('cursor', 'pointer')
                    .call(d3.drag()
                        .on('drag', function(event) {
                            const newX = Math.max(0, Math.min(400, event.x));
                            d3.select(this).attr('cx', newX);
                            k = Math.round(sliderScale.invert(newX));
                            if (k % 2 === 0) k++; // Keep k odd
                            if (k < 1) k = 1;
                            if (k > 11) k = 11;
                            valueText.text(k);
                            drawVisualization();
                        }));

                const valueText = sliderG.append('text')
                    .attr('x', -10)
                    .attr('y', 15)
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text(k);
            }

            // Slide 25: K Selection Visualization
            if (slideIndex === 24) {
                const container = d3.select('#k-selection-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const margin = {top: 20, right: 20, bottom: 60, left: 60};
                const width = 800;
                const height = 350;

                const g = svg.append('g').attr('transform', `translate(${margin.left + 100}, ${margin.top + 20})`);

                // Simulated error data
                const errorData = [];
                for (let k = 1; k <= 40; k++) {
                    let error;
                    if (k === 1) error = 0.07;
                    else if (k < 5) error = 0.03 + Math.random() * 0.01;
                    else if (k < 15) error = 0.00 + Math.random() * 0.005;
                    else error = 0.02 + (k - 15) * 0.002 + Math.random() * 0.01;
                    errorData.push({k, error: Math.min(0.1, error)});
                }

                const xScale = d3.scaleLinear().domain([1, 40]).range([0, width]);
                const yScale = d3.scaleLinear().domain([0, 0.1]).range([height, 0]);

                // Axes
                g.append('g')
                    .attr('transform', `translate(0, ${height})`)
                    .call(d3.axisBottom(xScale).ticks(10))
                    .style('font-size', '12px');

                g.append('g')
                    .call(d3.axisLeft(yScale).tickFormat(d => (d * 100).toFixed(0) + '%'))
                    .style('font-size', '12px');

                // Labels
                svg.append('text')
                    .attr('x', width / 2 + 100)
                    .attr('y', height + 90)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('K Value');

                svg.append('text')
                    .attr('transform', 'rotate(-90)')
                    .attr('x', -height / 2 - 20)
                    .attr('y', 30)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Error Rate');

                // Line
                const line = d3.line()
                    .x(d => xScale(d.k))
                    .y(d => yScale(d.error));

                g.append('path')
                    .datum(errorData)
                    .attr('fill', 'none')
                    .attr('stroke', '#CC0000')
                    .attr('stroke-width', 3)
                    .attr('d', line);

                // Points
                g.selectAll('circle')
                    .data(errorData)
                    .enter()
                    .append('circle')
                    .attr('cx', d => xScale(d.k))
                    .attr('cy', d => yScale(d.error))
                    .attr('r', 4)
                    .attr('fill', '#2196F3');

                // Optimal k annotation
                const optimalK = 7;
                const optimalError = errorData.find(d => d.k === optimalK).error;

                g.append('circle')
                    .attr('cx', xScale(optimalK))
                    .attr('cy', yScale(optimalError))
                    .attr('r', 8)
                    .attr('fill', '#00AA00')
                    .attr('stroke', '#006600')
                    .attr('stroke-width', 2);

                g.append('text')
                    .attr('x', xScale(optimalK))
                    .attr('y', yScale(optimalError) - 20)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '14px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#00AA00')
                    .text('Optimal k ≈ 7');
            }

            // Slide 29: Business Decision Tree
            if (slideIndex === 28) {
                const container = d3.select('#business-tree-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const width = 1000;
                const height = 400;

                // Root
                svg.append('rect')
                    .attr('x', 400)
                    .attr('y', 20)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#E3F2FD')
                    .attr('rx', 5)
                    .attr('stroke', '#2196F3')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 500)
                    .attr('y', 55)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '18px')
                    .attr('font-weight', 'bold')
                    .text('Business Decision');

                // Branches
                [[500, 80, 250, 150], [500, 80, 750, 150]].forEach(line => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);
                });

                // Option 1: Fast Food
                svg.append('rect')
                    .attr('x', 150)
                    .attr('y', 150)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#FFF9C4')
                    .attr('rx', 5)
                    .attr('stroke', '#FBC02D')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 250)
                    .attr('y', 185)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Fast Food Outlet');

                // Fast food outcomes
                [[250, 210, 200, 280], [250, 210, 300, 280]].forEach(line => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);
                });

                svg.append('ellipse')
                    .attr('cx', 200)
                    .attr('cy', 300)
                    .attr('rx', 80)
                    .attr('ry', 40)
                    .attr('fill', '#C8E6C9')
                    .attr('stroke', '#4CAF50')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 200)
                    .attr('y', 295)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .text('50% Success');

                svg.append('text')
                    .attr('x', 200)
                    .attr('y', 312)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#2E7D32')
                    .text('+$1,000/week');

                svg.append('ellipse')
                    .attr('cx', 300)
                    .attr('cy', 300)
                    .attr('rx', 80)
                    .attr('ry', 40)
                    .attr('fill', '#FFCDD2')
                    .attr('stroke', '#F44336')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 300)
                    .attr('y', 295)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .text('50% Failure');

                svg.append('text')
                    .attr('x', 300)
                    .attr('y', 312)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#C62828')
                    .text('-$300/week');

                // EMV for fast food
                svg.append('text')
                    .attr('x', 250)
                    .attr('y', 365)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '15px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#CC0000')
                    .text('EMV = $350/week');

                // Option 2: Bookshop
                svg.append('rect')
                    .attr('x', 650)
                    .attr('y', 150)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#E1BEE7')
                    .attr('rx', 5)
                    .attr('stroke', '#9C27B0')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 750)
                    .attr('y', 185)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Bookshop');

                // Bookshop outcomes
                [[750, 210, 700, 280], [750, 210, 800, 280]].forEach(line => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);
                });

                svg.append('ellipse')
                    .attr('cx', 700)
                    .attr('cy', 300)
                    .attr('rx', 80)
                    .attr('ry', 40)
                    .attr('fill', '#C8E6C9')
                    .attr('stroke', '#4CAF50')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 700)
                    .attr('y', 295)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .text('50% Success');

                svg.append('text')
                    .attr('x', 700)
                    .attr('y', 312)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#2E7D32')
                    .text('+$900/week');

                svg.append('ellipse')
                    .attr('cx', 800)
                    .attr('cy', 300)
                    .attr('rx', 80)
                    .attr('ry', 40)
                    .attr('fill', '#FFCDD2')
                    .attr('stroke', '#F44336')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 800)
                    .attr('y', 295)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .text('50% Failure');

                svg.append('text')
                    .attr('x', 800)
                    .attr('y', 312)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '13px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#C62828')
                    .text('-$100/week');

                // EMV for bookshop
                svg.append('text')
                    .attr('x', 750)
                    .attr('y', 365)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '15px')
                    .attr('font-weight', 'bold')
                    .attr('fill', '#00AA00')
                    .text('EMV = $400/week ← Better Choice!');
            }

            // Slide 31: ML Decision Tree
            if (slideIndex === 30) {
                const container = d3.select('#ml-tree-viz');
                container.selectAll('*').remove();

                const svg = container.append('svg')
                    .attr('width', '100%')
                    .attr('height', '100%');

                const width = 900;
                const height = 400;

                // Root node
                svg.append('rect')
                    .attr('x', 350)
                    .attr('y', 20)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#E3F2FD')
                    .attr('rx', 5)
                    .attr('stroke', '#2196F3')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 450)
                    .attr('y', 50)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Age > 30?');

                // Branches
                [[400, 80, 250, 150], [500, 80, 650, 150]].forEach((line, i) => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);

                    svg.append('text')
                        .attr('x', (line[0] + line[2]) / 2)
                        .attr('y', (line[1] + line[3]) / 2 - 5)
                        .attr('text-anchor', 'middle')
                        .attr('font-size', '14px')
                        .attr('font-weight', 'bold')
                        .attr('fill', '#CC0000')
                        .text(i === 0 ? 'No' : 'Yes');
                });

                // Left node
                svg.append('rect')
                    .attr('x', 150)
                    .attr('y', 150)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#FFF9C4')
                    .attr('rx', 5)
                    .attr('stroke', '#FBC02D')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 250)
                    .attr('y', 180)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Income > 50K?');

                // Left branches
                [[200, 210, 150, 280], [300, 210, 350, 280]].forEach((line, i) => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);

                    svg.append('text')
                        .attr('x', (line[0] + line[2]) / 2)
                        .attr('y', (line[1] + line[3]) / 2 - 5)
                        .attr('text-anchor', 'middle')
                        .attr('font-size', '14px')
                        .attr('font-weight', 'bold')
                        .attr('fill', '#CC0000')
                        .text(i === 0 ? 'No' : 'Yes');
                });

                // Leaf nodes - left side
                svg.append('ellipse')
                    .attr('cx', 150)
                    .attr('cy', 300)
                    .attr('rx', 70)
                    .attr('ry', 40)
                    .attr('fill', '#FFCDD2')
                    .attr('stroke', '#F44336')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 150)
                    .attr('y', 305)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('No Purchase');

                svg.append('ellipse')
                    .attr('cx', 350)
                    .attr('cy', 300)
                    .attr('rx', 70)
                    .attr('ry', 40)
                    .attr('fill', '#C8E6C9')
                    .attr('stroke', '#4CAF50')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 350)
                    .attr('y', 305)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Purchase');

                // Right node
                svg.append('rect')
                    .attr('x', 550)
                    .attr('y', 150)
                    .attr('width', 200)
                    .attr('height', 60)
                    .attr('fill', '#FFF9C4')
                    .attr('rx', 5)
                    .attr('stroke', '#FBC02D')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 650)
                    .attr('y', 180)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Email Open > 50%?');

                // Right branches
                [[600, 210, 550, 280], [700, 210, 750, 280]].forEach((line, i) => {
                    svg.append('line')
                        .attr('x1', line[0])
                        .attr('y1', line[1])
                        .attr('x2', line[2])
                        .attr('y2', line[3])
                        .attr('stroke', '#666')
                        .attr('stroke-width', 2);

                    svg.append('text')
                        .attr('x', (line[0] + line[2]) / 2)
                        .attr('y', (line[1] + line[3]) / 2 - 5)
                        .attr('text-anchor', 'middle')
                        .attr('font-size', '14px')
                        .attr('font-weight', 'bold')
                        .attr('fill', '#CC0000')
                        .text(i === 0 ? 'No' : 'Yes');
                });

                // Leaf nodes - right side
                svg.append('ellipse')
                    .attr('cx', 550)
                    .attr('cy', 300)
                    .attr('rx', 70)
                    .attr('ry', 40)
                    .attr('fill', '#C8E6C9')
                    .attr('stroke', '#4CAF50')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 550)
                    .attr('y', 305)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Purchase');

                svg.append('ellipse')
                    .attr('cx', 750)
                    .attr('cy', 300)
                    .attr('rx', 70)
                    .attr('ry', 40)
                    .attr('fill', '#C8E6C9')
                    .attr('stroke', '#4CAF50')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', 750)
                    .attr('y', 305)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '16px')
                    .attr('font-weight', 'bold')
                    .text('Purchase');
            }
        }
    </script>
</body>
</html>