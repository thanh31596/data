<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LightGBM - Interactive Learning</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #3498db;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.24em;
            color: #2c3e50;
            font-weight: 300;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 0.96em;
            color: #7f8c8d;
        }
        
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .tab-button {
            background: #f8f9fa;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 12.8px;
            font-family: 'Helvetica', Arial, sans-serif;
            color: #495057;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
        }
        
        .tab-button:hover {
            background: #e9ecef;
            color: #2c3e50;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            min-height: 500px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 1.76em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        .section-subtitle {
            font-size: 1.28em;
            color: #34495e;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        
        .business-question {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .business-question h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.28em;
        }
        
        .dataset-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .dataset-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .dataset-table th, .dataset-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.88em;
        }
        
        .dataset-table th {
            background: #34495e;
            color: black;
            font-weight: bold;
        }
        
        .dataset-table tr:hover {
            background: #f8f9fa;
        }
        
        .feature-column {
            background: #a8e6cf !important;
        }
        
        .target-column {
            background: #ffb3ba !important;
        }
        
        .high-risk {
            background: #fdeaea !important;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .low-risk {
            background: #d5f4e6 !important;
            color: #27ae60;
            font-weight: bold;
        }
        
        .visualization-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 11.2px;
            transition: all 0.3s;
            font-family: 'Helvetica', Arial, sans-serif;
        }
        
        .control-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .algorithm-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .algorithm-step {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .algorithm-step:hover {
            transform: translateY(-5px);
        }
        
        .algorithm-step h4 {
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 0.96em;
        }
        
        .algorithm-step p {
            font-size: 0.88em;
        }
        
        .key-concepts {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .key-concepts h3 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.28em;
        }
        
        .concept-list {
            list-style: none;
            padding: 0;
        }
        
        .concept-list li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
            font-size: 0.88em;
        }
        
        .concept-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #ffc107;
            font-weight: bold;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.6em;
            font-weight: bold;
            color: #27ae60;
            margin: 10px 0;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.88em;
        }
        
        .legend-circle {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .back-link {
            text-align: center;
            margin: 30px 0;
        }
        
        .back-link a {
            background: #34495e;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-size: 0.88em;
            transition: all 0.3s;
        }
        
        .back-link a:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
        }
        
        .comparison-item h4 {
            color: #2980b9;
            margin-bottom: 15px;
            font-size: 1.04em;
        }
        
        .comparison-item p, .comparison-item li {
            font-size: 0.88em;
        }
        
        /* Tree visualization styles */
        .tree-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .tree-viz {
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
            flex: 1;
            min-width: 250px;
            max-width: 300px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .tree-viz.active {
            border-color: #27ae60;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .tree-viz h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .tree-viz svg {
            width: 100%;
            height: 200px;
        }
        
        .node {
            cursor: pointer;
        }
        
        .node circle {
            fill: #3498db;
            stroke: #2980b9;
            stroke-width: 2px;
        }
        
        .node.leaf circle {
            fill: #27ae60;
            stroke: #219a52;
        }
        
        .node.error-focus circle {
            fill: #e74c3c;
            stroke: #c0392b;
        }
        
        .node text {
            font-size: 10px;
            text-anchor: middle;
            fill: black;
            font-weight: bold;
        }
        
        .link {
            fill: none;
            stroke: #7f8c8d;
            stroke-width: 1.5px;
        }
        
        /* Enhanced boosting visualization */
        .boosting-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px 0;
        }
        
        .operator {
            font-size: 2em;
            color: #3498db;
            font-weight: bold;
            margin: 0 10px;
        }
        
        .final-model {
            background: linear-gradient(135deg, #27ae60, #219a52);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .iteration-info {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        
        .feature-importance {
            background: white;
            border: 2px solid #9b59b6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .feature-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .feature-name {
            min-width: 120px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .importance-bar {
            height: 20px;
            background: #9b59b6;
            border-radius: 10px;
            margin: 0 10px;
            transition: width 1s ease;
        }
        
        .importance-value {
            min-width: 40px;
            text-align: right;
            font-weight: bold;
            color: #9b59b6;
        }
        
        .prediction-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .prediction-card {
            background: white;
            border: 2px solid #34495e;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .prediction-card.ensemble {
            border-color: #27ae60;
            background: #d5f4e6;
        }
        
        p {
            font-size: 0.88em;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-button {
                flex: none;
                min-width: none;
            }
            
            .algorithm-steps {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .tree-container {
                flex-direction: column;
            }
            
            .tree-viz {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LightGBM (Gradient Boosting)</h1>
            <p>Building Strong Predictions from Many Weak Learners</p>
        </div>
        
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('business')">Business Scenario</button>
                <button class="tab-button" onclick="showTab('what-is')">What is LightGBM</button>
                <button class="tab-button" onclick="showTab('interactive')">Interactive Demo</button>
                <button class="tab-button" onclick="showTab('how-works')">How It Works</button>
                <button class="tab-button" onclick="showTab('evaluation')">Performance</button>
                <button class="tab-button" onclick="showTab('when-use')">When to Use</button>
            </div>
            
            <!-- Tab 1: Business Scenario -->
            <div id="business" class="tab-content active">
                <h2 class="section-title">Business Scenario: Credit Risk Assessment</h2>
                
                <div class="business-question">
                    <h3>Business Question</h3>
                    <p>"Can we predict loan default risk more accurately by combining multiple factors? We need a highly accurate model that can handle complex patterns and large datasets while providing fast predictions for real-time loan decisions."</p>
                </div>
                
                <h3 class="section-subtitle">Our Dataset: Loan Application Data</h3>
                <p>We have comprehensive data from loan applications including financial history, employment details, and loan characteristics:</p>
                
                <div class="dataset-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Application</th>
                                <th class="feature-column">Credit Score</th>
                                <th class="feature-column">Annual Income</th>
                                <th class="feature-column">Debt-to-Income</th>
                                <th class="feature-column">Employment Years</th>
                                <th class="feature-column">Loan Amount</th>
                                <th class="target-column">Default Risk</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>App-001</td>
                                <td class="feature-column">720</td>
                                <td class="feature-column">$65,000</td>
                                <td class="feature-column">0.35</td>
                                <td class="feature-column">5</td>
                                <td class="feature-column">$25,000</td>
                                <td class="low-risk">Low</td>
                            </tr>
                            <tr>
                                <td>App-002</td>
                                <td class="feature-column">580</td>
                                <td class="feature-column">$35,000</td>
                                <td class="feature-column">0.55</td>
                                <td class="feature-column">1</td>
                                <td class="feature-column">$30,000</td>
                                <td class="high-risk">High</td>
                            </tr>
                            <tr>
                                <td>App-003</td>
                                <td class="feature-column">750</td>
                                <td class="feature-column">$85,000</td>
                                <td class="feature-column">0.25</td>
                                <td class="feature-column">8</td>
                                <td class="feature-column">$40,000</td>
                                <td class="low-risk">Low</td>
                            </tr>
                            <tr>
                                <td>App-004</td>
                                <td class="feature-column">620</td>
                                <td class="feature-column">$45,000</td>
                                <td class="feature-column">0.45</td>
                                <td class="feature-column">3</td>
                                <td class="feature-column">$35,000</td>
                                <td class="high-risk">High</td>
                            </tr>
                            <tr>
                                <td>App-005</td>
                                <td class="feature-column">680</td>
                                <td class="feature-column">$55,000</td>
                                <td class="feature-column">0.30</td>
                                <td class="feature-column">4</td>
                                <td class="feature-column">$20,000</td>
                                <td class="low-risk">Low</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #a8e6cf;"></div>
                        <span>Features (Financial & Employment Data)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #ffb3ba;"></div>
                        <span>Target (Default Risk Level)</span>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Why LightGBM for This Problem</h3>
                    <ul class="concept-list">
                        <li><strong>Complex Patterns:</strong> Credit risk involves intricate relationships between multiple financial factors</li>
                        <li><strong>High Accuracy:</strong> Financial decisions require the most accurate predictions possible</li>
                        <li><strong>Fast Predictions:</strong> Loan applications need real-time risk assessment</li>
                        <li><strong>Feature Importance:</strong> Regulators require understanding of which factors drive decisions</li>
                        <li><strong>Large Datasets:</strong> Banks have millions of historical loan records</li>
                    </ul>
                </div>
            </div>
            
            <!-- Tab 2: What is LightGBM -->
            <div id="what-is" class="tab-content">
                <h2 class="section-title">What is LightGBM?</h2>
                
                <p>LightGBM (Light Gradient Boosting Machine) is an advanced algorithm that creates highly accurate predictions by combining many simple decision trees. Think of it as assembling a team of specialists where each expert fixes the mistakes of the previous ones.</p>
                
                <div class="key-concepts">
                    <h3>The Boosting Concept</h3>
                    <ul class="concept-list">
                        <li><strong>Team of Experts:</strong> Instead of one complex decision tree, use many simple trees working together</li>
                        <li><strong>Learn from Mistakes:</strong> Each new tree focuses on fixing the errors made by previous trees</li>
                        <li><strong>Gradual Improvement:</strong> Each iteration makes the overall prediction slightly better</li>
                        <li><strong>Final Vote:</strong> Combine all trees' predictions for the most accurate result</li>
                    </ul>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Gradient Boosting</h4>
                        <p>Systematically learns from prediction errors to improve accuracy with each iteration</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Light and Fast</h4>
                        <p>Optimized for speed and memory efficiency, handling large datasets quickly</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Tree-Based</h4>
                        <p>Built on decision trees you already understand, but combines many of them intelligently</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Feature Importance</h4>
                        <p>Automatically identifies which features matter most for predictions</p>
                    </div>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>LightGBM vs Single Decision Tree</h4>
                        <ul>
                            <li><strong>Single Tree:</strong> One set of rules, can miss complex patterns</li>
                            <li><strong>LightGBM:</strong> Hundreds of trees, each fixing others' mistakes</li>
                            <li><strong>Accuracy:</strong> Typically 5-15% more accurate than single trees</li>
                            <li><strong>Robustness:</strong> Less likely to overfit, more stable predictions</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>LightGBM vs Random Forest</h4>
                        <ul>
                            <li><strong>Random Forest:</strong> Trees work independently in parallel</li>
                            <li><strong>LightGBM:</strong> Trees work sequentially, learning from each other</li>
                            <li><strong>Speed:</strong> LightGBM is typically faster to train</li>
                            <li><strong>Accuracy:</strong> Often achieves higher accuracy on complex problems</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 3: Interactive Demo -->
            <div id="interactive" class="tab-content">
                <h2 class="section-title">Interactive Boosting Demo</h2>
                <p>Watch how LightGBM builds a strong predictor by combining weak learners (simple trees) step by step. Each tree focuses on fixing different types of prediction errors:</p>
                
                <div class="visualization-container">
                    <div class="controls">
                        <button class="control-btn" id="start-boosting">Start Boosting Process</button>
                        <button class="control-btn" id="next-iteration" style="display: none;">Add Next Tree</button>
                        <button class="control-btn" id="reset-demo">Reset Demo</button>
                    </div>
                    
                    <div id="iteration-info" class="iteration-info" style="display: none;">
                        <h4 id="iteration-title">Iteration Information</h4>
                        <p id="iteration-description">Description will appear here</p>
                    </div>
                    
                    <div class="tree-container" id="tree-container">
                        <!-- Trees will be added here dynamically -->
                    </div>
                    
                    <div class="boosting-flow" id="boosting-flow" style="display: none;">
                        <!-- Equation visualization will appear here -->
                    </div>
                    
                    <div class="feature-importance" id="feature-importance" style="display: none;">
                        <h4 style="color: #9b59b6; margin-bottom: 15px;">Feature Importance (Across All Trees)</h4>
                        <div class="feature-bar">
                            <div class="feature-name">Credit Score</div>
                            <div class="importance-bar" id="credit-bar" style="width: 0%;"></div>
                            <div class="importance-value" id="credit-value">0%</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-name">Debt-to-Income</div>
                            <div class="importance-bar" id="debt-bar" style="width: 0%;"></div>
                            <div class="importance-value" id="debt-value">0%</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-name">Annual Income</div>
                            <div class="importance-bar" id="income-bar" style="width: 0%;"></div>
                            <div class="importance-value" id="income-value">0%</div>
                        </div>
                        <div class="feature-bar">
                            <div class="feature-name">Employment Years</div>
                            <div class="importance-bar" id="employment-bar" style="width: 0%;"></div>
                            <div class="importance-value" id="employment-value">0%</div>
                        </div>
                    </div>
                    
                    <div class="prediction-comparison" id="prediction-comparison" style="display: none;">
                        <h4 style="grid-column: 1 / -1; text-align: center; color: #2c3e50;">Prediction Accuracy Progress</h4>
                        <div class="prediction-card">
                            <h5>Tree 1 Only</h5>
                            <div style="font-size: 1.5em; color: #e74c3c;">72%</div>
                        </div>
                        <div class="prediction-card">
                            <h5>Trees 1-3</h5>
                            <div style="font-size: 1.5em; color: #f39c12;" id="accuracy-3">72%</div>
                        </div>
                        <div class="prediction-card">
                            <h5>Trees 1-5</h5>
                            <div style="font-size: 1.5em; color: #3498db;" id="accuracy-5">72%</div>
                        </div>
                        <div class="prediction-card ensemble">
                            <h5>Full Ensemble</h5>
                            <div style="font-size: 1.5em; color: #27ae60;" id="accuracy-final">72%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: How It Works -->
            <div id="how-works" class="tab-content">
                <h2 class="section-title">How LightGBM Algorithm Works</h2>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>1. Start Simple</h4>
                        <p>Begin with a simple prediction (like the average) and identify where it goes wrong</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>2. Build First Tree</h4>
                        <p>Create a simple decision tree that tries to fix the initial prediction errors</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>3. Calculate Residuals</h4>
                        <p>Find the difference between actual values and current predictions (the mistakes)</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>4. Add Corrective Tree</h4>
                        <p>Build a new tree specifically to predict and fix these remaining errors</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>5. Repeat Process</h4>
                        <p>Continue adding trees until predictions are accurate enough or we reach the limit</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>6. Combine Predictions</h4>
                        <p>Sum all tree predictions with carefully chosen weights for final result</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>The Mathematics Behind Boosting (Simplified)</h3>
                    <ul class="concept-list">
                        <li><strong>Gradient Descent:</strong> Each tree moves predictions in the direction that reduces errors most</li>
                        <li><strong>Loss Function:</strong> Measures how wrong current predictions are (what we want to minimize)</li>
                        <li><strong>Learning Rate:</strong> Controls how much each tree contributes (prevents overfitting)</li>
                        <li><strong>Regularization:</strong> Prevents trees from becoming too complex and overfitting data</li>
                    </ul>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Why Sequential Learning Works</h4>
                        <ul>
                            <li><strong>Specialization:</strong> Each tree becomes an expert at different types of errors</li>
                            <li><strong>Collaboration:</strong> Trees work together rather than competing</li>
                            <li><strong>Continuous Improvement:</strong> Each addition makes the model slightly better</li>
                            <li><strong>Error Correction:</strong> Systematic approach to fixing prediction mistakes</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>LightGBM Optimizations</h4>
                        <ul>
                            <li><strong>Leaf-wise Growth:</strong> Grows trees more efficiently than level-wise approaches</li>
                            <li><strong>Feature Bundling:</strong> Groups similar features to reduce computation</li>
                            <li><strong>Histogram-based:</strong> Uses efficient algorithms for faster training</li>
                            <li><strong>Memory Efficiency:</strong> Optimized data structures for large datasets</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 5: Performance Evaluation -->
            <div id="evaluation" class="tab-content">
                <h2 class="section-title">Model Performance Evaluation</h2>
                <p>Let's evaluate how well our LightGBM model performs on the credit risk assessment data:</p>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>Accuracy</h4>
                        <div class="metric-value">94%</div>
                        <p>Correctly classified 940 out of 1000 loan applications</p>
                    </div>
                    <div class="metric-card">
                        <h4>Precision (High Risk)</h4>
                        <div class="metric-value">91%</div>
                        <p>Of flagged high-risk loans, 91% actually defaulted</p>
                    </div>
                    <div class="metric-card">
                        <h4>Recall (High Risk)</h4>
                        <div class="metric-value">89%</div>
                        <p>Caught 89% of actual loan defaults</p>
                    </div>
                    <div class="metric-card">
                        <h4>Training Time</h4>
                        <div class="metric-value">12 sec</div>
                        <p>Trained on 100,000 records in just 12 seconds</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>What These Results Mean for Business</h3>
                    <ul class="concept-list">
                        <li><strong>Excellent Accuracy (94%):</strong> Significantly reduces loan default losses</li>
                        <li><strong>High Precision (91%):</strong> Minimizes false alarms that could lose good customers</li>
                        <li><strong>Strong Recall (89%):</strong> Catches most risky loans before they become problems</li>
                        <li><strong>Fast Training (12 sec):</strong> Model can be updated frequently with new data</li>
                        <li><strong>Regulatory Compliance:</strong> Feature importance helps explain decisions to regulators</li>
                    </ul>
                </div>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Business Impact Calculation</h4>
                        <ul>
                            <li><strong>Prevented Losses:</strong> $2.1M in bad loans prevented annually</li>
                            <li><strong>Competitive Advantage:</strong> Faster loan approvals improve customer experience</li>
                            <li><strong>Risk Management:</strong> Better portfolio risk assessment and pricing</li>
                            <li><strong>Regulatory Benefits:</strong> Explainable AI meets compliance requirements</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Comparison with Other Models</h4>
                        <ul>
                            <li><strong>Traditional Logistic Regression:</strong> 78% accuracy (16% improvement)</li>
                            <li><strong>Single Decision Tree:</strong> 82% accuracy (12% improvement)</li>
                            <li><strong>Random Forest:</strong> 89% accuracy (5% improvement)</li>
                            <li><strong>Training Speed:</strong> 10x faster than competing gradient boosting methods</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Tab 6: When to Use -->
            <div id="when-use" class="tab-content">
                <h2 class="section-title">When to Use LightGBM</h2>
                
                <div class="comparison-grid">
                    <div class="comparison-item">
                        <h4>Perfect for LightGBM</h4>
                        <ul>
                            <li><strong>High accuracy required</strong> - business decisions with major financial impact</li>
                            <li><strong>Large datasets</strong> - thousands to millions of records</li>
                            <li><strong>Complex patterns</strong> - non-linear relationships between features</li>
                            <li><strong>Mixed data types</strong> - numerical and categorical features together</li>
                            <li><strong>Feature importance needed</strong> - understanding which factors matter most</li>
                            <li><strong>Fast training required</strong> - frequent model updates needed</li>
                        </ul>
                    </div>
                    <div class="comparison-item">
                        <h4>Consider Other Methods When</h4>
                        <ul>
                            <li><strong>Interpretability critical</strong> - need simple rules to explain every decision</li>
                            <li><strong>Very small datasets</strong> - fewer than 1000 records may overfit</li>
                            <li><strong>Linear relationships</strong> - simple patterns may not need complex models</li>
                            <li><strong>Real-time constraints</strong> - ensemble predictions can be slower than single models</li>
                            <li><strong>Limited computational resources</strong> - simpler models may be more practical</li>
                        </ul>
                    </div>
                </div>
                
                <div class="algorithm-steps">
                    <div class="algorithm-step">
                        <h4>Business Applications</h4>
                        <p>Credit scoring, fraud detection, price optimization, demand forecasting, customer churn</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Technical Applications</h4>
                        <p>Ranking systems, recommendation engines, ad targeting, risk assessment, quality control</p>
                    </div>
                    <div class="algorithm-step">
                        <h4>Implementation Tips</h4>
                        <p>Start with default parameters, tune learning rate and number of trees, monitor for overfitting</p>
                    </div>
                </div>
                
                <div class="key-concepts">
                    <h3>Decision Framework: Choose LightGBM When</h3>
                    <ul class="concept-list">
                        <li><strong>Problem Complexity:</strong> Multiple interacting features with non-linear relationships</li>
                        <li><strong>Data Volume:</strong> Large enough dataset to support ensemble learning (1000+ records)</li>
                        <li><strong>Accuracy Priority:</strong> Need highest possible prediction accuracy for business value</li>
                        <li><strong>Speed Requirements:</strong> Fast training important for model maintenance and updates</li>
                        <li><strong>Mixed Data:</strong> Combination of numerical and categorical features</li>
                        <li><strong>Stakeholder Needs:</strong> Feature importance analysis required for decision support</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="back-link">
            <a href="#" onclick="history.back()">← Back to Main Presentation</a>
        </div>
    </div>

    <script>
        // Tab functionality
        function showTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Tree structures for different iterations
        const treeStructures = [
            {
                name: "Tree 1",
                focus: "Credit Score Split",
                description: "First tree learns basic credit score patterns",
                nodes: [
                    {id: 1, parent: null, name: "CS < 650?", type: "root"},
                    {id: 2, parent: 1, name: "CS < 600?", type: "internal"},
                    {id: 3, parent: 1, name: "DTI > 0.4?", type: "internal"},
                    {id: 4, parent: 2, name: "High Risk", type: "leaf"},
                    {id: 5, parent: 2, name: "Medium", type: "leaf"},
                    {id: 6, parent: 3, name: "Medium", type: "leaf"},
                    {id: 7, parent: 3, name: "Low Risk", type: "leaf"}
                ]
            },
            {
                name: "Tree 2",
                focus: "Debt-to-Income Errors",
                description: "Focuses on cases where debt ratio matters most",
                nodes: [
                    {id: 1, parent: null, name: "DTI > 0.45?", type: "root", error: true},
                    {id: 2, parent: 1, name: "Income < 40k?", type: "internal"},
                    {id: 3, parent: 1, name: "Emp < 2yr?", type: "internal"},
                    {id: 4, parent: 2, name: "High Risk", type: "leaf"},
                    {id: 5, parent: 2, name: "Medium", type: "leaf"},
                    {id: 6, parent: 3, name: "Medium", type: "leaf"},
                    {id: 7, parent: 3, name: "Low Risk", type: "leaf"}
                ]
            },
            {
                name: "Tree 3",
                focus: "Income Patterns",
                description: "Captures income-based risk patterns",
                nodes: [
                    {id: 1, parent: null, name: "Income < 50k?", type: "root"},
                    {id: 2, parent: 1, name: "Loan > 30k?", type: "internal", error: true},
                    {id: 3, parent: 1, name: "CS > 700?", type: "internal"},
                    {id: 4, parent: 2, name: "High Risk", type: "leaf"},
                    {id: 5, parent: 2, name: "Medium", type: "leaf"},
                    {id: 6, parent: 3, name: "Low Risk", type: "leaf"},
                    {id: 7, parent: 3, name: "Medium", type: "leaf"}
                ]
            },
            {
                name: "Tree 4",
                focus: "Employment Stability",
                description: "Identifies employment-related risk factors",
                nodes: [
                    {id: 1, parent: null, name: "Emp < 3yr?", type: "root"},
                    {id: 2, parent: 1, name: "DTI > 0.5?", type: "internal"},
                    {id: 3, parent: 1, name: "Income > 60k?", type: "internal"},
                    {id: 4, parent: 2, name: "High Risk", type: "leaf"},
                    {id: 5, parent: 2, name: "Medium", type: "leaf"},
                    {id: 6, parent: 3, name: "Low Risk", type: "leaf"},
                    {id: 7, parent: 3, name: "Medium", type: "leaf"}
                ]
            },
            {
                name: "Tree 5",
                focus: "Fine-tuning",
                description: "Makes small corrections to edge cases",
                nodes: [
                    {id: 1, parent: null, name: "Complex Rule", type: "root"},
                    {id: 2, parent: 1, name: "Edge Case 1", type: "internal"},
                    {id: 3, parent: 1, name: "Edge Case 2", type: "internal"},
                    {id: 4, parent: 2, name: "+0.1", type: "leaf"},
                    {id: 5, parent: 2, name: "-0.05", type: "leaf"},
                    {id: 6, parent: 3, name: "+0.05", type: "leaf"},
                    {id: 7, parent: 3, name: "-0.1", type: "leaf"}
                ]
            }
        ];
        
        // Boosting demo variables
        let currentIteration = 0;
        let maxIterations = 5;
        let isBoostingActive = false;
        
        // Feature importance values (simulated)
        const featureImportance = {
            creditScore: 35,
            debtRatio: 28,
            income: 22,
            employment: 15
        };
        
        function createTree(container, treeData, treeIndex) {
            const treeDiv = document.createElement('div');
            treeDiv.className = 'tree-viz';
            treeDiv.id = `tree-${treeIndex}`;
            
            const title = document.createElement('h4');
            title.textContent = treeData.name;
            treeDiv.appendChild(title);
            
            const svgContainer = document.createElement('div');
            svgContainer.style.width = '100%';
            svgContainer.style.height = '200px';
            
            // Create SVG
            const svg = d3.select(svgContainer)
                .append('svg')
                .attr('width', '100%')
                .attr('height', '100%')
                .attr('viewBox', '0 0 280 200')
                .attr('preserveAspectRatio', 'xMidYMid meet');
            
            const g = svg.append('g')
                .attr('transform', 'translate(140,20)');
            
            // Create tree layout
            const treeLayout = d3.tree()
                .size([240, 140]);
            
            // Convert flat structure to hierarchy
            const stratify = d3.stratify()
                .id(d => d.id)
                .parentId(d => d.parent);
            
            const root = stratify(treeData.nodes);
            const treeNodes = treeLayout(root);
            
            // Create links
            g.selectAll('.link')
                .data(treeNodes.links())
                .enter().append('path')
                .attr('class', 'link')
                .attr('d', d3.linkVertical()
                    .x(d => d.x - 120)
                    .y(d => d.y));
            
            // Create nodes
            const node = g.selectAll('.node')
                .data(treeNodes.descendants())
                .enter().append('g')
                .attr('class', d => 'node' + (d.data.type === 'leaf' ? ' leaf' : '') + (d.data.error ? ' error-focus' : ''))
                .attr('transform', d => `translate(${d.x - 120},${d.y})`);
            
            // Add circles
            node.append('circle')
                .attr('r', 15);
            
            // Add text
            node.append('text')
                .attr('dy', '.35em')
                .style('font-size', '9px')
                .text(d => {
                    const name = d.data.name;
                    return name.length > 10 ? name.substring(0, 8) + '..' : name;
                });
            
            // Add description
            const desc = document.createElement('p');
            desc.style.fontSize = '0.8em';
            desc.style.marginTop = '10px';
            desc.style.color = '#7f8c8d';
            desc.textContent = treeData.description;
            
            treeDiv.appendChild(svgContainer);
            treeDiv.appendChild(desc);
            container.appendChild(treeDiv);
            
            return treeDiv;
        }
        
        function initializeBoostingDemo() {
            document.getElementById("start-boosting").addEventListener("click", startBoosting);
            document.getElementById("next-iteration").addEventListener("click", nextIteration);
            document.getElementById("reset-demo").addEventListener("click", resetBoostingDemo);
        }
        
        function startBoosting() {
            isBoostingActive = true;
            currentIteration = 0;
            
            document.getElementById("start-boosting").style.display = "none";
            document.getElementById("next-iteration").style.display = "inline-block";
            
            showIterationInfo("Starting Boosting Process", 
                "We begin with a simple baseline prediction. Each tree will learn to fix the mistakes of previous trees.");
            
            nextIteration();
        }
        
        function nextIteration() {
            if (currentIteration >= maxIterations) {
                finishBoosting();
                return;
            }
            
            currentIteration++;
            
            const container = document.getElementById("tree-container");
            const treeData = treeStructures[currentIteration - 1];
            
            // Add tree visualization
            const tree = createTree(container, treeData, currentIteration);
            
            // Animate tree appearance
            setTimeout(() => {
                tree.classList.add('active');
            }, 100);
            
            // Update boosting flow equation
            updateBoostingFlow();
            
            // Update accuracy
            updateAccuracy();
            
            // Show iteration info
            if (currentIteration === 1) {
                showIterationInfo(`${treeData.name}: ${treeData.focus}`, 
                    treeData.description);
            } else if (currentIteration <= 3) {
                showIterationInfo(`${treeData.name}: ${treeData.focus}`, 
                    `${treeData.description} Notice how this tree focuses on different aspects than previous trees.`);
            } else {
                showIterationInfo(`${treeData.name}: ${treeData.focus}`, 
                    treeData.description);
            }
            
            if (currentIteration >= maxIterations) {
                document.getElementById("next-iteration").style.display = "none";
                setTimeout(finishBoosting, 1500);
            }
        }
        
        function updateBoostingFlow() {
            const flow = document.getElementById("boosting-flow");
            flow.style.display = "flex";
            flow.innerHTML = "";
            
            for (let i = 1; i <= currentIteration; i++) {
                if (i > 1) {
                    const plus = document.createElement('span');
                    plus.className = 'operator';
                    plus.textContent = '+';
                    flow.appendChild(plus);
                }
                
                const treeLabel = document.createElement('div');
                treeLabel.style.padding = '10px';
                treeLabel.style.background = '#3498db';
                treeLabel.style.color = 'white';
                treeLabel.style.borderRadius = '5px';
                treeLabel.style.fontWeight = 'bold';
                treeLabel.textContent = `Tree ${i}`;
                flow.appendChild(treeLabel);
            }
            
            if (currentIteration >= maxIterations) {
                const equals = document.createElement('span');
                equals.className = 'operator';
                equals.textContent = '=';
                equals.style.color = '#e74c3c';
                flow.appendChild(equals);
                
                const finalModel = document.createElement('div');
                finalModel.className = 'final-model';
                finalModel.innerHTML = '<div>Strong Ensemble</div><div style="font-size: 0.9em;">94% Accuracy</div>';
                flow.appendChild(finalModel);
            }
        }
        
        function updateAccuracy() {
            const accuracies = [72, 78, 84, 89, 92, 94];
            
            if (currentIteration >= 3) {
                document.getElementById("accuracy-3").textContent = accuracies[2] + "%";
            }
            if (currentIteration >= 5) {
                document.getElementById("accuracy-5").textContent = accuracies[4] + "%";
                document.getElementById("accuracy-final").textContent = accuracies[5] + "%";
            }
        }
        
        function finishBoosting() {
            // Show feature importance
            document.getElementById("feature-importance").style.display = "block";
            animateFeatureImportance();
            
            // Show prediction comparison
            document.getElementById("prediction-comparison").style.display = "grid";
            
            showIterationInfo("Boosting Complete!", 
                "The ensemble of 5 trees working together achieves 94% accuracy. Each tree specialized in different aspects of the data, creating a powerful combined predictor.");
        }
        
        function animateFeatureImportance() {
            setTimeout(() => {
                document.getElementById("credit-bar").style.width = featureImportance.creditScore + "%";
                document.getElementById("credit-value").textContent = featureImportance.creditScore + "%";
            }, 200);
            
            setTimeout(() => {
                document.getElementById("debt-bar").style.width = featureImportance.debtRatio + "%";
                document.getElementById("debt-value").textContent = featureImportance.debtRatio + "%";
            }, 400);
            
            setTimeout(() => {
                document.getElementById("income-bar").style.width = featureImportance.income + "%";
                document.getElementById("income-value").textContent = featureImportance.income + "%";
            }, 600);
            
            setTimeout(() => {
                document.getElementById("employment-bar").style.width = featureImportance.employment + "%";
                document.getElementById("employment-value").textContent = featureImportance.employment + "%";
            }, 800);
        }
        
        function resetBoostingDemo() {
            isBoostingActive = false;
            currentIteration = 0;
            
            // Reset UI elements
            document.getElementById("tree-container").innerHTML = "";
            document.getElementById("boosting-flow").innerHTML = "";
            document.getElementById("boosting-flow").style.display = "none";
            document.getElementById("iteration-info").style.display = "none";
            document.getElementById("feature-importance").style.display = "none";
            document.getElementById("prediction-comparison").style.display = "none";
            
            // Reset buttons
            document.getElementById("start-boosting").style.display = "inline-block";
            document.getElementById("next-iteration").style.display = "none";
            
            // Reset accuracy displays
            document.getElementById("accuracy-3").textContent = "72%";
            document.getElementById("accuracy-5").textContent = "72%";
            document.getElementById("accuracy-final").textContent = "72%";
            
            // Reset feature importance bars
            document.getElementById("credit-bar").style.width = "0%";
            document.getElementById("debt-bar").style.width = "0%";
            document.getElementById("income-bar").style.width = "0%";
            document.getElementById("employment-bar").style.width = "0%";
            document.getElementById("credit-value").textContent = "0%";
            document.getElementById("debt-value").textContent = "0%";
            document.getElementById("income-value").textContent = "0%";
            document.getElementById("employment-value").textContent = "0%";
        }
        
        function showIterationInfo(title, description) {
            document.getElementById("iteration-title").textContent = title;
            document.getElementById("iteration-description").textContent = description;
            document.getElementById("iteration-info").style.display = "block";
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeBoostingDemo();
        });
    </script>
</body>
</html>