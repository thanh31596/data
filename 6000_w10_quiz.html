<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical ML & Prescriptive Analytics Quiz</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f7fa;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .quiz-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .business-context {
            background-color: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #3498db;
        }
        .dataset-info {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #28a745;
        }
        .part-header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 30px 0 20px 0;
            text-align: center;
        }
        .question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .question h3 {
            margin-top: 0;
            color: #3498db;
        }
        .options {
            margin-left: 20px;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-right: 10px;
        }
        .true-false label {
            display: inline-block;
            margin-right: 20px;
        }
        .scenario {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .data-table th, .data-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .data-table th {
            background-color: #f4f4f4;
            font-weight: bold;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .timer-container {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s;
        }
        .timer {
            font-size: 22px;
            font-weight: bold;
            color: #2c3e50;
            margin: 0 10px;
        }
        .timer.warning {
            color: #f39c12;
        }
        .timer.danger {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        #results {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 5px;
            text-align: center;
        }
        #score {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        .feedback {
            margin-top: 10px;
            font-style: italic;
            color: #7f8c8d;
        }
        ul {
            text-align: left;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h1>Medical Machine Learning & Prescriptive Analytics Quiz</h1>
    
    <div class="timer-container" id="timer-container">
        <span>Time Remaining:</span>
        <div class="timer" id="timer">120:00</div>
    </div>
    
    <div class="quiz-container">
        <div class="business-context">
            <h2>üè• Business Problem & Medical Context</h2>
            <p><strong>Hospital Scenario:</strong> You are a data scientist at Metro General Hospital, a 500-bed facility that recently implemented three different treatment protocols (A, B, and C) for a common medical condition. The hospital leadership wants to optimize patient outcomes, reduce readmission rates, and improve operational efficiency.</p>
            
            <p><strong>Objective:</strong> Use machine learning and prescriptive analytics to:</p>
            <ul>
                <li>Identify which treatments work best for different patient populations</li>
                <li>Predict patient recovery outcomes</li>
                <li>Develop actionable recommendations for clinical decision-making</li>
                <li>Optimize resource allocation and treatment protocols</li>
            </ul>
            
            <p><strong>Clinical Importance:</strong> With healthcare costs rising and patient outcomes under scrutiny, data-driven approaches to treatment selection and risk stratification are crucial for modern healthcare delivery.</p>
        </div>

        <div class="dataset-info">
            <h2>üìä Dataset Description</h2>
            <p><strong>Source:</strong> 500 anonymized patient records from Metro General Hospital</p>
            
            <p><strong>Variables:</strong></p>
            <ul>
                <li><strong>Age:</strong> Patient age (30-90 years)</li>
                <li><strong>Blood_Pressure:</strong> Systolic blood pressure (110-160 mmHg)</li>
                <li><strong>Cholesterol:</strong> Total cholesterol level (150-250 mg/dL)</li>
                <li><strong>Treatment_Type:</strong> Treatment received (A, B, or C)</li>
                <li><strong>Hospital_Stay_Days:</strong> Length of stay (1-15 days)</li>
                <li><strong>Readmission_Risk_Score:</strong> Predicted readmission risk (0-100)</li>
                <li><strong>Outcome:</strong> Recovery status (0 = No recovery, 1 = Recovery)</li>
            </ul>
            
            <p><strong>Note:</strong> This synthetic dataset includes realistic medical relationships, such as Treatment B being more effective for older patients and higher readmission risk correlating with poorer outcomes.</p>
        </div>

        <form id="quiz-form">
            <div class="student-info">
                <h2>Student Information</h2>
                <p>
                    <label for="student-name">Full Name:</label>
                    <input type="text" id="student-name" name="student-name" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px;">
                </p>
                <p>
                    <label for="student-id">Student ID:</label>
                    <input type="text" id="student-id" name="student-id" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px;">
                </p>
            </div>

            <!-- PART 1: DATA INSIGHTS -->
            <div class="part-header">
                <h2>Part 1: Data Insights & Exploratory Analysis (5 Questions)</h2>
                <p style="margin: 5px 0; font-size: 14px;">Analyze the dataset using descriptive statistics, correlations, and visualizations</p>
            </div>

            <div class="question">
                <h3>Question 1: Overall Recovery Rate</h3>
                <p>Based on the medical dataset provided, what is the overall recovery rate across all 500 patients?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> 45%</label>
                    <label><input type="radio" name="q1" value="b"> 50%</label>
                    <label><input type="radio" name="q1" value="c"> 55%</label>
                    <label><input type="radio" name="q1" value="d"> 60%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 2: Treatment Effectiveness</h3>
                <p>Which treatment type has the lowest average readmission risk score, indicating the safest treatment option?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> Treatment A</label>
                    <label><input type="radio" name="q2" value="b"> Treatment B</label>
                    <label><input type="radio" name="q2" value="c"> Treatment C</label>
                    <label><input type="radio" name="q2" value="d"> All treatments have equal risk</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 3: Age-Based Treatment Analysis</h3>
                <p>For patients over 70 years old, which treatment shows the highest recovery rate?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> Treatment A</label>
                    <label><input type="radio" name="q3" value="b"> Treatment B</label>
                    <label><input type="radio" name="q3" value="c"> Treatment C</label>
                    <label><input type="radio" name="q3" value="d"> Cannot be determined from the data</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 4: Correlation Analysis</h3>
                <p>What is the correlation between patient age and hospital stay duration?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> Strong positive correlation (>0.5)</label>
                    <label><input type="radio" name="q4" value="b"> Moderate positive correlation (0.3-0.5)</label>
                    <label><input type="radio" name="q4" value="c"> Weak positive correlation (<0.3)</label>
                    <label><input type="radio" name="q4" value="d"> Negative correlation</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 5: High-Risk Patient Analysis</h3>
                <p>Among patients with blood pressure >140 AND cholesterol >200, what percentage received Treatment B?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> 25-30%</label>
                    <label><input type="radio" name="q5" value="b"> 30-35%</label>
                    <label><input type="radio" name="q5" value="c"> 35-40%</label>
                    <label><input type="radio" name="q5" value="d"> 40-45%</label>
                </div>
            </div>

            <!-- PART 2: ML MODEL APPLICATION -->
            <div class="part-header">
                <h2>Part 2: Machine Learning Model Application (5 Questions)</h2>
                <p style="margin: 5px 0; font-size: 14px;">Train and evaluate classification models to predict patient recovery outcomes</p>
            </div>

            <div class="question">
                <h3>Question 6: Model Performance</h3>
                <p>After training a logistic regression model to predict patient recovery outcomes, what is the expected model accuracy?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> 65-70%</label>
                    <label><input type="radio" name="q6" value="b"> 70-75%</label>
                    <label><input type="radio" name="q6" value="c"> 75-80%</label>
                    <label><input type="radio" name="q6" value="d"> 80-85%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 7: Feature Importance</h3>
                <p>Which feature has the highest absolute coefficient (strongest predictive power) in the logistic regression model?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> Age</label>
                    <label><input type="radio" name="q7" value="b"> Readmission_Risk_Score</label>
                    <label><input type="radio" name="q7" value="c"> Hospital_Stay_Days</label>
                    <label><input type="radio" name="q7" value="d"> Treatment_Type_B</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 8: Model Precision</h3>
                <p>What is the model's precision for predicting positive outcomes (recovery = 1)?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> 65-70%</label>
                    <label><input type="radio" name="q8" value="b"> 70-75%</label>
                    <label><input type="radio" name="q8" value="c"> 75-80%</label>
                    <label><input type="radio" name="q8" value="d"> 80-85%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 9: High-Risk Predictions</h3>
                <p>When applying the trained model to patients with Readmission_Risk_Score > 80, what percentage are predicted to recover?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> 10-20%</label>
                    <label><input type="radio" name="q9" value="b"> 20-30%</label>
                    <label><input type="radio" name="q9" value="c"> 30-40%</label>
                    <label><input type="radio" name="q9" value="d"> 40-50%</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 10: Treatment Effect in Model</h3>
                <p>Based on the logistic regression coefficients, which statement about Treatment B is most accurate?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> It has no significant effect on outcomes</label>
                    <label><input type="radio" name="q10" value="b"> It has a positive effect on recovery probability</label>
                    <label><input type="radio" name="q10" value="c"> It has a negative effect on recovery probability</label>
                    <label><input type="radio" name="q10" value="d"> Its effect depends on patient age</label>
                </div>
            </div>

            <!-- PART 3: PRESCRIPTIVE METHODOLOGIES -->
            <div class="part-header">
                <h2>Part 3: Prescriptive Methodologies & Actionable Insights (10 Questions)</h2>
                <p style="margin: 5px 0; font-size: 14px;">Apply SHAP values, ATE analysis, and clustering for clinical decision-making</p>
            </div>

            <div class="question">
                <h3>Question 11: SHAP Analysis</h3>
                <p>Using SHAP values, which feature contributes most to positive predictions (recovery) for the highest-risk patients (top 20% by readmission risk)?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="a"> Young age</label>
                    <label><input type="radio" name="q11" value="b"> Low blood pressure</label>
                    <label><input type="radio" name="q11" value="c"> Treatment B</label>
                    <label><input type="radio" name="q11" value="d"> Short hospital stay</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 12: Average Treatment Effect</h3>
                <p>What is the Average Treatment Effect (ATE) of Treatment B compared to Treatment A for patients over 50?</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="a"> +5% recovery rate improvement</label>
                    <label><input type="radio" name="q12" value="b"> +10% recovery rate improvement</label>
                    <label><input type="radio" name="q12" value="c"> +15% recovery rate improvement</label>
                    <label><input type="radio" name="q12" value="d"> No significant difference</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 13: K-means Clustering</h3>
                <p>When performing K-means clustering (k=3) on patient characteristics, which cluster has the highest average readmission risk score?</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="a"> Cluster 0</label>
                    <label><input type="radio" name="q13" value="b"> Cluster 1</label>
                    <label><input type="radio" name="q13" value="c"> Cluster 2</label>
                    <label><input type="radio" name="q13" value="d"> All clusters have similar risk</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 14: Personalized Treatment</h3>
                <p>Based on SHAP analysis, for a 45-year-old patient with high cholesterol, which intervention would most improve their predicted outcome?</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="a"> Reducing blood pressure</label>
                    <label><input type="radio" name="q14" value="b"> Switching to Treatment B</label>
                    <label><input type="radio" name="q14" value="c"> Reducing hospital stay</label>
                    <label><input type="radio" name="q14" value="d"> Age modification (not applicable)</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 15: Resource Allocation</h3>
                <p>According to clustering analysis, which patient cluster would benefit most from targeted intervention programs?</p>
                <div class="options">
                    <label><input type="radio" name="q15" value="a"> Cluster with youngest patients</label>
                    <label><input type="radio" name="q15" value="b"> Cluster with highest readmission risk</label>
                    <label><input type="radio" name="q15" value="c"> Cluster with longest hospital stays</label>
                    <label><input type="radio" name="q15" value="d"> Cluster with highest blood pressure</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 16: Population-Level Impact</h3>
                <p>Based on your ATE analysis, what treatment protocol change would have the greatest population-level impact on hospital recovery rates?</p>
                <div class="options">
                    <label><input type="radio" name="q16" value="a"> Switch all patients under 50 from Treatment A to Treatment B</label>
                    <label><input type="radio" name="q16" value="b"> Switch all patients over 50 from Treatment A to Treatment B</label>
                    <label><input type="radio" name="q16" value="c"> Switch all high-risk patients from Treatment C to Treatment B</label>
                    <label><input type="radio" name="q16" value="d"> Switch all patients from Treatment C to Treatment A</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 17: Clinical Decision Threshold</h3>
                <p>Using SHAP values to inform clinical decision-making, at what readmission risk score threshold should the hospital implement immediate intensive intervention protocols?</p>
                <div class="options">
                    <label><input type="radio" name="q17" value="a"> Risk score > 60</label>
                    <label><input type="radio" name="q17" value="b"> Risk score > 70</label>
                    <label><input type="radio" name="q17" value="c"> Risk score > 80</label>
                    <label><input type="radio" name="q17" value="d"> Risk score > 90</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 18: Treatment Selection Criteria</h3>
                <p>For personalized treatment selection, which patient characteristic combination most strongly indicates Treatment B would be optimal?</p>
                <div class="options">
                    <label><input type="radio" name="q18" value="a"> Age < 40 and low cholesterol</label>
                    <label><input type="radio" name="q18" value="b"> Age > 50 and high readmission risk</label>
                    <label><input type="radio" name="q18" value="c"> Young age and short expected stay</label>
                    <label><input type="radio" name="q18" value="d"> High blood pressure and low risk score</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 19: Cost-Effectiveness</h3>
                <p>Based on your model's feature importance, which single operational change would most cost-effectively improve patient outcomes hospital-wide?</p>
                <div class="options">
                    <label><input type="radio" name="q19" value="a"> Implement universal cholesterol screening</label>
                    <label><input type="radio" name="q19" value="b"> Develop targeted protocols for high readmission risk patients</label>
                    <label><input type="radio" name="q19" value="c"> Reduce average hospital stay duration</label>
                    <label><input type="radio" name="q19" value="d"> Focus only on blood pressure management</label>
                </div>
            </div>

            <div class="question">
                <h3>Question 20: Triage Strategy</h3>
                <p>To optimize resource allocation, which patient triage strategy should the hospital implement at admission?</p>
                <div class="options">
                    <label><input type="radio" name="q20" value="a"> Prioritize all patients over 70 for Treatment B</label>
                    <label><input type="radio" name="q20" value="b"> Use clustering algorithm to assign patients to specialized care pathways</label>
                    <label><input type="radio" name="q20" value="c"> Focus intensive resources only on patients with risk scores > 75</label>
                    <label><input type="radio" name="q20" value="d"> Assign treatment based solely on age and blood pressure</label>
                </div>
            </div>
            
            <button type="submit" id="submit-btn">Submit Quiz</button>
        </form>
        
        <div id="results">
            <h2>Quiz Results</h2>
            <p>Your score: <span id="score">0/20</span></p>
            <div class="feedback" id="feedback"></div>
        </div>
    </div>

    <script>
        // Initialize timer variables (2 hours = 120 minutes)
        let timeLeft = 120 * 60; // 120 minutes in seconds
        let timerInterval;
        
        // Function to format time as HH:MM:SS or MM:SS
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const remainingSeconds = seconds % 60;
            
            if (hours > 0) {
                return `${hours}:${minutes < 10 ? '0' : ''}${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
            } else {
                return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
            }
        }
        
        // Function to update the timer display
        function updateTimer() {
            const timerElement = document.getElementById('timer');
            const timerContainer = document.getElementById('timer-container');
            
            timeLeft--;
            
            // Update the timer text
            timerElement.textContent = formatTime(timeLeft);
            
            // Add warning colors as time gets low
            if (timeLeft <= 300) { // Last 5 minutes
                timerElement.className = 'timer danger';
                timerContainer.style.backgroundColor = '#fef2f2';
            } else if (timeLeft <= 900) { // Last 15 minutes
                timerElement.className = 'timer warning';
                timerContainer.style.backgroundColor = '#fef9e7';
            }
            
            // Auto-submit when time is up
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                document.getElementById('quiz-form').dispatchEvent(new Event('submit'));
            }
        }
        
        // Start the timer when the page loads
        window.onload = function() {
            timerInterval = setInterval(updateTimer, 1000);
        };
        
        document.getElementById('quiz-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Clear the timer interval when the quiz is submitted
            clearInterval(timerInterval);
            
            // Define correct answers
            const correctAnswers = {
                q1: 'b',   // 50% recovery rate
                q2: 'b',   // Treatment B has lowest risk
                q3: 'b',   // Treatment B best for >70
                q4: 'c',   // Weak positive correlation
                q5: 'c',   // 35-40% high-risk patients got Treatment B
                q6: 'c',   // 75-80% model accuracy
                q7: 'b',   // Readmission_Risk_Score highest coefficient
                q8: 'c',   // 75-80% precision
                q9: 'b',   // 20-30% high-risk recovery
                q10: 'b',  // Treatment B positive effect
                q11: 'c',  // Treatment B in SHAP
                q12: 'c',  // 15% ATE improvement
                q13: 'c',  // Cluster 2 highest risk
                q14: 'b',  // Switch to Treatment B
                q15: 'b',  // Highest risk cluster
                q16: 'b',  // Switch >50 A to B
                q17: 'c',  // Risk score >80 threshold
                q18: 'b',  // Age >50 and high risk
                q19: 'b',  // Target high-risk protocols
                q20: 'b'   // Clustering-based pathways
            };
            
            // Calculate score
            let score = 0;
            let formData = new FormData(this);
            let formObject = {};
            
            formData.forEach(function(value, key) {
                formObject[key] = value;
                if (key in correctAnswers && value === correctAnswers[key]) {
                    score++;
                }
            });
            
            // Display results
            document.getElementById('score').textContent = score + '/20';
            
            let feedback = '';
            if (score >= 18) {
                feedback = 'Exceptional! You have mastered medical ML and prescriptive analytics concepts. Ready for advanced healthcare data science roles.';
            } else if (score >= 15) {
                feedback = 'Excellent work! You understand most concepts well. Perfect for applying ML in clinical settings.';
            } else if (score >= 12) {
                feedback = 'Good foundation! You grasp the key concepts but should review prescriptive analytics applications.';
            } else if (score >= 8) {
                feedback = 'Basic understanding present. Focus on practicing SHAP analysis, ATE calculations, and clinical decision-making.';
            } else {
                feedback = 'Need significant review. Start with foundational ML concepts before advancing to prescriptive healthcare analytics.';
            }
            
            document.getElementById('feedback').textContent = feedback;
            document.getElementById('results').style.display = 'block';
            
            // Hide the timer
            document.getElementById('timer-container').style.display = 'none';
            
            // Prepare data for emailing
            const studentName = document.getElementById('student-name').value;
            const studentId = document.getElementById('student-id').value;
            
            // Calculate time spent
            const timeSpent = (120 * 60) - timeLeft; // Seconds spent on the quiz
            const timeSpentFormatted = formatTime(timeSpent);
            
            // Log detailed results
            console.log({
                assessment: 'Medical ML & Prescriptive Analytics Quiz',
                student: {
                    name: studentName,
                    id: studentId
                },
                score: score,
                percentage: Math.round((score/20) * 100),
                timeSpent: timeSpentFormatted,
                answers: formObject,
                submissionTime: new Date().toISOString()
            });
            
            // Show completion message
            alert(`Thank you for completing the Medical ML & Prescriptive Analytics Quiz, ${studentName}!\n\nYour Results:\n‚Ä¢ Score: ${score}/20 (${Math.round((score/20) * 100)}%)\n‚Ä¢ Time Spent: ${timeSpentFormatted}\n\nA copy of your results will be sent to the course instructor.`);
        });
    </script>
</body>
</html>